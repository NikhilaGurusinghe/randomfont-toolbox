"use strict";
(self["webpackChunkrandomfont"] = self["webpackChunkrandomfont"] || []).push([[882],{

/***/ 293:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {


// EXTERNAL MODULE: ./node_modules/.pnpm/p5@1.11.10/node_modules/p5/lib/p5.min.js
var p5_min = __webpack_require__(996);
var p5_min_default = /*#__PURE__*/__webpack_require__.n(p5_min);
// EXTERNAL MODULE: ./node_modules/.pnpm/opentype.js@1.3.4/node_modules/opentype.js/dist/opentype.module.js
var opentype_module = __webpack_require__(652);
// EXTERNAL MODULE: ./src/assets/fonts/Libre_Baskerville/LibreBaskerville-Regular.ttf
var LibreBaskerville_Regular = __webpack_require__(496);
// EXTERNAL MODULE: ./src/renderers/otf/render-font.ts + 2 modules
var render_font = __webpack_require__(840);
// EXTERNAL MODULE: ./src/renderers/otf/render-strategy.ts
var render_strategy = __webpack_require__(922);
// EXTERNAL MODULE: ./src/renderers/otf/path-preprocessor.ts
var path_preprocessor = __webpack_require__(386);
;// ./src/experiments/medium/medium-word-erosion-values.ts
const mediumWordErosionValues = [
    0, 0, 0, 0, 0,
    0,
    0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4,
    0,
    0, 0, 0, 0, 0,
    0,
    0,
    0,
    0.2, 0.2, 0.2, 0.2, 0.2, 0.2,
    0,
    0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2,
    0,
    0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0, 0, 0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6,
    0, 0, 0,
    0,
    0, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35,
    0,
    0.40, 0.45, 0.50, 0.55,
    0,
    0.60, 0.65,
    0,
    0.70, 0.75, 0.80,
    0,
    0.85, 0.90, 0.95, 1, 1.5
];

;// ./src/experiments/medium/sketch.ts








function sketch(p5) {
    let libreBaskervilleRegOTF;
    let text = "We’re destroying words — scores of them, \n" +
        "hundreds of them, every day. We’re cutting\n" +
        "the language down to the bone.";
    const typeSize = 64;
    let textPaths;
    let unprocessedTextPaths;
    const lines = text.split(/\r?\n/);
    const freakToCrazinessValue = 1.36;
    const erosionStrengthValue = -3;
    function redrawFont(immediatelyRedraw = true) {
        p5.background(255);
        const maxLineWidth = Math.max(...lines.map(line => {
            const bb = libreBaskervilleRegOTF
                .getPath(line, 0, 0, typeSize, { kerning: true })
                .getBoundingBox();
            return bb.x2 - bb.x1;
        }));
        if (immediatelyRedraw) {
            let paths = render_font/* getTextPaths */.is(p5, libreBaskervilleRegOTF, text, typeSize, path_preprocessor/* freakTo */.H, { craziness: freakToCrazinessValue }, { align: "left", lineHeight: 1, marginX: (p5.windowWidth - maxLineWidth) / 2, marginY: 0 });
            textPaths = paths.processedTextPath;
            unprocessedTextPaths = paths.originalTextPath;
        }
        render_font/* renderFont */.Q1(p5, textPaths, render_strategy/* erode */.s, { erosionStrength: mediumWordErosionValues.map(x => x * erosionStrengthValue) }, unprocessedTextPaths);
    }
    p5.setup = () => {
        p5.createCanvas(p5.windowWidth, p5.windowHeight);
        opentype_module/* default.load */.Ay.load(LibreBaskerville_Regular, (error, font) => {
            if (error) {
                console.log("opentype.js | " + LibreBaskerville_Regular + " could not be loaded: " + error);
            }
            else {
                if (font !== undefined) {
                    libreBaskervilleRegOTF = font;
                    redrawFont();
                    console.log("opentype.js | " + LibreBaskerville_Regular + " loaded.");
                }
                else {
                    console.log("opentype.js | " + LibreBaskerville_Regular + " could not be loaded: it was undefined");
                }
            }
        });
    };
    p5.windowResized = () => {
        p5.resizeCanvas(p5.windowWidth, p5.windowHeight);
        redrawFont();
    };
    p5.keyPressed = () => {
        let needsUpdate = false;
        if (p5.key === "ArrowUp") {
            needsUpdate = true;
        }
        if (needsUpdate)
            redrawFont();
    };
}
new (p5_min_default())(sketch);


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [652,191], () => (__webpack_exec__(293)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztnQkFDUixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLHdCQUF1QixHQUFHLHdCQUF3QixHQUFHLEtBQUssQ0FBQyxDQUFDO1lBQy9GLENBQUM7aUJBQU0sQ0FBQztnQkFDSixJQUFJLElBQUksS0FBSyxTQUFTLEVBQUUsQ0FBQztvQkFDckIsc0JBQXNCLEdBQUcsSUFBSSxDQUFDO29CQUM5QixVQUFVLEVBQUUsQ0FBQztvQkFDYixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixHQUFHLHdCQUF1QixHQUFHLFVBQVUsQ0FBQyxDQUFDO2dCQUN6RSxDQUFDO3FCQUFNLENBQUM7b0JBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRyx3QkFBdUIsR0FBRyx3Q0FBd0MsQ0FBQyxDQUFDO2dCQUN2RyxDQUFDO1lBQ0wsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDO0lBRUYsRUFBRSxDQUFDLGFBQWEsR0FBRyxHQUFVLEVBQUU7UUFDM0IsRUFBRSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVqRCxVQUFVLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBRUQsRUFBRSxDQUFDLFVBQVUsR0FBRyxHQUFVLEVBQUU7UUFDeEIsSUFBSSxXQUFXLEdBQVksS0FBSyxDQUFDO1FBRWpDLElBQUksRUFBRSxDQUFDLEdBQUcsS0FBSyxTQUFTLEVBQUUsQ0FBQztZQUN2QixXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxJQUFJLFdBQVc7WUFBRSxVQUFVLEVBQUUsQ0FBQztJQUNsQyxDQUFDO0FBQ0wsQ0FBQztBQUVELElBQUksa0JBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvZXhwZXJpbWVudHMvbWVkaXVtL21lZGl1bS13b3JkLWVyb3Npb24tdmFsdWVzLnRzIiwid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvZXhwZXJpbWVudHMvbWVkaXVtL3NrZXRjaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPOiBtYWtlIGEgYmV0dGVyIHdheSBvZiBkb2luZyB0aGlzXHJcbmV4cG9ydCBjb25zdCBtZWRpdW1Xb3JkRXJvc2lvblZhbHVlczogbnVtYmVyW10gPSBbXHJcbiAgICAvLyBcIldl4oCZcmVcIlxyXG4gICAgMCwwLDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwiZGVzdHJveWluZ1wiXHJcbiAgICAwLjQsMC40LDAuNCwwLjQsMC40LDAuNCwwLjQsMC40LDAuNCwwLjQsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJ3b3Jkc1wiXHJcbiAgICAwLDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCLigJRcIlxyXG4gICAgMCxcclxuICAgIDAsXHJcbiAgICAvLyBcInNjb3Jlc1wiXHJcbiAgICAwLjIsMC4yLDAuMiwwLjIsMC4yLDAuMixcclxuICAgIDAsXHJcbiAgICAvLyBcIm9mXCJcclxuICAgIDAsMCxcclxuICAgIDAsXHJcbiAgICAvLyBcInRoZW0sXCJcclxuICAgIDAsMCwwLDAsMCxcclxuICAgIDAsXHJcbiAgICAvLyBcImh1bmRyZWRzXCJcclxuICAgIDAuMiwwLjIsMC4yLDAuMiwwLjIsMC4yLDAuMiwwLjIsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJvZlwiXHJcbiAgICAwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJ0aGVtLFwiXHJcbiAgICAwLDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJldmVyeVwiXHJcbiAgICAwLDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJkYXkuXCJcclxuICAgIDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJXZeKAmXJlXCJcclxuICAgIDAsMCwwLDAsMCxcclxuICAgIDAsXHJcbiAgICAvLyBcImN1dHRpbmdcIlxyXG4gICAgMC42LDAuNiwwLjYsMC42LDAuNiwwLjYsMC42LFxyXG4gICAgLy8gXCJ0aGVcIlxyXG4gICAgMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJsYW5ndWFnZVwiXHJcbiAgICAwLDAuMDUsMC4xMCwwLjE1LDAuMjAsMC4yNSwwLjMwLDAuMzUsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJkb3duXCJcclxuICAgIDAuNDAsMC40NSwwLjUwLDAuNTUsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJ0b1wiXHJcbiAgICAwLjYwLDAuNjUsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJ0aGVcIlxyXG4gICAgMC43MCwwLjc1LDAuODAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJib25lLlwiXHJcbiAgICAwLjg1LDAuOTAsMC45NSwxLDEuNVxyXG5dOyIsImltcG9ydCBwNSBmcm9tICdwNSc7XHJcbmltcG9ydCBvdGYgZnJvbSAnb3BlbnR5cGUuanMnO1xyXG5cclxuaW1wb3J0ICdAc3JjL3N0eWxlcy9za2V0Y2guY3NzJztcclxuXHJcbmltcG9ydCBsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCBmcm9tICdAc3JjL2Fzc2V0cy9mb250cy9MaWJyZV9CYXNrZXJ2aWxsZS9MaWJyZUJhc2tlcnZpbGxlLVJlZ3VsYXIudHRmJztcclxuXHJcbmltcG9ydCAqIGFzIE9URkZvbnRSZW5kZXJlciBmcm9tICdAc3JjL3JlbmRlcmVycy9vdGYvcmVuZGVyLWZvbnQnO1xyXG5pbXBvcnQgKiBhcyBPVEZGb250UmVuZGVyU3RyYXRlZ3kgZnJvbSAnQHNyYy9yZW5kZXJlcnMvb3RmL3JlbmRlci1zdHJhdGVneSc7XHJcbmltcG9ydCAqIGFzIE9URlBhdGhQcmVwcm9jZXNzb3IgZnJvbSAnQHNyYy9yZW5kZXJlcnMvb3RmL3BhdGgtcHJlcHJvY2Vzc29yJztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQge21lZGl1bVdvcmRFcm9zaW9uVmFsdWVzfSBmcm9tIFwiQHNyYy9leHBlcmltZW50cy9tZWRpdW0vbWVkaXVtLXdvcmQtZXJvc2lvbi12YWx1ZXNcIjtcclxuXHJcbmZ1bmN0aW9uIHNrZXRjaChwNTogcDUpOiB2b2lkIHtcclxuXHJcbiAgICBsZXQgbGlicmVCYXNrZXJ2aWxsZVJlZ09URiA6IG90Zi5Gb250O1xyXG5cclxuICAgIGxldCB0ZXh0OiBzdHJpbmcgPSBcIldl4oCZcmUgZGVzdHJveWluZyB3b3JkcyDigJQgc2NvcmVzIG9mIHRoZW0sIFxcblwiICtcclxuICAgICAgICBcImh1bmRyZWRzIG9mIHRoZW0sIGV2ZXJ5IGRheS4gV2XigJlyZSBjdXR0aW5nXFxuXCIgK1xyXG4gICAgICAgIFwidGhlIGxhbmd1YWdlIGRvd24gdG8gdGhlIGJvbmUuXCI7XHJcbiAgICBjb25zdCB0eXBlU2l6ZTogbnVtYmVyID0gNjQ7XHJcbiAgICBsZXQgdGV4dFBhdGhzOiBvdGYuUGF0aFtdO1xyXG4gICAgbGV0IHVucHJvY2Vzc2VkVGV4dFBhdGhzOiBvdGYuUGF0aFtdO1xyXG4gICAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KC9cXHI/XFxuLyk7XHJcblxyXG4gICAgY29uc3QgZnJlYWtUb0NyYXppbmVzc1ZhbHVlOiBudW1iZXIgPSAxLjM2O1xyXG4gICAgY29uc3QgZXJvc2lvblN0cmVuZ3RoVmFsdWU6IG51bWJlciA9IC0zO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlZHJhd0ZvbnQoaW1tZWRpYXRlbHlSZWRyYXc6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgICAgcDUuYmFja2dyb3VuZCgyNTUpO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBjbGVhbiB0aGlzIHVwXHJcbiAgICAgICAgLy8gTWVhc3VyZSB0aGUgd2lkZXN0IGxpbmUgKGF0ICgwLDApKSBmb3IgdGhlIGdpdmVuIHR5cGVTaXplXHJcbiAgICAgICAgY29uc3QgbWF4TGluZVdpZHRoID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgIC4uLmxpbmVzLm1hcChsaW5lID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJiID0gbGlicmVCYXNrZXJ2aWxsZVJlZ09URlxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRQYXRoKGxpbmUsIDAsIDAsIHR5cGVTaXplLCB7IGtlcm5pbmc6IHRydWUgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0Qm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiYi54MiAtIGJiLngxO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChpbW1lZGlhdGVseVJlZHJhdykgeyAvLyB0aGlzIGNvbmRpdGlvbiBpcyBmb3Igd2hlbiB0aGUgdGV4dCBpcyB1cGRhdGVkIChmb3IgZGVidWdnaW5nKVxyXG4gICAgICAgICAgICBsZXQgcGF0aHM6IHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsVGV4dFBhdGg6IG90Zi5QYXRoW11cclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFRleHRQYXRoOiBvdGYuUGF0aFtdXHJcbiAgICAgICAgICAgIH0gPSBPVEZGb250UmVuZGVyZXIuZ2V0VGV4dFBhdGhzKFxyXG4gICAgICAgICAgICAgICAgcDUsXHJcbiAgICAgICAgICAgICAgICBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGLFxyXG4gICAgICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgICAgIHR5cGVTaXplLFxyXG4gICAgICAgICAgICAgICAgT1RGUGF0aFByZXByb2Nlc3Nvci5mcmVha1RvLFxyXG4gICAgICAgICAgICAgICAgeyBjcmF6aW5lc3M6IGZyZWFrVG9DcmF6aW5lc3NWYWx1ZSB9LFxyXG4gICAgICAgICAgICAgICAgeyBhbGlnbjogXCJsZWZ0XCIsIGxpbmVIZWlnaHQ6IDEsIG1hcmdpblg6IChwNS53aW5kb3dXaWR0aCAtIG1heExpbmVXaWR0aCkgLyAyLCBtYXJnaW5ZOiAwIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGV4dFBhdGhzID0gcGF0aHMucHJvY2Vzc2VkVGV4dFBhdGg7XHJcbiAgICAgICAgICAgIHVucHJvY2Vzc2VkVGV4dFBhdGhzID0gcGF0aHMub3JpZ2luYWxUZXh0UGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE9URkZvbnRSZW5kZXJlci5yZW5kZXJGb250KFxyXG4gICAgICAgICAgICBwNSxcclxuICAgICAgICAgICAgdGV4dFBhdGhzLFxyXG4gICAgICAgICAgICBPVEZGb250UmVuZGVyU3RyYXRlZ3kuZXJvZGUsXHJcbiAgICAgICAgICAgIHsgZXJvc2lvblN0cmVuZ3RoOiBtZWRpdW1Xb3JkRXJvc2lvblZhbHVlcy5tYXAoeCA9PiB4ICogZXJvc2lvblN0cmVuZ3RoVmFsdWUpIH0sXHJcbiAgICAgICAgICAgIHVucHJvY2Vzc2VkVGV4dFBhdGhzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwNS5zZXR1cCA9ICgpIDogdm9pZCA9PiB7XHJcbiAgICAgICAgcDUuY3JlYXRlQ2FudmFzKHA1LndpbmRvd1dpZHRoLCBwNS53aW5kb3dIZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBvcGVudHlwZS5qcyBmb250IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgb3RmLmxvYWQobGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGgsIChlcnJvciwgZm9udCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9wZW50eXBlLmpzIHwgXCIgKyBsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCArIFwiIGNvdWxkIG5vdCBiZSBsb2FkZWQ6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmIChmb250ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgIGxpYnJlQmFza2VydmlsbGVSZWdPVEYgPSBmb250O1xyXG4gICAgICAgICAgICAgICAgICAgcmVkcmF3Rm9udCgpO1xyXG4gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGVudHlwZS5qcyB8IFwiICsgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggKyBcIiBsb2FkZWQuXCIpO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGVudHlwZS5qcyB8IFwiICsgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggKyBcIiBjb3VsZCBub3QgYmUgbG9hZGVkOiBpdCB3YXMgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBwNS53aW5kb3dSZXNpemVkID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBwNS5yZXNpemVDYW52YXMocDUud2luZG93V2lkdGgsIHA1LndpbmRvd0hlaWdodCk7XHJcblxyXG4gICAgICAgIHJlZHJhd0ZvbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwNS5rZXlQcmVzc2VkID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQgbmVlZHNVcGRhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHA1LmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcclxuICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5lZWRzVXBkYXRlKSByZWRyYXdGb250KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5ldyBwNShza2V0Y2gpO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=