"use strict";(self.webpackChunkrandomfont=self.webpackChunkrandomfont||[]).push([[284],{169:(s,e,a)=>{var t=a(996),n=a.n(t);const o=a.p+"assets/images/a_0.e0009d76.png",r=a.p+"assets/images/a_1.586540b9.png",g=a.p+"assets/images/a_2.0a02a308.png",i=a.p+"assets/images/a_3.49d42d64.png",p=a.p+"assets/images/a_4.f91e1190.png",d=a.p+"assets/images/m_0.60ad00cb.png",c=a.p+"assets/images/m_1.932385de.png",m=a.p+"assets/images/m_2.494ec28a.png",h=a.p+"assets/images/m_3.40d1d196.png",l=a.p+"assets/images/n_0.394e82cc.png",u=a.p+"assets/images/n_1.14a88ea4.png",f=a.p+"assets/images/n_2.52158759.png",w=a.p+"assets/images/n_3.4711ec31.png",_=a.p+"assets/images/n_4.9bd0dac1.png",b=a.p+"assets/images/n_5.55d33ace.png",k=a.p+"assets/images/n_6.3c9820bc.png",E=a.p+"assets/images/o_0.96bd9cf4.png",M=a.p+"assets/images/o_1.e9a664c3.png",C=a.p+"assets/images/o_2.62c7f836.png",v=a.p+"assets/images/o_3.f118c974.png",x=a.p+"assets/images/o_4.64232944.png",O=a.p+"assets/images/o_5.a0ebdc25.png",y=a.p+"assets/images/o_6.130bf27d.png",R=a.p+"assets/images/r_0.dc2a1c67.png",B=a.p+"assets/images/r_1.362d79a0.png",I=a.p+"assets/images/r_2.6a0b2bf7.png",S=a.p+"assets/images/r_3.7edd5018.png",X=a.p+"assets/images/r_4.6bf3acd9.png",Y=a.p+"assets/images/r_5.50f13322.png",F=a.p+"assets/images/r_6.b5b71a82.png",N=a.p+"assets/images/s_0.7b2d0518.png",P=a.p+"assets/images/s_1.fca9723a.png",W=a.p+"assets/images/s_2.cb1a731c.png",q=a.p+"assets/images/s_3.da068ed2.png",z=a.p+"assets/images/s_4.af8244f2.png",H=a.p+"assets/images/s_5.29e45593.png",L=new Map([["a",[o,r,g,i,p]],["m",[d,c,m,h]],["n",[l,u,f,w,_,b,k]],["o",[E,M,C,v,x,O,y]],["r",[R,B,I,S,X,Y,F]],["s",[N,P,W,q,z,H]]]),T="ransom";let D=0;const G="rgba(0, 0, 0, 0.34)",K=.5,U=[],j=new Map;let A,J,Q={x:0,y:0},V=0;new(n())(function(s){function e(e=!0){if(D>=6)return D+=1,null;console.log(T[D]);const a=function(e,a=!0){const t=j.get(e);if(!t)return;const n=Math.floor(s.random()*t.length),o=t[n];return a&&t.splice(n,1),o}(T[D],e);return D+=1,a}s.preload=()=>{s.angleMode(s.DEGREES);const a=function(s){const e=function(s){return new URLSearchParams(window.location.search).get(s)}(s);if(null===e)return null;const a=Number(e);return Number.isFinite(a)?a:null}("random-seed");null!==a&&(s.randomSeed(a),console.log("sketch.ts | the current random seed (via query param) is: "+a)),L.forEach((e,a)=>{j.set(a,[]),e.forEach(e=>{j.get(a)?.push(s.loadImage(e))})});const t=e();void 0!==t?null!==t?(A=t,V=s.random(-30,30)):console.error("sketch.ts | Fatal Error: the first request for getNextRandomLetterImage() has reachedthe end of wordToSpell"):console.error('sketch.ts | Fatal Error: at letter "'+T[0]+'" there was no associated image paths in letterImageMap (.get returned undefined).')},s.setup=()=>{s.createCanvas(s.windowWidth,s.windowHeight),J=s.drawingContext,s.cursor("grab")},s.draw=()=>{s.clear();const e=D>=7;if(console.log(D+" >= 6"),console.log(e),e||function(){const e=Math.min(s.width/20,s.height/20);s.push(),s.stroke(100,Math.round(38.25)),s.strokeWeight(.6);const a=Math.ceil(s.width/2/e);for(let t=-a;t<a;t++)s.line(s.width/2+t*e,0,s.width/2+t*e,s.height);const t=Math.ceil(s.height/2/e);for(let a=-t;a<t;a++)s.line(0,s.height/2+a*e,s.width,s.height/2+a*e);s.pop()}(),U.forEach(({sticker:e,coordinates:a,rotation:t})=>{const n=e.width*K,o=e.height*K;s.push(),s.translate(a.x+n/2,a.y+o/2),s.rotate(t),J.save(),J.shadowColor=G,J.shadowBlur=3,J.shadowOffsetX=0,J.shadowOffsetY=0,s.image(e,-n/2,-o/2,n,o),J.restore(),s.pop()}),e)return;const a=s.mouseIsPressed&&"left"===s.mouseButton;J.save(),a?(J.shadowColor=G,J.shadowBlur=3,J.shadowOffsetX=0,J.shadowOffsetY=0):(J.shadowColor="rgba(0, 0, 0, 0.2)",J.shadowBlur=12,J.shadowOffsetX=-3,J.shadowOffsetY=3);const t=a?Q.x:s.mouseX,n=a?Q.y:s.mouseY,o=A.width*(a?1:1.03)*K,r=A.height*(a?1:1.03)*K;s.push(),s.translate(t,n),s.rotate(V),s.image(A,-o/2,-r/2,o,r),s.pop(),J.restore()},s.windowResized=()=>{s.resizeCanvas(s.windowWidth,s.windowHeight)},s.mousePressed=()=>{"left"===s.mouseButton&&(Q.x=s.mouseX,Q.y=s.mouseY)},s.mouseReleased=()=>{if("left"!==s.mouseButton||D>=7)return;U.push({sticker:A,coordinates:{x:Q.x-A.width*K/2,y:Q.y-A.height*K/2},rotation:V});const a=e();void 0!==a?(null===a?(console.log("NO MORE STICKERS!!"),s.cursor("not-allowed")):(A=a,console.log(j)),V=s.random(-30,30),console.log(V)):console.error('sketch.ts | Fatal Error: at letter "'+T[0]+'" there was no associated image paths in letterImageMap (.get returned undefined).')}})}},s=>{s(s.s=169)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21hbGwuM2U3YzAzODMuanMiLCJtYXBwaW5ncyI6IjgvQ0EwQ2FBLEVBQTBDLElBQUlDLElBQUksQ0FDM0QsQ0FBQyxJQUFLLENBQUMsRUFBSyxFQUFLLEVBQUssRUFBSyxJQUMzQixDQUFDLElBQUssQ0FBQyxFQUFLLEVBQUssRUFBSyxJQUN0QixDQUFDLElBQUssQ0FBQyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxJQUNyQyxDQUFDLElBQUssQ0FBQyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxJQUNyQyxDQUFDLElBQUssQ0FBQyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxJQUNyQyxDQUFDLElBQUssQ0FBQyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssTUN6QzlCQyxFQUFzQixTQUM1QixJQUFJQyxFQUFrQyxFQUl0QyxNQUtNQyxFQUFvQyxzQkFTcENDLEVBQThCLEdBRzlCQyxFQUFnRixHQUNoRkMsRUFBMEMsSUFBSU4sSUFFcEQsSUFJSU8sRUFDQUMsRUFMQUMsRUFBaUMsQ0FBRUMsRUFBRyxFQUFHQyxFQUFHLEdBRTVDQyxFQUFpQyxFQTJOckMsSUFBSSxJQUFKLENBdE5BLFNBQWdCQyxHQWtLWixTQUFTQyxFQUF5QkMsR0FBOEIsR0FFNUQsR0FBSWIsR0FBMkJELEVBRTNCLE9BREFDLEdBQTJCLEVBQ3BCLEtBR1hjLFFBQVFDLElBQUloQixFQUFZQyxJQUN4QixNQUFNZ0IsRUFPVixTQUE4QkMsRUFBZ0JKLEdBQThCLEdBQ3hFLE1BQU1LLEVBQTJDZCxFQUFlZSxJQUFJRixHQUVwRSxJQUFLQyxFQUFrQixPQUV2QixNQUFNRSxFQUEyQkMsS0FBS0MsTUFBTVgsRUFBR1ksU0FBV0wsRUFBaUJNLFFBQ3JFQyxFQUF3QlAsRUFBaUJFLEdBTy9DLE9BSklQLEdBQ0FLLEVBQWlCUSxPQUFPTixFQUFrQixHQUd2Q0ssQ0FDWCxDQXBCUUUsQ0FBcUI1QixFQUFZQyxHQUEwQmEsR0FHL0QsT0FEQWIsR0FBMkIsRUFDcEJnQixDQUNYLENBN0tBTCxFQUFHaUIsUUFBVSxLQUVUakIsRUFBR2tCLFVBQVVsQixFQUFHbUIsU0FHaEIsTUFBTUMsRUN6Q1AsU0FBNkJDLEdBQ2hDLE1BQU1DLEVBTkgsU0FBNkJELEdBRWhDLE9BRGUsSUFBSUUsZ0JBQWdCQyxPQUFPQyxTQUFTQyxRQUNyQ2xCLElBQUlhLEVBQ3RCLENBRytCTSxDQUFvQk4sR0FDL0MsR0FBWSxPQUFSQyxFQUFjLE9BQU8sS0FDekIsTUFBTU0sRUFBWUMsT0FBT1AsR0FDekIsT0FBT08sT0FBT0MsU0FBU0YsR0FBS0EsRUFBSSxJQUNwQyxDRG9Db0QsQ0FsQ2hCLGVBbUNDLE9BQXpCUixJQUNBcEIsRUFBRytCLFdBQVdYLEdBQ2RqQixRQUFRQyxJQUFJLDZEQUErRGdCLElBSS9FbEMsRUFBaUI4QyxRQUFRLENBQUNDLEVBQTJCM0IsS0FDakRiLEVBQWV5QyxJQUFJNUIsRUFBUSxJQUMzQjJCLEVBQWdCRCxRQUFTRyxJQUNyQjFDLEVBQWVlLElBQUlGLElBQVM4QixLQUFLcEMsRUFBR3FDLFVBQVVGLFFBSXRELE1BQU1HLEVBQTRDckMsU0FDN0JzQyxJQUFqQkQsRUFJd0IsT0FBakJBLEdBS1g1QyxFQUFxQjRDLEVBQ3JCdkMsRUFBeUJDLEVBQUdZLFFBcENELFFBK0J2QlQsUUFBUXFDLE1BQU0sK0dBSmRyQyxRQUFRcUMsTUFBTSx1Q0FBMENwRCxFQUFZLEdBQXRELHVGQWF0QlksRUFBR3lDLE1BQVEsS0FDUHpDLEVBQUcwQyxhQUFhMUMsRUFBRzJDLFlBQWEzQyxFQUFHNEMsY0FDbkNqRCxFQUFNSyxFQUFHNkMsZUFFVDdDLEVBQUc4QyxPQXBEZ0IsU0F1RHZCOUMsRUFBRytDLEtBQU8sS0FDTi9DLEVBQUdnRCxRQUNILE1BQU1DLEVBQThCNUQsR0FBMkJELEVBZ0MvRCxHQS9CQWUsUUFBUUMsSUFBSWYsV0FDWmMsUUFBUUMsSUFBSTZDLEdBRVBBLEdBZ0pULFdBRUksTUFBTUMsRUFBV3hDLEtBQUt5QyxJQUFJbkQsRUFBR29ELE1BcE5ULEdBb04wQnBELEVBQUdxRCxPQXJOaEMsSUF1TmpCckQsRUFBR29DLE9BQ0hwQyxFQUFHc0QsT0F0TnNCLElBc05ENUMsS0FBSzZDLE1BQU1DLFFBQ25DeEQsRUFBR3lELGFBck5zQixJQXVOekIsTUFBTUMsRUFBbUJoRCxLQUFLaUQsS0FBTTNELEVBQUdvRCxNQUFNLEVBQUdGLEdBQ2hELElBQUssSUFBSXJELEdBQUs2RCxFQUFrQjdELEVBQUk2RCxFQUFrQjdELElBQ2xERyxFQUFHNEQsS0FBSzVELEVBQUdvRCxNQUFNLEVBQUl2RCxFQUFJcUQsRUFBVSxFQUFHbEQsRUFBR29ELE1BQU0sRUFBSXZELEVBQUlxRCxFQUFVbEQsRUFBR3FELFFBR3hFLE1BQU1RLEVBQW1CbkQsS0FBS2lELEtBQU0zRCxFQUFHcUQsT0FBTyxFQUFHSCxHQUNqRCxJQUFLLElBQUlwRCxHQUFLK0QsRUFBa0IvRCxFQUFJK0QsRUFBa0IvRCxJQUNsREUsRUFBRzRELEtBQU0sRUFBRzVELEVBQUdxRCxPQUFPLEVBQUl2RCxFQUFJb0QsRUFBVWxELEVBQUdvRCxNQUFPcEQsRUFBR3FELE9BQU8sRUFBSXZELEVBQUlvRCxHQUV4RWxELEVBQUc4RCxLQUNQLENBaktRQyxHQUlKdkUsRUFBZXdDLFFBQVEsRUFBR2dDLFVBQVNDLGNBQWFDLGVBQzVDLE1BQU1DLEVBQXFCSCxFQUFRWixNQUFRN0QsRUFDckM2RSxFQUFzQkosRUFBUVgsT0FBUzlELEVBQzdDUyxFQUFHb0MsT0FDSHBDLEVBQUdxRSxVQUFVSixFQUFZcEUsRUFBSXNFLEVBQXFCLEVBQUdGLEVBQVluRSxFQUFJc0UsRUFBc0IsR0FDM0ZwRSxFQUFHc0UsT0FBT0osR0FDVnZFLEVBQUk0RSxPQUNKNUUsRUFBSTZFLFlBQWNsRixFQUNsQkssRUFBSThFLFdBbkZ3QixFQW9GNUI5RSxFQUFJK0UsY0FuRjJCLEVBb0YvQi9FLEVBQUlnRixjQW5GMkIsRUFvRi9CM0UsRUFBRzRFLE1BQ0NaLEdBQ0NHLEVBQXFCLEdBQ3JCQyxFQUFzQixFQUN2QkQsRUFDQUMsR0FFSnpFLEVBQUlrRixVQUNKN0UsRUFBRzhELFFBSUhiLEVBQW9CLE9BSXhCLE1BQU02QixFQUEyQjlFLEVBQUcrRSxnQkFBcUMsU0FBbkIvRSxFQUFHZ0YsWUFDekRyRixFQUFJNEUsT0FFQ08sR0FNRG5GLEVBQUk2RSxZQUFjbEYsRUFDbEJLLEVBQUk4RSxXQWhId0IsRUFpSDVCOUUsRUFBSStFLGNBaEgyQixFQWlIL0IvRSxFQUFJZ0YsY0FoSDJCLElBd0cvQmhGLEVBQUk2RSxZQS9Hd0IscUJBZ0g1QjdFLEVBQUk4RSxXQS9Hc0IsR0FnSDFCOUUsRUFBSStFLGVBL0d5QixFQWdIN0IvRSxFQUFJZ0YsY0EvR3lCLEdBdUhqQyxNQUFNTSxFQUFxQkgsRUFBa0JsRixFQUF3QkMsRUFBSUcsRUFBR2tGLE9BQ3RFQyxFQUFxQkwsRUFBa0JsRixFQUF3QkUsRUFBSUUsRUFBR29GLE9BRXRFQyxFQUF1QjNGLEVBQW1CMEQsT0FBVTBCLEVBQTJDLEVBOUd0RSxNQThHMkV2RixFQUNwRytGLEVBQXdCNUYsRUFBbUIyRCxRQUFXeUIsRUFBMkMsRUEvR3hFLE1BK0c2RXZGLEVBRTVHUyxFQUFHb0MsT0FDSHBDLEVBQUdxRSxVQUFVWSxFQUFZRSxHQUN6Qm5GLEVBQUdzRSxPQUFPdkUsR0FDVkMsRUFBRzRFLE1BQ0NsRixHQUNDMkYsRUFBZSxHQUNmQyxFQUFnQixFQUNqQkQsRUFDQUMsR0FDSnRGLEVBQUc4RCxNQUVIbkUsRUFBSWtGLFdBSVI3RSxFQUFHdUYsY0FBZ0IsS0FDZnZGLEVBQUd3RixhQUFheEYsRUFBRzJDLFlBQWEzQyxFQUFHNEMsZUFJdkM1QyxFQUFHeUYsYUFBZSxLQUNTLFNBQW5CekYsRUFBR2dGLGNBSVBwRixFQUF3QkMsRUFBSUcsRUFBR2tGLE9BQy9CdEYsRUFBd0JFLEVBQUlFLEVBQUdvRixTQUluQ3BGLEVBQUcwRixjQUFnQixLQUNmLEdBQXVCLFNBQW5CMUYsRUFBR2dGLGFBQTBCM0YsR0FBMkJELEVBQXlCLE9BSXJGSSxFQUFlNEMsS0FBSyxDQUNoQjRCLFFBQVN0RSxFQUNUdUUsWUFDSSxDQUFDcEUsRUFBR0QsRUFBd0JDLEVBQUtILEVBQW1CMEQsTUFBUTdELEVBQXVCLEVBQy9FTyxFQUFHRixFQUF3QkUsRUFBS0osRUFBbUIyRCxPQUFTOUQsRUFBdUIsR0FDM0YyRSxTQUFVbkUsSUFHZCxNQUFNNEYsRUFBMkMxRixTQUM3QnNDLElBQWhCb0QsR0FJdUIsT0FBaEJBLEdBRVB4RixRQUFRQyxJQUFJLHNCQUNaSixFQUFHOEMsT0FBTyxpQkFFVnBELEVBQXFCaUcsRUFDckJ4RixRQUFRQyxJQUFJWCxJQUVoQk0sRUFBeUJDLEVBQUdZLFFBbEtELE9BbUszQlQsUUFBUUMsSUFBSUwsSUFaUkksUUFBUXFDLE1BQU0sdUNBQTBDcEQsRUFBWSxHQUF0RCxzRkFpRTFCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL2V4cGVyaW1lbnRzL3NtYWxsL21hZ2F6aW5lLWxldHRlci1wYXRocy50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL2V4cGVyaW1lbnRzL3NtYWxsL3NrZXRjaC50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL3V0aWxzL3JlYWQtcXVlcnktcGFyYW1zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhXzAgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvYS9hXzAucG5nJztcclxuaW1wb3J0IGFfMSBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9hL2FfMS5wbmcnO1xyXG5pbXBvcnQgYV8yIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL2EvYV8yLnBuZyc7XHJcbmltcG9ydCBhXzMgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvYS9hXzMucG5nJztcclxuaW1wb3J0IGFfNCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9hL2FfNC5wbmcnO1xyXG5cclxuaW1wb3J0IG1fMCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9tL21fMC5wbmcnO1xyXG5pbXBvcnQgbV8xIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL20vbV8xLnBuZyc7XHJcbmltcG9ydCBtXzIgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvbS9tXzIucG5nJztcclxuaW1wb3J0IG1fMyBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9tL21fMy5wbmcnO1xyXG5cclxuaW1wb3J0IG5fMCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9uL25fMC5wbmcnO1xyXG5pbXBvcnQgbl8xIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL24vbl8xLnBuZyc7XHJcbmltcG9ydCBuXzIgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvbi9uXzIucG5nJztcclxuaW1wb3J0IG5fMyBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9uL25fMy5wbmcnO1xyXG5pbXBvcnQgbl80IGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL24vbl80LnBuZyc7XHJcbmltcG9ydCBuXzUgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvbi9uXzUucG5nJztcclxuaW1wb3J0IG5fNiBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9uL25fNi5wbmcnO1xyXG5cclxuaW1wb3J0IG9fMCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9vL29fMC5wbmcnO1xyXG5pbXBvcnQgb18xIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL28vb18xLnBuZyc7XHJcbmltcG9ydCBvXzIgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvby9vXzIucG5nJztcclxuaW1wb3J0IG9fMyBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9vL29fMy5wbmcnO1xyXG5pbXBvcnQgb180IGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL28vb180LnBuZyc7XHJcbmltcG9ydCBvXzUgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvby9vXzUucG5nJztcclxuaW1wb3J0IG9fNiBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9vL29fNi5wbmcnO1xyXG5cclxuaW1wb3J0IHJfMCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9yL3JfMC5wbmcnO1xyXG5pbXBvcnQgcl8xIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL3Ivcl8xLnBuZyc7XHJcbmltcG9ydCByXzIgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvci9yXzIucG5nJztcclxuaW1wb3J0IHJfMyBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9yL3JfMy5wbmcnO1xyXG5pbXBvcnQgcl80IGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL3Ivcl80LnBuZyc7XHJcbmltcG9ydCByXzUgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvci9yXzUucG5nJztcclxuaW1wb3J0IHJfNiBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9yL3JfNi5wbmcnO1xyXG5cclxuaW1wb3J0IHNfMCBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9zL3NfMC5wbmcnO1xyXG5pbXBvcnQgc18xIGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL3Mvc18xLnBuZyc7XHJcbmltcG9ydCBzXzIgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvcy9zXzIucG5nJztcclxuaW1wb3J0IHNfMyBmcm9tICdAc3JjL2Fzc2V0cy9pbWFnZXMvbWFnYXppbmUtbGV0dGVycy9zL3NfMy5wbmcnO1xyXG5pbXBvcnQgc180IGZyb20gJ0BzcmMvYXNzZXRzL2ltYWdlcy9tYWdhemluZS1sZXR0ZXJzL3Mvc180LnBuZyc7XHJcbmltcG9ydCBzXzUgZnJvbSAnQHNyYy9hc3NldHMvaW1hZ2VzL21hZ2F6aW5lLWxldHRlcnMvcy9zXzUucG5nJztcclxuXHJcbmV4cG9ydCBjb25zdCBsZXR0ZXJJbWFnZVBhdGhzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKFtcclxuICAgIFsnYScsIFthXzAsIGFfMSwgYV8yLCBhXzMsIGFfNF1dLFxyXG4gICAgWydtJywgW21fMCwgbV8xLCBtXzIsIG1fM11dLFxyXG4gICAgWyduJywgW25fMCwgbl8xLCBuXzIsIG5fMywgbl80LCBuXzUsIG5fNl1dLFxyXG4gICAgWydvJywgW29fMCwgb18xLCBvXzIsIG9fMywgb180LCBvXzUsIG9fNl1dLFxyXG4gICAgWydyJywgW3JfMCwgcl8xLCByXzIsIHJfMywgcl80LCByXzUsIHJfNl1dLFxyXG4gICAgWydzJywgW3NfMCwgc18xLCBzXzIsIHNfMywgc180LCBzXzVdXSxcclxuXSk7XHJcbiIsImltcG9ydCBwNSBmcm9tICdwNSc7XHJcblxyXG5pbXBvcnQgJ0BzcmMvc3R5bGVzL3NrZXRjaC5jc3MnO1xyXG5cclxuaW1wb3J0ICogYXMgUmVhZFF1ZXJ5UGFyYW1zIGZyb20gJ0BzcmMvdXRpbHMvcmVhZC1xdWVyeS1wYXJhbXMnO1xyXG5pbXBvcnQgeyBsZXR0ZXJJbWFnZVBhdGhzIH0gZnJvbSAnLi9tYWdhemluZS1sZXR0ZXItcGF0aHMnO1xyXG5cclxuY29uc3Qgd29yZFRvU3BlbGw6IHN0cmluZyA9IFwicmFuc29tXCI7XHJcbmxldCBjdXJyTGV0dGVySW5Xb3JkVG9TcGVsbDogbnVtYmVyID0gMDtcclxuLy8gcmFuc29tXHJcbi8vIGFub255bW91c1xyXG4vLyBtdXJkZXJlclxyXG5jb25zdCByYW5kb21TZWVkUXVlcnlOYW1lOiBzdHJpbmcgPSBcInJhbmRvbS1zZWVkXCI7XHJcbmNvbnN0IGhlbGRTdGlja2VyU2hhZG93Q29sb3VyOiBzdHJpbmcgPSBcInJnYmEoMCwgMCwgMCwgMC4yKVwiO1xyXG5jb25zdCBoZWxkU3RpY2tlclNoYWRvd0JsdXI6IG51bWJlciA9IDEyO1xyXG5jb25zdCBoZWxkU3RpY2tlclNoYWRvd09mZnNldFg6IG51bWJlciA9IC0zO1xyXG5jb25zdCBoZWxkU3RpY2tlclNoYWRvd09mZnNldFk6IG51bWJlciA9IDM7XHJcbmNvbnN0IHBhc3RlZFN0aWNrZXJTaGFkb3dDb2xvdXI6IHN0cmluZyA9IFwicmdiYSgwLCAwLCAwLCAwLjM0KVwiO1xyXG5jb25zdCBwYXN0ZWRTdGlja2VyU2hhZG93Qmx1cjogbnVtYmVyID0gMztcclxuY29uc3QgcGFzdGVkU3RpY2tlclNoYWRvd09mZnNldFg6IG51bWJlciA9IDA7XHJcbmNvbnN0IHBhc3RlZFN0aWNrZXJTaGFkb3dPZmZzZXRZOiBudW1iZXIgPSAwO1xyXG5jb25zdCBncmlkUm93czogbnVtYmVyID0gMjA7XHJcbmNvbnN0IGdyaWRDb2x1bW5zOiBudW1iZXIgPSAyMDtcclxuY29uc3QgZ3JpZFN0cm9rZUNvbG91cjogbnVtYmVyID0gMTAwO1xyXG5jb25zdCBncmlkU3Ryb2tlQWxwaGE6IG51bWJlciA9IDAuMTU7XHJcbmNvbnN0IGdyaWRTdHJva2VXZWlnaHQ6IG51bWJlciA9IDAuNjtcclxuY29uc3QgaW1hZ2VTaXplTXVsdGlwbGllcjogbnVtYmVyID0gMC41O1xyXG5jb25zdCBjdXJzb3JUeXBlOiBzdHJpbmcgPSBcImdyYWJcIjtcclxuY29uc3Qgb25Nb3VzZURvd25TdGlja2VyU2l6ZTogbnVtYmVyID0gMS4wMztcclxuY29uc3QgcGxhY2VkU3RpY2tlcnM6IHsgc3RpY2tlcjogcDUuSW1hZ2UsIGNvb3JkaW5hdGVzOiBQb2ludCwgcm90YXRpb246IG51bWJlciB9W10gPSBbXTtcclxuY29uc3QgbGV0dGVySW1hZ2VNYXA6IE1hcDxzdHJpbmcsIHA1LkltYWdlW10+ID0gbmV3IE1hcDxzdHJpbmcsIHA1LkltYWdlW10+KCk7XHJcbi8vIHRoaXMgc3RvcHMgdGhlIHN0aWNrZXIgZnJvbSBtb3Zpbmcgd2hlbiBtb3VzZSBpcyBkb3duXHJcbmxldCBvbk1vdXNlRG93bk1vdXNlUG9zTG9jazogUG9pbnQgPSB7IHg6IDAsIHk6IDAgfTtcclxuLy8gQHRzLWlnbm9yZVxyXG5sZXQgY3VycmVudFN0aWNrZXJSb3RhdGlvbjogbnVtYmVyID0gMDtcclxuY29uc3QgbWF4U3RpY2tlclJvdGF0aW9uOiBudW1iZXIgPSAzMDtcclxubGV0IGN1cnJlbnRIZWxkU3RpY2tlciA6IHA1LkltYWdlO1xyXG5sZXQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG5mdW5jdGlvbiBza2V0Y2gocDU6IHA1KSA6IHZvaWQge1xyXG5cclxuICAgIHA1LnByZWxvYWQgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIHNldHRpbmcgYW5nbGVtb2RlIHRvIGRlZ3JlZXNcclxuICAgICAgICBwNS5hbmdsZU1vZGUocDUuREVHUkVFUyk7XHJcblxyXG4gICAgICAgIC8vIGdldHRpbmcgdGhlIHJhbmRvbSBzZWVkIGZyb20gdGhlIHVybCAoaWYgaXQgaXMgcHJvdmlkZWQgYXMgYSBxdWVyeSBwYXJhbWV0ZXIpXHJcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbVJhbmRvbVNlZWQ6IG51bWJlciB8IG51bGwgPSBSZWFkUXVlcnlQYXJhbXMuZ2V0UXVlcnlQYXJhbU51bWJlcihyYW5kb21TZWVkUXVlcnlOYW1lKVxyXG4gICAgICAgIGlmIChxdWVyeVBhcmFtUmFuZG9tU2VlZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwNS5yYW5kb21TZWVkKHF1ZXJ5UGFyYW1SYW5kb21TZWVkKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJza2V0Y2gudHMgfCB0aGUgY3VycmVudCByYW5kb20gc2VlZCAodmlhIHF1ZXJ5IHBhcmFtKSBpczogXCIgKyBxdWVyeVBhcmFtUmFuZG9tU2VlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbml0aWFsaXNpbmcgbGV0dGVySW1hZ2VNYXAgdG8gYWxsIGVtcHR5IGZvciBhbGwgc3VwcG9ydGVkIGNoYXJhY3RlcnNcclxuICAgICAgICBsZXR0ZXJJbWFnZVBhdGhzLmZvckVhY2goKGxldHRlckltYWdlUGF0aDogc3RyaW5nW10sIGxldHRlcjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGxldHRlckltYWdlTWFwLnNldChsZXR0ZXIsIFtdKTtcclxuICAgICAgICAgICAgbGV0dGVySW1hZ2VQYXRoLmZvckVhY2goKHBhdGg6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0dGVySW1hZ2VNYXAuZ2V0KGxldHRlcik/LnB1c2gocDUubG9hZEltYWdlKHBhdGgpKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBmaXJzdFN0aWNrZXI6IHA1LkltYWdlIHwgbnVsbCB8IHVuZGVmaW5lZCA9IGdldE5leHRSYW5kb21MZXR0ZXJJbWFnZSgpO1xyXG4gICAgICAgIGlmIChmaXJzdFN0aWNrZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic2tldGNoLnRzIHwgRmF0YWwgRXJyb3I6IGF0IGxldHRlciBcXFwiXCIgKyB3b3JkVG9TcGVsbFswXSArIFwiXFxcIiB0aGVyZSB3YXMgbm8gYXNzb2NpYXRlZCBcIiArXHJcbiAgICAgICAgICAgICAgICBcImltYWdlIHBhdGhzIGluIGxldHRlckltYWdlTWFwICguZ2V0IHJldHVybmVkIHVuZGVmaW5lZCkuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47IC8vIFRPRE8gYmV0dGVyIGVycm9yIGhhbmRsaW5nIGhlcmVcclxuICAgICAgICB9IGVsc2UgaWYgKGZpcnN0U3RpY2tlciA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic2tldGNoLnRzIHwgRmF0YWwgRXJyb3I6IHRoZSBmaXJzdCByZXF1ZXN0IGZvciBnZXROZXh0UmFuZG9tTGV0dGVySW1hZ2UoKSBoYXMgcmVhY2hlZFwiICtcclxuICAgICAgICAgICAgICAgIFwidGhlIGVuZCBvZiB3b3JkVG9TcGVsbFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBUT0RPIGJldHRlciBlcnJvciBoYW5kbGluZyBoZXJlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRIZWxkU3RpY2tlciA9IGZpcnN0U3RpY2tlcjtcclxuICAgICAgICBjdXJyZW50U3RpY2tlclJvdGF0aW9uID0gcDUucmFuZG9tKC1tYXhTdGlja2VyUm90YXRpb24sIG1heFN0aWNrZXJSb3RhdGlvbik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHA1LnNldHVwID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBwNS5jcmVhdGVDYW52YXMocDUud2luZG93V2lkdGgsIHA1LndpbmRvd0hlaWdodCk7XHJcbiAgICAgICAgY3R4ID0gcDUuZHJhd2luZ0NvbnRleHQgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgICAgICBwNS5jdXJzb3IoY3Vyc29yVHlwZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHA1LmRyYXcgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIHA1LmNsZWFyKCk7XHJcbiAgICAgICAgY29uc3QgYXJlQWxsTGV0dGVyc0RyYXduOiBib29sZWFuID0gY3VyckxldHRlckluV29yZFRvU3BlbGwgPj0gd29yZFRvU3BlbGwubGVuZ3RoICsgMTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjdXJyTGV0dGVySW5Xb3JkVG9TcGVsbCArIFwiID49IFwiICsgd29yZFRvU3BlbGwubGVuZ3RoKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGFyZUFsbExldHRlcnNEcmF3bilcclxuXHJcbiAgICAgICAgaWYgKCFhcmVBbGxMZXR0ZXJzRHJhd24pIHtcclxuICAgICAgICAgICAgZHJhd0dyaWQoZ3JpZFJvd3MsIGdyaWRDb2x1bW5zLCBncmlkU3Ryb2tlQ29sb3VyLCBncmlkU3Ryb2tlQWxwaGEsIGdyaWRTdHJva2VXZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZHJhdyBwcmV2aW91c2x5IHBsYWNlZCBzdGlja2Vyc1xyXG4gICAgICAgIHBsYWNlZFN0aWNrZXJzLmZvckVhY2goKHsgc3RpY2tlciwgY29vcmRpbmF0ZXMsIHJvdGF0aW9uIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVkU3RpY2tlcldpZHRoID0gc3RpY2tlci53aWR0aCAqIGltYWdlU2l6ZU11bHRpcGxpZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZFN0aWNrZXJIZWlnaHQgPSBzdGlja2VyLmhlaWdodCAqIGltYWdlU2l6ZU11bHRpcGxpZXI7XHJcbiAgICAgICAgICAgIHA1LnB1c2goKTtcclxuICAgICAgICAgICAgcDUudHJhbnNsYXRlKGNvb3JkaW5hdGVzLnggKyBzY2FsZWRTdGlja2VyV2lkdGggLyAyLCBjb29yZGluYXRlcy55ICsgc2NhbGVkU3RpY2tlckhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICBwNS5yb3RhdGUocm90YXRpb24pO1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Q29sb3IgPSBwYXN0ZWRTdGlja2VyU2hhZG93Q29sb3VyO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IHBhc3RlZFN0aWNrZXJTaGFkb3dCbHVyO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WCA9IHBhc3RlZFN0aWNrZXJTaGFkb3dPZmZzZXRYO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WSA9IHBhc3RlZFN0aWNrZXJTaGFkb3dPZmZzZXRZO1xyXG4gICAgICAgICAgICBwNS5pbWFnZShcclxuICAgICAgICAgICAgICAgIHN0aWNrZXIsXHJcbiAgICAgICAgICAgICAgICAtc2NhbGVkU3RpY2tlcldpZHRoIC8gMixcclxuICAgICAgICAgICAgICAgIC1zY2FsZWRTdGlja2VySGVpZ2h0IC8gMixcclxuICAgICAgICAgICAgICAgIHNjYWxlZFN0aWNrZXJXaWR0aCxcclxuICAgICAgICAgICAgICAgIHNjYWxlZFN0aWNrZXJIZWlnaHRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgcDUucG9wKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGRvbid0IGRyYXcgYW55dGhpbmcgdW5kZXIgdGhlIGN1cnNvciBpZiBhbGwgbGV0dGVycyBhcmUgZHJhd25cclxuICAgICAgICBpZiAoYXJlQWxsTGV0dGVyc0RyYXduKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIGRyYXcgdGhlIGN1cnJlbnQgaGVsZCBzdGlja2VyIHVuZGVyIHRoZSBtb3VzZSByb3RhdGVkIGFyb3VuZCBpdHMgY2VudGVyXHJcbiAgICAgICAgLy8gc2hhZG93IG9ubHkgd2hlbiBub3QgcHJlc3NlZFxyXG4gICAgICAgIGNvbnN0IGlzTGVmdE1vdXNlRG93bjogYm9vbGVhbiA9IHA1Lm1vdXNlSXNQcmVzc2VkICYmIHA1Lm1vdXNlQnV0dG9uID09PSBcImxlZnRcIjtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWlzTGVmdE1vdXNlRG93bikge1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Q29sb3IgPSBoZWxkU3RpY2tlclNoYWRvd0NvbG91cjtcclxuICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSBoZWxkU3RpY2tlclNoYWRvd0JsdXI7XHJcbiAgICAgICAgICAgIGN0eC5zaGFkb3dPZmZzZXRYID0gaGVsZFN0aWNrZXJTaGFkb3dPZmZzZXRYO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WSA9IGhlbGRTdGlja2VyU2hhZG93T2Zmc2V0WTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Q29sb3IgPSBwYXN0ZWRTdGlja2VyU2hhZG93Q29sb3VyO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IHBhc3RlZFN0aWNrZXJTaGFkb3dCbHVyO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WCA9IHBhc3RlZFN0aWNrZXJTaGFkb3dPZmZzZXRYO1xyXG4gICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WSA9IHBhc3RlZFN0aWNrZXJTaGFkb3dPZmZzZXRZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlWDogbnVtYmVyID0gaXNMZWZ0TW91c2VEb3duID8gb25Nb3VzZURvd25Nb3VzZVBvc0xvY2sueCA6IHA1Lm1vdXNlWDtcclxuICAgICAgICBjb25zdCB0cmFuc2xhdGVZOiBudW1iZXIgPSBpc0xlZnRNb3VzZURvd24gPyBvbk1vdXNlRG93bk1vdXNlUG9zTG9jay55IDogcDUubW91c2VZO1xyXG5cclxuICAgICAgICBjb25zdCBzdGlja2VyV2lkdGg6IG51bWJlciA9IGN1cnJlbnRIZWxkU3RpY2tlci53aWR0aCAqICghaXNMZWZ0TW91c2VEb3duID8gb25Nb3VzZURvd25TdGlja2VyU2l6ZSA6IDEpICogaW1hZ2VTaXplTXVsdGlwbGllcjtcclxuICAgICAgICBjb25zdCBzdGlja2VySGVpZ2h0OiBudW1iZXIgPSBjdXJyZW50SGVsZFN0aWNrZXIuaGVpZ2h0ICogKCFpc0xlZnRNb3VzZURvd24gPyBvbk1vdXNlRG93blN0aWNrZXJTaXplIDogMSkgKiBpbWFnZVNpemVNdWx0aXBsaWVyO1xyXG5cclxuICAgICAgICBwNS5wdXNoKCk7XHJcbiAgICAgICAgcDUudHJhbnNsYXRlKHRyYW5zbGF0ZVgsIHRyYW5zbGF0ZVkpO1xyXG4gICAgICAgIHA1LnJvdGF0ZShjdXJyZW50U3RpY2tlclJvdGF0aW9uKTtcclxuICAgICAgICBwNS5pbWFnZShcclxuICAgICAgICAgICAgY3VycmVudEhlbGRTdGlja2VyLFxyXG4gICAgICAgICAgICAtc3RpY2tlcldpZHRoIC8gMixcclxuICAgICAgICAgICAgLXN0aWNrZXJIZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICBzdGlja2VyV2lkdGgsXHJcbiAgICAgICAgICAgIHN0aWNrZXJIZWlnaHQpO1xyXG4gICAgICAgIHA1LnBvcCgpO1xyXG5cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwNS53aW5kb3dSZXNpemVkID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBwNS5yZXNpemVDYW52YXMocDUud2luZG93V2lkdGgsIHA1LndpbmRvd0hlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb25Nb3VzZURvd25cclxuICAgIHA1Lm1vdXNlUHJlc3NlZCA9ICgpIDogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHA1Lm1vdXNlQnV0dG9uICE9PSBcImxlZnRcIikgIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gbGVmdCBtb3VzZSBjbGlja3Mgb25seSBwYXN0IHRoaXMgcG9pbnRcclxuICAgICAgICAvLyB0aGlzIHN0b3BzIHRoZSBzdGlja2VyIGZyb20gbW92aW5nIHdoZW4gbW91c2UgaXMgZG93blxyXG4gICAgICAgIG9uTW91c2VEb3duTW91c2VQb3NMb2NrLnggPSBwNS5tb3VzZVg7XHJcbiAgICAgICAgb25Nb3VzZURvd25Nb3VzZVBvc0xvY2sueSA9IHA1Lm1vdXNlWTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvbk1vdXNlVXBcclxuICAgIHA1Lm1vdXNlUmVsZWFzZWQgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmIChwNS5tb3VzZUJ1dHRvbiAhPT0gXCJsZWZ0XCIgfHwgY3VyckxldHRlckluV29yZFRvU3BlbGwgPj0gd29yZFRvU3BlbGwubGVuZ3RoICsgMSkgIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gbGVmdCBtb3VzZSBjbGlja3Mgb25seSBwYXN0IHRoaXMgcG9pbnRcclxuICAgICAgICAvLyB0aGlzIHN1cHBvcnRzIHRoZSBiZWhhdmlvdXIgd2hlcmUgc3RvcHMgdGhlIHN0aWNrZXIgZnJvbSBtb3Zpbmcgd2hlbiBtb3VzZSBpcyBkb3duXHJcbiAgICAgICAgcGxhY2VkU3RpY2tlcnMucHVzaCh7XHJcbiAgICAgICAgICAgIHN0aWNrZXI6IGN1cnJlbnRIZWxkU3RpY2tlcixcclxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6XHJcbiAgICAgICAgICAgICAgICB7eDogb25Nb3VzZURvd25Nb3VzZVBvc0xvY2sueCAtIChjdXJyZW50SGVsZFN0aWNrZXIud2lkdGggKiBpbWFnZVNpemVNdWx0aXBsaWVyKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogb25Nb3VzZURvd25Nb3VzZVBvc0xvY2sueSAtIChjdXJyZW50SGVsZFN0aWNrZXIuaGVpZ2h0ICogaW1hZ2VTaXplTXVsdGlwbGllcikgLyAyfSxcclxuICAgICAgICAgICAgcm90YXRpb246IGN1cnJlbnRTdGlja2VyUm90YXRpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV4dFN0aWNrZXI6IHA1LkltYWdlIHwgbnVsbCB8IHVuZGVmaW5lZCA9IGdldE5leHRSYW5kb21MZXR0ZXJJbWFnZSgpO1xyXG4gICAgICAgIGlmIChuZXh0U3RpY2tlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJza2V0Y2gudHMgfCBGYXRhbCBFcnJvcjogYXQgbGV0dGVyIFxcXCJcIiArIHdvcmRUb1NwZWxsWzBdICsgXCJcXFwiIHRoZXJlIHdhcyBubyBhc3NvY2lhdGVkIFwiICtcclxuICAgICAgICAgICAgICAgIFwiaW1hZ2UgcGF0aHMgaW4gbGV0dGVySW1hZ2VNYXAgKC5nZXQgcmV0dXJuZWQgdW5kZWZpbmVkKS5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gVE9ETyBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgaGVyZVxyXG4gICAgICAgIH0gZWxzZSBpZiAobmV4dFN0aWNrZXIgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy9jdXJyZW50SGVsZFN0aWNrZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5PIE1PUkUgU1RJQ0tFUlMhIVwiKVxyXG4gICAgICAgICAgICBwNS5jdXJzb3IoXCJub3QtYWxsb3dlZFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50SGVsZFN0aWNrZXIgPSBuZXh0U3RpY2tlcjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobGV0dGVySW1hZ2VNYXApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRTdGlja2VyUm90YXRpb24gPSBwNS5yYW5kb20oLW1heFN0aWNrZXJSb3RhdGlvbiwgbWF4U3RpY2tlclJvdGF0aW9uKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50U3RpY2tlclJvdGF0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE5leHRSYW5kb21MZXR0ZXJJbWFnZSh3aXRob3V0UmVwbGFjZW1lbnQ6IGJvb2xlYW4gPSB0cnVlKSA6IHA1LkltYWdlIHwgdW5kZWZpbmVkIHwgbnVsbCB7XHJcbiAgICAgICAgLy8gaWYgd2UncmUgcmVxdWVzdGluZyBsZXR0ZXJzIHRoYXQgZG9uJ3QgZXhpc3QgdGhlbiByZXR1cm4gbnVsbFxyXG4gICAgICAgIGlmIChjdXJyTGV0dGVySW5Xb3JkVG9TcGVsbCA+PSB3b3JkVG9TcGVsbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY3VyckxldHRlckluV29yZFRvU3BlbGwgKz0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh3b3JkVG9TcGVsbFtjdXJyTGV0dGVySW5Xb3JkVG9TcGVsbF0pXHJcbiAgICAgICAgY29uc3QgbmV4dExldHRlckltYWdlOiBwNS5JbWFnZSB8IHVuZGVmaW5lZCA9XHJcbiAgICAgICAgICAgIGdldFJhbmRvbUxldHRlckltYWdlKHdvcmRUb1NwZWxsW2N1cnJMZXR0ZXJJbldvcmRUb1NwZWxsXSwgd2l0aG91dFJlcGxhY2VtZW50KTtcclxuXHJcbiAgICAgICAgY3VyckxldHRlckluV29yZFRvU3BlbGwgKz0gMTtcclxuICAgICAgICByZXR1cm4gbmV4dExldHRlckltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUxldHRlckltYWdlKGxldHRlcjogc3RyaW5nLCB3aXRob3V0UmVwbGFjZW1lbnQ6IGJvb2xlYW4gPSB0cnVlKSA6IHA1LkltYWdlIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBjb25zdCBsZXR0ZXJJbWFnZUFycmF5OiBwNS5JbWFnZVtdIHwgdW5kZWZpbmVkID0gbGV0dGVySW1hZ2VNYXAuZ2V0KGxldHRlcik7XHJcblxyXG4gICAgICAgIGlmICghbGV0dGVySW1hZ2VBcnJheSkgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgY29uc3QgcmFuZG9tQXJyYXlJbmRleDogbnVtYmVyID0gTWF0aC5mbG9vcihwNS5yYW5kb20oKSAqIGxldHRlckltYWdlQXJyYXkubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBsZXR0ZXJJbWFnZTogcDUuSW1hZ2UgPSBsZXR0ZXJJbWFnZUFycmF5W3JhbmRvbUFycmF5SW5kZXhdO1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgMSBlbGVtZW50IGF0IGluZGV4IHJhbmRvbUFycmF5SW5kZXggaWYgd2UgZG9uJ3Qgd2FudCB0byByZXBsYWNlXHJcbiAgICAgICAgaWYgKHdpdGhvdXRSZXBsYWNlbWVudCkge1xyXG4gICAgICAgICAgICBsZXR0ZXJJbWFnZUFycmF5LnNwbGljZShyYW5kb21BcnJheUluZGV4LCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsZXR0ZXJJbWFnZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3R3JpZChyb3dzOiBudW1iZXIsIGNvbHVtbnM6IG51bWJlciwgc3Ryb2tlQ29sb3VyOiBudW1iZXIsIHN0cm9rZUFscGhhOiBudW1iZXIsIHN0cm9rZVdlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gY29tcHV0ZSBzcXVhcmUgY2VsbCBzaXplIHNvIGNlbGxzIHJlbWFpbiBzcXVhcmVcclxuICAgICAgICBjb25zdCBjZWxsU2l6ZSA9IE1hdGgubWluKHA1LndpZHRoIC8gY29sdW1ucywgcDUuaGVpZ2h0IC8gcm93cyk7XHJcblxyXG4gICAgICAgIHA1LnB1c2goKTtcclxuICAgICAgICBwNS5zdHJva2Uoc3Ryb2tlQ29sb3VyLCBNYXRoLnJvdW5kKHN0cm9rZUFscGhhICogMjU1KSk7XHJcbiAgICAgICAgcDUuc3Ryb2tlV2VpZ2h0KHN0cm9rZVdlaWdodCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG51bWJlck9mQ29sc0hhbGYgPSBNYXRoLmNlaWwoKHA1LndpZHRoLzIpL2NlbGxTaXplKTtcclxuICAgICAgICBmb3IgKGxldCB4ID0gLW51bWJlck9mQ29sc0hhbGY7IHggPCBudW1iZXJPZkNvbHNIYWxmOyB4KyspIHtcclxuICAgICAgICAgICAgcDUubGluZShwNS53aWR0aC8yICsgeCAqIGNlbGxTaXplLCAwLCBwNS53aWR0aC8yICsgeCAqIGNlbGxTaXplLCBwNS5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZSb3dzSGFsZiA9IE1hdGguY2VpbCgocDUuaGVpZ2h0LzIpL2NlbGxTaXplKTtcclxuICAgICAgICBmb3IgKGxldCB5ID0gLW51bWJlck9mUm93c0hhbGY7IHkgPCBudW1iZXJPZlJvd3NIYWxmOyB5KyspIHtcclxuICAgICAgICAgICAgcDUubGluZSggMCwgcDUuaGVpZ2h0LzIgKyB5ICogY2VsbFNpemUsIHA1LndpZHRoLCBwNS5oZWlnaHQvMiArIHkgKiBjZWxsU2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHA1LnBvcCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5uZXcgcDUoc2tldGNoKTtcclxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1TdHJpbmcobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgcmV0dXJuIHBhcmFtcy5nZXQobmFtZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtTnVtYmVyKG5hbWU6IHN0cmluZyk6IG51bWJlciB8IG51bGwge1xyXG4gICAgY29uc3QgcmF3OiBzdHJpbmcgfCBudWxsID0gZ2V0UXVlcnlQYXJhbVN0cmluZyhuYW1lKTtcclxuICAgIGlmIChyYXcgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbjogbnVtYmVyID0gTnVtYmVyKHJhdyk7XHJcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG4pID8gbiA6IG51bGw7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJsZXR0ZXJJbWFnZVBhdGhzIiwiTWFwIiwid29yZFRvU3BlbGwiLCJjdXJyTGV0dGVySW5Xb3JkVG9TcGVsbCIsInBhc3RlZFN0aWNrZXJTaGFkb3dDb2xvdXIiLCJpbWFnZVNpemVNdWx0aXBsaWVyIiwicGxhY2VkU3RpY2tlcnMiLCJsZXR0ZXJJbWFnZU1hcCIsImN1cnJlbnRIZWxkU3RpY2tlciIsImN0eCIsIm9uTW91c2VEb3duTW91c2VQb3NMb2NrIiwieCIsInkiLCJjdXJyZW50U3RpY2tlclJvdGF0aW9uIiwicDUiLCJnZXROZXh0UmFuZG9tTGV0dGVySW1hZ2UiLCJ3aXRob3V0UmVwbGFjZW1lbnQiLCJjb25zb2xlIiwibG9nIiwibmV4dExldHRlckltYWdlIiwibGV0dGVyIiwibGV0dGVySW1hZ2VBcnJheSIsImdldCIsInJhbmRvbUFycmF5SW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJsZXR0ZXJJbWFnZSIsInNwbGljZSIsImdldFJhbmRvbUxldHRlckltYWdlIiwicHJlbG9hZCIsImFuZ2xlTW9kZSIsIkRFR1JFRVMiLCJxdWVyeVBhcmFtUmFuZG9tU2VlZCIsIm5hbWUiLCJyYXciLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsImdldFF1ZXJ5UGFyYW1TdHJpbmciLCJuIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJyYW5kb21TZWVkIiwiZm9yRWFjaCIsImxldHRlckltYWdlUGF0aCIsInNldCIsInBhdGgiLCJwdXNoIiwibG9hZEltYWdlIiwiZmlyc3RTdGlja2VyIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJzZXR1cCIsImNyZWF0ZUNhbnZhcyIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0IiwiZHJhd2luZ0NvbnRleHQiLCJjdXJzb3IiLCJkcmF3IiwiY2xlYXIiLCJhcmVBbGxMZXR0ZXJzRHJhd24iLCJjZWxsU2l6ZSIsIm1pbiIsIndpZHRoIiwiaGVpZ2h0Iiwic3Ryb2tlIiwicm91bmQiLCJzdHJva2VBbHBoYSIsInN0cm9rZVdlaWdodCIsIm51bWJlck9mQ29sc0hhbGYiLCJjZWlsIiwibGluZSIsIm51bWJlck9mUm93c0hhbGYiLCJwb3AiLCJkcmF3R3JpZCIsInN0aWNrZXIiLCJjb29yZGluYXRlcyIsInJvdGF0aW9uIiwic2NhbGVkU3RpY2tlcldpZHRoIiwic2NhbGVkU3RpY2tlckhlaWdodCIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsInNhdmUiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93T2Zmc2V0WSIsImltYWdlIiwicmVzdG9yZSIsImlzTGVmdE1vdXNlRG93biIsIm1vdXNlSXNQcmVzc2VkIiwibW91c2VCdXR0b24iLCJ0cmFuc2xhdGVYIiwibW91c2VYIiwidHJhbnNsYXRlWSIsIm1vdXNlWSIsInN0aWNrZXJXaWR0aCIsInN0aWNrZXJIZWlnaHQiLCJ3aW5kb3dSZXNpemVkIiwicmVzaXplQ2FudmFzIiwibW91c2VQcmVzc2VkIiwibW91c2VSZWxlYXNlZCIsIm5leHRTdGlja2VyIl0sInNvdXJjZVJvb3QiOiIifQ==