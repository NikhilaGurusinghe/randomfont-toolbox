(self.webpackChunkrandomfont=self.webpackChunkrandomfont||[]).push([[882],{97:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Bold.ttf"},164:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Italic.ttf"},331:(e,t,o)=>{"use strict";var n=o(996),s=o.n(n),i=o(652),l=o(496),r=o(164),a=o(97);function d(e,t){console.log("Random Unit Modifier is: 5e-25"),console.log("Random Unit: 2"),t[0]={x:t[0].x+e.random(-2,2),y:t[0].y+e.random(-2,2)},e.push(),e.strokeWeight(0),e.fill(12.5),e.beginShape();for(let o=0;o<t.length;o++){let n=t[o];if(o+1>=t.length)break;let s=t[o+1],i=s.x-n.x,l=s.y-n.y;Math.sqrt(i**2+l**2)>20?(e.endShape(e.CLOSE),e.beginShape()):(t[o+1]={x:s.x+e.random(-2,2),y:s.y+e.random(-2,2)},e.vertex(n.x,n.y))}e.endShape(e.CLOSE),e.pop()}var p=o(840),y=o(386);new(s())(function(e){let t,o,n,s,c,x,f,h,u,g,m=["Archaeopteryx","The “Big Five”","End-Ordovician","Late Devonian","End-Permian","End-Triassic","End-Cretaceous"],w=m[Math.round(e.random(0,m.length-1))];function k(n=!0){if(e.background(255),n){let t=p.is(e,o,w,148,y.H,{craziness:u.value()});c=t.processedTextPath,x=t.originalTextPath}!function(e,t,o,n,s,i){const l=o.split("\n").length;e.textFont(t),e.textSize(148);let r=t.textToPoints(o,(e.windowWidth-e.textWidth(o))/2,(e.windowHeight+-l*(e.textAscent()-e.textDescent()))/2,148,{sampleFactor:.13});i(e,r)}(e,t,w,0,0,d)}e.preload=()=>{t=e.loadFont(l),n=e.loadFont(r),s=e.loadFont(a)},e.setup=()=>{window.addEventListener("afterprint",()=>{k(!1),f.value(parseFloat(String(f.value()))+2),h.html(String(f.value()))}),e.createCanvas(e.windowWidth,e.windowHeight),i.Ay.load(l,(e,t)=>{e?console.log("opentype.js | "+l+" could not be loaded: "+e):void 0!==t?(o=t,k(),console.log("opentype.js | "+l+" loaded.")):console.log("opentype.js | "+l+" could not be loaded: it was undefined")}),u=e.createSlider(0,10,3.56,.01),u.position(65,10),u.size(200);let t=e.createP("crazy");t.style("position: absolute"),t.style("font-family: monospace"),t.style("font-weight: bold"),t.style("font-size: 15px"),t.style("left: 10px"),t.style("top: -3px"),g=e.createP(String(u.value())),g.style("position: absolute"),g.style("font-family: monospace"),g.style("font-size: 15px"),g.style("left: 285px"),g.style("top: -3px"),u.changed(()=>{k(),g.html(String(u.value())),console.log(u.value())}),f=e.createSlider(0,10,4.44,.01),f.position(65,50),f.size(200);let n=e.createP("erode");n.style("position: absolute"),n.style("font-family: monospace"),n.style("font-weight: bold"),n.style("font-size: 15px"),n.style("left: 10px"),n.style("top: 37px"),h=e.createP(String(f.value())),h.style("position: absolute"),h.style("font-family: monospace"),h.style("font-size: 15px"),h.style("left: 285px"),h.style("top: 37px"),f.changed(()=>{k(!1),h.html(String(f.value()))})},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight),k(!1)},e.keyPressed=()=>{let t=!1;1===e.key.length?(e.key,w+=e.key,t=!0):"Backspace"===e.key?(w=w.slice(0,w.length-1),t=!0):"Enter"===e.key?w+="\n":"ArrowUp"===e.key&&(t=!0),t&&k()}})},386:(e,t,o)=>{"use strict";function n(e,t,o){let n;null!=o&&"craziness"in o?n=o.craziness:(console.error("path-preprocessor.ts | freakTo received malformed options parameter."),n=3);let s=JSON.parse(JSON.stringify(t));for(let o=0;o<t.length;o++){const i=t[o];let l=[],r={x:0,y:0};for(let s=0;s<i.commands.length;s++){let a=i.commands[s];switch(a.type){case"M":l.push({type:"M",x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"L":let i=[];for(let t=0;t<e.random(0,n-1);t++)i.push(e.random(0,.9));i.sort((e,t)=>e-t);for(let d of i){let i=e.lerp(r.x,a.x,d),p=e.lerp(r.y,a.y,d);t[o].commands.splice(s,0,{type:"L",x:i,y:p}),l.push({type:"L",x:i+e.random(-n/1.5,n/1.5),y:p+e.random(-n/1.5,n/1.5)})}l.push({type:"L",x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)}),s+=i.length;break;case"C":l.push({type:"C",x1:a.x1+e.random(-n,n),y1:a.y1+e.random(-n,n),x2:a.x2+e.random(-n,n),y2:a.y2+e.random(-n,n),x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"Q":l.push({type:"Q",x1:a.x1+e.random(-n,n),y1:a.y1+e.random(-n,n),x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"Z":l.push({type:"Z"})}"Z"!==a.type&&(r.x=a.x,r.y=a.y)}s[o].commands=l}return s}o.d(t,{H:()=>n})},496:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Regular.ttf"},753:()=>{},840:(e,t,o)=>{"use strict";function n(e){let t=0;for(let o of e.commands)"Z"===o.type&&(t+=1);return 0===t?0:t-1}function s(e){let t=0,o=[[]];for(let n=0;n<e.commands.length;n++){let s=e.commands[n];"Z"!==s.type?o[t].push(s):(o[t].push(s),t++,n!==e.commands.length-1&&o.push([]))}return o}function i(e){for(let t of e)if("C"===t.type||"L"===t.type||"Q"===t.type)return{x:t.x,y:t.y};return null}function l(e,t){let o="";for(let n of e)switch(o+=n.type+" ",n.type){case"M":case"L":o+=n.x.toFixed(t)+","+n.y.toFixed(t);break;case"C":o+=n.x1.toFixed(t)+","+n.y1.toFixed(t)+" "+n.x2.toFixed(t)+","+n.y2.toFixed(t)+" "+n.x.toFixed(t)+","+n.y.toFixed(t);break;case"Q":o+=n.x1.toFixed(t)+","+n.y1.toFixed(t)+" "+n.x.toFixed(t)+","+n.y.toFixed(t)}return o}var r;o.d(t,{eV:()=>r,is:()=>p,Q1:()=>y,Yc:()=>d,$Q:()=>a}),function(e){e.FILLED="filled",e.OPEN="open"}(r||(r={}));const a=0,d=255;function p(e,t,o,n,s,i){const l=t.getPath(o,0,0,n,{kerning:!0}).getBoundingBox(),r=l.y2-l.y1,a=l.x2-l.x1;let d=t.getPaths(o,(e.windowWidth-a)/2,(e.windowHeight-r+n)/2,n,{kerning:!0}),p=s(e,d,i);return d.length!==p.length&&console.error("render-font.ts | something has gone wrong in otf\render-font.ts#getTextPaths regarding the lengths of the outputted otf.Path[]"),{originalTextPath:d,processedTextPath:p}}function y(e,t,o,a,d){const p=function(e,t){const o=function(e,t){e%2==0&&(e+=1,console.error("render-font-otf.ts | generateSampleOffsetGrid received an even side length of "+(e-1)+". The actual side length of the grid generated will be odd: "+e));let o=[],n=Math.floor(e/2);for(let e=n;e>=-n;e--)for(let s=-n;s<=n;s++)o.push([s*t,-e*t]);return o}(5,2),a=e.drawingContext;let d=[];for(let p=0;p<t.length;p++){const y=t[p],c=n(y);if(d.push([]),c<=0){d[p].push(r.FILLED);continue}let x=s(y);for(let t of x){let n=i(t);if(null==n){console.error("render-font-otf.ts | samplePoint.x and samplePoint.y was null");break}let s={x:n.x,y:n.y},c=!1;for(let i of o){s.x=n.x+i[0],s.y=n.y+i[1];const o=new Path2D(l(t,3)),x=a.isPointInPath(o,e.pixelDensity()*s.x,e.pixelDensity()*s.y),f=a.isPointInStroke(o,e.pixelDensity()*s.x,e.pixelDensity()*s.y);if(x&&!f){c=!0;let t=new Path2D(y.toPathData(3));const o=a.isPointInPath(t,e.pixelDensity()*s.x,e.pixelDensity()*s.y),n=a.isPointInStroke(t,e.pixelDensity()*s.x,e.pixelDensity()*s.y);o||n?d[p].push(r.FILLED):d[p].push(r.OPEN);break}}c||console.error("render-font-otf.ts | getTextFillStatuses could not find a suitable sample point (at character index "+p+") for calculating text fill status")}}return d}(e,void 0===d?t:d);return void 0!==a&&void 0!==d&&(a.unprocessedTextPaths=d),o(e,t,p,a),t}}},e=>{e.O(0,[652],()=>e(e.s=331)),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHbUssZUFBaUJQLEVBQWtCeEosRUFDdENKLEVBQUdtSyxlQUFpQlAsRUFBa0J0SixHQUsxQyxHQUFJMkosSUFBYUcsRUFBWSxDQUN6QlAsR0FBd0IsRUFFeEIsSUFBSVMsRUFBK0IsSUFBSU4sT0FBT1YsRUFBcUJpQixXQTFEOUMsSUE2RHJCLE1BQU1OLEVBQW9CYixFQUFJYyxjQUMxQkksRUFDQXRLLEVBQUdtSyxlQUFpQlAsRUFBa0J4SixFQUN0Q0osRUFBR21LLGVBQWlCUCxFQUFrQnRKLEdBR3BDOEosRUFBc0JoQixFQUFJaUIsZ0JBQzVCQyxFQUNBdEssRUFBR21LLGVBQWlCUCxFQUFrQnhKLEVBQ3RDSixFQUFHbUssZUFBaUJQLEVBQWtCdEosR0FLdEMySixHQUFZRyxFQUNaekIsRUFBaUJoRCxHQUFnQnBGLEtBQUtxSCxFQUFXNEIsUUFFakRiLEVBQWlCaEQsR0FBZ0JwRixLQUFLcUgsRUFBVzRDLE1BR3JELEtBQ0osQ0FDSixDQUdLWCxHQUVEM0osUUFBUWtFLE1BQU0sdUdBQ2V1QixFQUFpQixxQ0FFdEQsQ0FDSixDQUVBLE9BQU9nRCxDQUNYLENBbElROEIsQ0FBb0J6SyxPQUQwQ3FFLElBQXpCekMsRUFDYkQsRUFBcUNDLEdBV2pFLFlBUDRCeUMsSUFBeEJxRSxRQUE4RHJFLElBQXpCekMsSUFDckM4RyxFQUEwQyxxQkFBSTlHLEdBSWxEbUIsRUFBYS9DLEVBQUkyQixFQUFXZ0gsRUFBa0JELEdBRXZDL0csQ0FDWCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFuZG9tZm9udC8uL3NyYy9yZW5kZXJlcnMvcDUvcmVuZGVyLWZvbnQudHMiLCJ3ZWJwYWNrOi8vcmFuZG9tZm9udC8uL3NyYy9leHBlcmltZW50cy9tZWRpdW0vc2tldGNoLnRzIiwid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvcmVuZGVyZXJzL290Zi9wYXRoLXByZXByb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL3JlbmRlcmVycy9vdGYvdXRpbHMvdHlwZS1jb3VudGVycy50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL3JlbmRlcmVycy9vdGYvdXRpbHMvb3RmLXBhdGgtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vcmFuZG9tZm9udC8uL3NyYy9yZW5kZXJlcnMvb3RmL3JlbmRlci1mb250LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwNSBmcm9tICdwNSc7XHJcblxyXG50eXBlIEZvbnRSZW5kZXJTdHJhdGVneSA9IChwNTogcDUsIHBvaW50czogUG9pbnRbXSkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIocDU6IHA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IHA1LkZvbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgZm9udFNhbXBsZUZhY3RvcjogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvbnRSZW5kZXJlcjogRm9udFJlbmRlclN0cmF0ZWd5KSA6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IG51bWJlck9mTGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpLmxlbmd0aDtcclxuXHJcbiAgICBwNS50ZXh0Rm9udChmb250KTtcclxuICAgIHA1LnRleHRTaXplKGZvbnRTaXplKTtcclxuICAgIGxldCBwb2ludHM6IFBvaW50W10gPSBmb250LnRleHRUb1BvaW50cyhcclxuICAgICAgICB0ZXh0LFxyXG4gICAgICAgIChwNS53aW5kb3dXaWR0aCAtIHA1LnRleHRXaWR0aCh0ZXh0KSkgLyAyLFxyXG4gICAgICAgIChwNS53aW5kb3dIZWlnaHQgKyAtbnVtYmVyT2ZMaW5lcyAqIChwNS50ZXh0QXNjZW50KCkgLSBwNS50ZXh0RGVzY2VudCgpKSkgLyAyLFxyXG4gICAgICAgIGZvbnRTaXplLFxyXG4gICAgICAgIHsgc2FtcGxlRmFjdG9yOiBmb250U2FtcGxlRmFjdG9yIH1cclxuICAgICk7XHJcblxyXG4gICAgZm9udFJlbmRlcmVyKHA1LCBwb2ludHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RyYXRlZ3lSYW5kb21Qb2ludHMocDU6IHA1LCBwb2ludHM6IFBvaW50W10pIDogdm9pZCB7XHJcbiAgICBwNS5zdHJva2VXZWlnaHQoMS43NSk7XHJcblxyXG4gICAgZm9yIChsZXQgcCBvZiBwb2ludHMpIHtcclxuICAgICAgICBwNS5wb2ludChwLnggKyBwNS5yYW5kb20oMCwgMTUpLCBwLnkgKyBwNS5yYW5kb20oMCwgNSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RyYXRlZ3lQb2ludHMocDU6IHA1LCBwb2ludHM6IFBvaW50W10pIDogdm9pZCB7XHJcbiAgICBwNS5zdHJva2VXZWlnaHQoMik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xyXG4gICAgICAgIHA1LnBvaW50KHAueCwgcC55KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0cmF0ZWd5T3V0bGluZWQocDU6IHA1LCBwb2ludHM6UG9pbnRbXSkgOiB2b2lkIHtcclxuICAgIGxldCBtYXhKdW1wRGlzdGFuY2UgPSA3O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHBvaW50MTogUG9pbnQgID0gcG9pbnRzW2ldO1xyXG4gICAgICAgIGlmIChpICsgMSA+PSBwb2ludHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICBsZXQgcG9pbnQyOiBQb2ludCA9IHBvaW50c1tpICsgMV07XHJcblxyXG4gICAgICAgIC8vIFN0b3BwaW5nIFwianVtcCBzdGl0Y2hlc1wiIGludHJhIGFuZCBpbnRlciBsZXR0ZXJzXHJcbiAgICAgICAgbGV0IGR4ID0gcG9pbnQyLnggLSBwb2ludDEueDtcclxuICAgICAgICBsZXQgZHkgPSBwb2ludDIueSAtIHBvaW50MS55O1xyXG4gICAgICAgIGlmIChNYXRoLnNxcnQoZHggKiogMiArIGR5ICoqIDIpID4gbWF4SnVtcERpc3RhbmNlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgcDUubGluZShwb2ludDEueCwgcG9pbnQxLnksIHBvaW50Mi54LCBwb2ludDIueSk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RyYXRlZ3lSYW5kb21PdXRsaW5lZChwNTogcDUsIHBvaW50czpQb2ludFtdKSA6IHZvaWQge1xyXG4gICAgbGV0IG1heEp1bXBEaXN0YW5jZSA9IDc7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgcG9pbnQxOiBQb2ludCAgPSBwb2ludHNbaV07XHJcbiAgICAgICAgaWYgKGkgKyAxID49IHBvaW50cy5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgIGxldCBwb2ludDI6IFBvaW50ID0gcG9pbnRzW2kgKyAxXTtcclxuXHJcbiAgICAgICAgLy8gU3RvcHBpbmcgXCJqdW1wIHN0aXRjaGVzXCIgaW50cmEgYW5kIGludGVyIGxldHRlcnNcclxuICAgICAgICBsZXQgZHggPSBwb2ludDIueCAtIHBvaW50MS54O1xyXG4gICAgICAgIGxldCBkeSA9IHBvaW50Mi55IC0gcG9pbnQxLnk7XHJcbiAgICAgICAgaWYgKE1hdGguc3FydChkeCAqKiAyICsgZHkgKiogMikgPiBtYXhKdW1wRGlzdGFuY2UpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAvLyBnZW5lcmF0ZSByYW5kb20gaW50ZXJtZWRpYXJ5IHBvaW50XHJcbiAgICAgICAgbGV0IHJhbmRvbVVuaXQgPSBwNS5yYW5kb20oMCwgMTAwKTtcclxuICAgICAgICBpZiAocmFuZG9tVW5pdCA+IDQ1KSB7XHJcbiAgICAgICAgICAgIGxldCBwb2ludDNYID0gcG9pbnQxLnggKyBkeCArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdC8xMCwgcmFuZG9tVW5pdC8yMCk7XHJcbiAgICAgICAgICAgIGxldCBwb2ludDNZID0gcG9pbnQxLnkgKyBkeSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdC8xMCwgcmFuZG9tVW5pdC8yMCk7XHJcblxyXG4gICAgICAgICAgICBwNS5saW5lKHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQzWCwgcG9pbnQzWSk7XHJcbiAgICAgICAgICAgIHA1LmxpbmUocG9pbnQzWCwgcG9pbnQzWSwgcG9pbnQyLngsIHBvaW50Mi55KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwNS5saW5lKHBvaW50MS54LCBwb2ludDEueSwgcG9pbnQyLngsIHBvaW50Mi55KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJTdHJhdGVneUZpbGxlZChwNTogcDUsIHBvaW50czogUG9pbnRbXSkgOiB2b2lkIHtcclxuICAgIGxldCBtYXhKdW1wRGlzdGFuY2UgPSAyMDtcclxuXHJcbiAgICBwNS5wdXNoKCk7XHJcbiAgICBwNS5zdHJva2VXZWlnaHQoMCk7XHJcbiAgICBwNS5iZWdpblNoYXBlKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIHRoaXMgd2FzIGNoYW5nZWQgYnkgdGhlIHByZXZpb3VzIGl0ZXJhdGlvblxyXG4gICAgICAgIGxldCBwb2ludDE6IFBvaW50ID0gcG9pbnRzW2ldO1xyXG4gICAgICAgIGlmIChpICsgMSA+PSBwb2ludHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAvLyB0aGlzIHdpbGwgYmUgcmFuZG9taXplZCBvbiB0aGlzIGl0ZXJhdGlvblxyXG4gICAgICAgIGxldCBwb2ludDI6IFBvaW50ID0gcG9pbnRzW2kgKyAxXTtcclxuXHJcbiAgICAgICAgLy8gU3RvcHBpbmcgXCJqdW1wIHN0aXRjaGVzXCIgaW50cmEgYW5kIGludGVyIGxldHRlcnNcclxuICAgICAgICBsZXQgZHggPSBwb2ludDIueCAtIHBvaW50MS54O1xyXG4gICAgICAgIGxldCBkeSA9IHBvaW50Mi55IC0gcG9pbnQxLnk7XHJcbiAgICAgICAgaWYgKE1hdGguc3FydChkeCAqKiAyICsgZHkgKiogMikgPiBtYXhKdW1wRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgcDUuZW5kU2hhcGUocDUuQ0xPU0UpO1xyXG4gICAgICAgICAgICBwNS5iZWdpblNoYXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIERldGVybWluaW5nIHRoZSB3aW5kaW5nIGRpcmVjdGlvbiBvZiB0aGUgcG9pbnRzXHJcbiAgICAgICAgLy8gdGhpcyBpcyBzbyBjb3VudGVycyBzaG93IGFzIGhvbGVzIGluIHRoZSB0eXBlLlxyXG4gICAgICAgIC8vIHRleHRUb1BvaW50cyB3aW5kcyBjb3VudGVycyBhcyBjbG9ja3dpc2Ugd2hpbHN0IG90aGVyIHBhcnRzIG9mIHRoZSB0eXBlIGFyZSB3b3VuZCBhbnRpY2xvY2t3aXNlIDopXHJcbiAgICAgICAgLy8gaSBoYXRlIGhvdyBsaW5lYXIgYWxnZWJyYSBpcyB0aGUgYW5zd2VyIHRvIHRoaXM6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3VydmVfb3JpZW50YXRpb24jT3JpZW50YXRpb25fb2ZfYV9zaW1wbGVfcG9seWdvblxyXG4gICAgICAgIC8vIGlmIChpICsgMiA8IHBvaW50cy5sZW5ndGgpIHsgLy8gd2UgbmVlZCAzIHBvaW50cyB0byBjYWxjdWxhdGUgdGhlIHdpbmRpbmcgZGlyZWN0aW9uXHJcbiAgICAgICAgLy8gICAgIGxldCBwb2ludDM6IFBvaW50ID0gcG9pbnRzW2kgKyAyXTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBsZXQgZGV0ZXJtaW5hbnRPZlBvaW50cyA9ICgocG9pbnQyLnggKiBwb2ludDMueSkgKyAocG9pbnQxLnggKiBwb2ludDIueSkgKyAocG9pbnQxLnkgKiBwb2ludDMueCkpXHJcbiAgICAgICAgLy8gICAgICAgICAtICgocG9pbnQxLnkgKiBwb2ludDIueCkgKyAocG9pbnQyLnkgKiBwb2ludDMueCkgKyAocG9pbnQxLnggKiBwb2ludDMueSkpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIGxldCBjdXJyV2luZGluZ0RpcmVjdGlvbiA9IGRldGVybWluYW50T2ZQb2ludHMgPCAwID9cclxuICAgICAgICAvLyAgICAgICAgIFdpbmRpbmdEaXJlY3Rpb24uQ0xPQ0tXSVNFIDogV2luZGluZ0RpcmVjdGlvbi5BTlRJQ0xPQ0tXSVNFO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIGlmIChjdXJyV2luZGluZ0RpcmVjdGlvbiA9PT0gV2luZGluZ0RpcmVjdGlvbi5DTE9DS1dJU0UpIHtcclxuICAgICAgICAvLyAgICAgICAgIHA1LmZpbGwoMTIuNSk7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICBwNS5maWxsKDI1NSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBpZiAoZGV0ZXJtaW5hbnRPZlBvaW50cyA9PT0gMCkge1xyXG4gICAgICAgIC8vICAgICAgICAgcDUuZmlsbCgyNTUpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgcHJldldpbmRpbmdEaXJlY3Rpb24gPSBkZXRlcm1pbmFudE9mUG9pbnRzIDwgMCA/XHJcbiAgICAgICAgLy8gICAgICAgICBXaW5kaW5nRGlyZWN0aW9uLkNMT0NLV0lTRSA6IFdpbmRpbmdEaXJlY3Rpb24uQU5USUNMT0NLV0lTRTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcImN1cnJlbnREZXQ6IFwiICsgZGV0ZXJtaW5hbnRPZlBvaW50cyArIFwiLCBvcmllbnRlZDogXCIgKyBwcmV2V2luZGluZ0RpcmVjdGlvbik7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBwNS52ZXJ0ZXgocG9pbnQxLngsIHBvaW50MS55KTtcclxuICAgIH1cclxuICAgIHA1LmVuZFNoYXBlKHA1LkNMT1NFKTtcclxuICAgIHA1LnBvcCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RyYXRlZ3lCZW93dWxmKHA1OiBwNSwgcG9pbnRzOiBQb2ludFtdKSA6IHZvaWQge1xyXG4gICAgbGV0IG1heEp1bXBEaXN0YW5jZSA9IDIwO1xyXG4gICAgbGV0IHJhbmRvbVVuaXRNb2RpZmllciA9IDAuMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwNTtcclxuICAgIGNvbnNvbGUubG9nKFwiUmFuZG9tIFVuaXQgTW9kaWZpZXIgaXM6IFwiICsgcmFuZG9tVW5pdE1vZGlmaWVyKTtcclxuICAgIGxldCByYW5kb21Vbml0ID0gMjtcclxuICAgIGNvbnNvbGUubG9nKFwiUmFuZG9tIFVuaXQ6IFwiICsgcmFuZG9tVW5pdCk7XHJcblxyXG4gICAgcG9pbnRzWzBdID0ge1xyXG4gICAgICAgIHg6IHBvaW50c1swXS54ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICB5OiBwb2ludHNbMF0ueSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICB9XHJcblxyXG4gICAgcDUucHVzaCgpO1xyXG4gICAgcDUuc3Ryb2tlV2VpZ2h0KDApO1xyXG4gICAgcDUuZmlsbCgxMi41KTtcclxuICAgIHA1LmJlZ2luU2hhcGUoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gdGhpcyB3YXMgY2hhbmdlZCBieSB0aGUgcHJldmlvdXMgaXRlcmF0aW9uXHJcbiAgICAgICAgbGV0IHBvaW50MTogUG9pbnQgPSBwb2ludHNbaV07XHJcbiAgICAgICAgaWYgKGkgKyAxID49IHBvaW50cy5sZW5ndGgpIGJyZWFrO1xyXG4gICAgICAgIC8vIHRoaXMgd2lsbCBiZSByYW5kb21pemVkIG9uIHRoaXMgaXRlcmF0aW9uXHJcbiAgICAgICAgbGV0IHBvaW50MjogUG9pbnQgPSBwb2ludHNbaSArIDFdO1xyXG5cclxuICAgICAgICAvLyBTdG9wcGluZyBcImp1bXAgc3RpdGNoZXNcIiBpbnRyYSBhbmQgaW50ZXIgbGV0dGVyc1xyXG4gICAgICAgIGxldCBkeCA9IHBvaW50Mi54IC0gcG9pbnQxLng7XHJcbiAgICAgICAgbGV0IGR5ID0gcG9pbnQyLnkgLSBwb2ludDEueTtcclxuICAgICAgICBpZiAoTWF0aC5zcXJ0KGR4ICoqIDIgKyBkeSAqKiAyKSA+IG1heEp1bXBEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICBwNS5lbmRTaGFwZShwNS5DTE9TRSk7XHJcbiAgICAgICAgICAgIHA1LmJlZ2luU2hhcGUoKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gcmFuZG9tVW5pdCA9IHA1LnJhbmRvbShcclxuICAgICAgICAvLyAgICAgLTEwICogcDUubm9pc2UocmFuZG9tVW5pdE1vZGlmaWVyKSxcclxuICAgICAgICAvLyAgICAgMTAgKiBwNS5ub2lzZShyYW5kb21Vbml0TW9kaWZpZXIpXHJcbiAgICAgICAgLy8gKTtcclxuXHJcbiAgICAgICAgcG9pbnRzW2kgKyAxXSA9IHtcclxuICAgICAgICAgICAgeDogcG9pbnQyLnggKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICB5OiBwb2ludDIueSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcDUudmVydGV4KHBvaW50MS54LCBwb2ludDEueSk7XHJcbiAgICB9XHJcbiAgICBwNS5lbmRTaGFwZShwNS5DTE9TRSk7XHJcbiAgICBwNS5wb3AoKTtcclxufVxyXG4iLCJpbXBvcnQgcDUgZnJvbSAncDUnO1xyXG5pbXBvcnQgb3RmIGZyb20gJ29wZW50eXBlLmpzJztcclxuXHJcbmltcG9ydCAnQHNyYy9zdHlsZXMvc2tldGNoLmNzcyc7XHJcblxyXG5pbXBvcnQgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggZnJvbSAnQHNyYy9hc3NldHMvZm9udHMvTGlicmVfQmFza2VydmlsbGUvTGlicmVCYXNrZXJ2aWxsZS1SZWd1bGFyLnR0Zic7XHJcbmltcG9ydCBsaWJyZUJhc2tlcnZpbGxlSXRhbGljUGF0aCBmcm9tICdAc3JjL2Fzc2V0cy9mb250cy9MaWJyZV9CYXNrZXJ2aWxsZS9MaWJyZUJhc2tlcnZpbGxlLUl0YWxpYy50dGYnO1xyXG5pbXBvcnQgbGlicmVCYXNrZXJ2aWxsZUJvbGRQYXRoIGZyb20gJ0BzcmMvYXNzZXRzL2ZvbnRzL0xpYnJlX0Jhc2tlcnZpbGxlL0xpYnJlQmFza2VydmlsbGUtQm9sZC50dGYnO1xyXG5cclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgKiBhcyBQNUZvbnRSZW5kZXJlciBmcm9tICdAc3JjL3JlbmRlcmVycy9wNS9yZW5kZXItZm9udCc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0ICogYXMgT1RGRm9udFJlbmRlcmVyIGZyb20gJ0BzcmMvcmVuZGVyZXJzL290Zi9yZW5kZXItZm9udCc7XHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0ICogYXMgT1RGRm9udFJlbmRlclN0cmF0ZWd5IGZyb20gJ0BzcmMvcmVuZGVyZXJzL290Zi9yZW5kZXItc3RyYXRlZ3knO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCAqIGFzIE9URlBhdGhQcmVwcm9jZXNzb3IgZnJvbSAnQHNyYy9yZW5kZXJlcnMvb3RmL3BhdGgtcHJlcHJvY2Vzc29yJztcclxuXHJcbmZ1bmN0aW9uIHNrZXRjaChwNTogcDUpOiB2b2lkIHtcclxuXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgbGlicmVCYXNrZXJ2aWxsZVJlZ1A1IDogcDUuRm9udDtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGxldCBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGIDogb3RmLkZvbnQ7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgbGlicmVCYXNrZXJ2aWxsZUl0YWxpY1A1IDogcDUuRm9udDtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGxldCBsaWJyZUJhc2tlcnZpbGxlQm9sZFA1IDogcDUuRm9udDtcclxuXHJcbiAgICBsZXQgc2FtcGxlVGV4dHM6IHN0cmluZ1tdID0gW1wiQXJjaGFlb3B0ZXJ5eFwiLCBcIlRoZSDigJxCaWcgRml2ZeKAnVwiLCBcIkVuZC1PcmRvdmljaWFuXCIsIFwiTGF0ZSBEZXZvbmlhblwiLCBcIkVuZC1QZXJtaWFuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiRW5kLVRyaWFzc2ljXCIsIFwiRW5kLUNyZXRhY2VvdXNcIl07XHJcblxyXG4gICAgbGV0IHRleHQ6IHN0cmluZyA9IHNhbXBsZVRleHRzW01hdGgucm91bmQocDUucmFuZG9tKDAsIHNhbXBsZVRleHRzLmxlbmd0aCAtIDEpKV07XHJcbiAgICBsZXQgdHlwZVNpemU6IG51bWJlciA9IDE0ODtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGxldCB0ZXh0UGF0aHM6IG90Zi5QYXRoW107XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgdW5wcm9jZXNzZWRUZXh0UGF0aHM6IG90Zi5QYXRoW107XHJcblxyXG4gICAgbGV0IGVyb3Npb25TdHJlbmd0aFNsaWRlcjogcDUuRWxlbWVudDtcclxuICAgIGxldCBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQ6IHA1LkVsZW1lbnQ7XHJcbiAgICBsZXQgZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyOiBwNS5FbGVtZW50O1xyXG4gICAgbGV0IGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQ6IHA1LkVsZW1lbnQ7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVkcmF3Rm9udChpbW1lZGlhdGVseVJlZHJhdzogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgICBwNS5iYWNrZ3JvdW5kKDI1NSk7XHJcblxyXG4gICAgICAgIGlmIChpbW1lZGlhdGVseVJlZHJhdykgeyAvLyB0aGlzIGNvbmRpdGlvbiBpcyBmb3Igd2hlbiB0aGUgdGV4dCBpcyB1cGRhdGVkIChmb3IgZGVidWdnaW5nKVxyXG4gICAgICAgICAgICBsZXQgcGF0aHM6IHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsVGV4dFBhdGg6IG90Zi5QYXRoW11cclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFRleHRQYXRoOiBvdGYuUGF0aFtdXHJcbiAgICAgICAgICAgIH0gPSBPVEZGb250UmVuZGVyZXIuZ2V0VGV4dFBhdGhzKFxyXG4gICAgICAgICAgICAgICAgcDUsXHJcbiAgICAgICAgICAgICAgICBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGLFxyXG4gICAgICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgICAgIHR5cGVTaXplLFxyXG4gICAgICAgICAgICAgICAgT1RGUGF0aFByZXByb2Nlc3Nvci5mcmVha1RvLFxyXG4gICAgICAgICAgICAgICAgeyBjcmF6aW5lc3M6IGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci52YWx1ZSgpIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGV4dFBhdGhzID0gcGF0aHMucHJvY2Vzc2VkVGV4dFBhdGg7XHJcbiAgICAgICAgICAgIHVucHJvY2Vzc2VkVGV4dFBhdGhzID0gcGF0aHMub3JpZ2luYWxUZXh0UGF0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE9URkZvbnRSZW5kZXJlci5yZW5kZXJGb250KFxyXG4gICAgICAgIC8vICAgICBwNSxcclxuICAgICAgICAvLyAgICAgdGV4dFBhdGhzLFxyXG4gICAgICAgIC8vICAgICBPVEZGb250UmVuZGVyU3RyYXRlZ3kuZXJvZGUsXHJcbiAgICAgICAgLy8gICAgIHsgZXJvc2lvblN0cmVuZ3RoOiAtZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnZhbHVlKCkgfSxcclxuICAgICAgICAvLyAgICAgdW5wcm9jZXNzZWRUZXh0UGF0aHNcclxuICAgICAgICAvLyApO1xyXG5cclxuICAgICAgICBQNUZvbnRSZW5kZXJlci5yZW5kZXIoXHJcbiAgICAgICAgICAgIHA1LFxyXG4gICAgICAgICAgICBsaWJyZUJhc2tlcnZpbGxlUmVnUDUsXHJcbiAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgIHR5cGVTaXplLFxyXG4gICAgICAgICAgICAwLjEzLFxyXG4gICAgICAgICAgICBQNUZvbnRSZW5kZXJlci5yZW5kZXJTdHJhdGVneUJlb3d1bGZcclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcDUgZm9udCBpbml0aWFsaXphdGlvblxyXG4gICAgcDUucHJlbG9hZCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBsaWJyZUJhc2tlcnZpbGxlUmVnUDUgPSBwNS5sb2FkRm9udChsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCk7XHJcbiAgICAgICAgbGlicmVCYXNrZXJ2aWxsZUl0YWxpY1A1ID0gcDUubG9hZEZvbnQobGlicmVCYXNrZXJ2aWxsZUl0YWxpY1BhdGgpO1xyXG4gICAgICAgIGxpYnJlQmFza2VydmlsbGVCb2xkUDUgPSBwNS5sb2FkRm9udChsaWJyZUJhc2tlcnZpbGxlQm9sZFBhdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIHA1LnNldHVwID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYWZ0ZXJwcmludFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlZHJhd0ZvbnQoZmFsc2UpO1xyXG4gICAgICAgICAgICBlcm9zaW9uU3RyZW5ndGhTbGlkZXIudmFsdWUocGFyc2VGbG9hdChTdHJpbmcoZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpKSArIDIpO1xyXG4gICAgICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQuaHRtbChTdHJpbmcoZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcDUuY3JlYXRlQ2FudmFzKHA1LndpbmRvd1dpZHRoLCBwNS53aW5kb3dIZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBvcGVudHlwZS5qcyBmb250IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgb3RmLmxvYWQobGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGgsIChlcnJvciwgZm9udCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9wZW50eXBlLmpzIHwgXCIgKyBsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCArIFwiIGNvdWxkIG5vdCBiZSBsb2FkZWQ6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGlmIChmb250ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgIGxpYnJlQmFza2VydmlsbGVSZWdPVEYgPSBmb250O1xyXG4gICAgICAgICAgICAgICAgICAgcmVkcmF3Rm9udCgpO1xyXG4gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGVudHlwZS5qcyB8IFwiICsgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggKyBcIiBsb2FkZWQuXCIpO1xyXG4gICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGVudHlwZS5qcyB8IFwiICsgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggKyBcIiBjb3VsZCBub3QgYmUgbG9hZGVkOiBpdCB3YXMgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzZXR0aW5nIHVwIHNsaWRlcnMgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlciA9IHA1LmNyZWF0ZVNsaWRlcigwLCAxMCwgMy41NiwgMC4wMSk7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyLnBvc2l0aW9uKDY1LCAxMCk7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyLnNpemUoMjAwKTtcclxuICAgICAgICBsZXQgZnJlYWtUb0NyYXppbmVzc0xhYmVsOiBwNS5FbGVtZW50ID0gcDUuY3JlYXRlUChcImNyYXp5XCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NMYWJlbC5zdHlsZShcInBvc2l0aW9uOiBhYnNvbHV0ZVwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJmb250LWZhbWlseTogbW9ub3NwYWNlXCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NMYWJlbC5zdHlsZShcImZvbnQtd2VpZ2h0OiBib2xkXCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NMYWJlbC5zdHlsZShcImZvbnQtc2l6ZTogMTVweFwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJsZWZ0OiAxMHB4XCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NMYWJlbC5zdHlsZShcInRvcDogLTNweFwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0ID0gcDUuY3JlYXRlUChTdHJpbmcoZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0LnN0eWxlKFwicG9zaXRpb246IGFic29sdXRlXCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQuc3R5bGUoXCJmb250LWZhbWlseTogbW9ub3NwYWNlXCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQuc3R5bGUoXCJmb250LXNpemU6IDE1cHhcIik7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc1ZhbHVlVGV4dC5zdHlsZShcImxlZnQ6IDI4NXB4XCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQuc3R5bGUoXCJ0b3A6IC0zcHhcIik7XHJcbiAgICAgICAgKGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlciBhcyBhbnkpLmNoYW5nZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZWRyYXdGb250KCk7XHJcbiAgICAgICAgICAgIGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQuaHRtbChTdHJpbmcoZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZnJlYWtUb0NyYXppbmVzc1N0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFNsaWRlciA9IHA1LmNyZWF0ZVNsaWRlcigwLCAxMCwgNC40NCwgMC4wMSk7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnBvc2l0aW9uKDY1LCA1MCk7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnNpemUoMjAwKTtcclxuICAgICAgICBsZXQgZXJvc2lvblN0cmVuZ3RoTGFiZWw6IHA1LkVsZW1lbnQgPSBwNS5jcmVhdGVQKFwiZXJvZGVcIik7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoTGFiZWwuc3R5bGUoXCJwb3NpdGlvbjogYWJzb2x1dGVcIik7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoTGFiZWwuc3R5bGUoXCJmb250LWZhbWlseTogbW9ub3NwYWNlXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwiZm9udC13ZWlnaHQ6IGJvbGRcIik7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoTGFiZWwuc3R5bGUoXCJmb250LXNpemU6IDE1cHhcIik7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoTGFiZWwuc3R5bGUoXCJsZWZ0OiAxMHB4XCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwidG9wOiAzN3B4XCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dCA9IHA1LmNyZWF0ZVAoU3RyaW5nKGVyb3Npb25TdHJlbmd0aFNsaWRlci52YWx1ZSgpKSk7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoVmFsdWVUZXh0LnN0eWxlKFwicG9zaXRpb246IGFic29sdXRlXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dC5zdHlsZShcImZvbnQtZmFtaWx5OiBtb25vc3BhY2VcIik7XHJcbiAgICAgICAgZXJvc2lvblN0cmVuZ3RoVmFsdWVUZXh0LnN0eWxlKFwiZm9udC1zaXplOiAxNXB4XCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dC5zdHlsZShcImxlZnQ6IDI4NXB4XCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dC5zdHlsZShcInRvcDogMzdweFwiKTtcclxuICAgICAgICAoZXJvc2lvblN0cmVuZ3RoU2xpZGVyIGFzIGFueSkuY2hhbmdlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlZHJhd0ZvbnQoZmFsc2UpO1xyXG4gICAgICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQuaHRtbChTdHJpbmcoZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnZhbHVlKCkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcDUud2luZG93UmVzaXplZCA9ICgpIDogdm9pZCA9PiB7XHJcbiAgICAgICAgcDUucmVzaXplQ2FudmFzKHA1LndpbmRvd1dpZHRoLCBwNS53aW5kb3dIZWlnaHQpO1xyXG5cclxuICAgICAgICByZWRyYXdGb250KGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwNS5rZXlQcmVzc2VkID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQgbmVlZHNVcGRhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKHA1LmtleS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChwNS5rZXkpIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBwNS5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocDUua2V5ID09PSBcIkJhY2tzcGFjZVwiKSB7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIHRleHQubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHA1LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgIHRleHQgKz0gXCJcXG5cIjtcclxuICAgICAgICB9IGVsc2UgaWYgKHA1LmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcclxuICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5lZWRzVXBkYXRlKSByZWRyYXdGb250KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm5ldyBwNShza2V0Y2gpO1xyXG4iLCJpbXBvcnQgcDUgZnJvbSBcInA1XCI7XHJcbmltcG9ydCBvdGYgZnJvbSBcIm9wZW50eXBlLmpzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbm9QcmVwcm9jZXNzKF9wNTogcDUsIHRleHRQYXRoczogb3RmLlBhdGhbXSk6IG90Zi5QYXRoW10ge1xyXG4gICAgcmV0dXJuIHRleHRQYXRocztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZyZWFrVG8ocDU6IHA1LCB0ZXh0UGF0aHM6IG90Zi5QYXRoW10sIG9wdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9KTogb3RmLlBhdGhbXSB7XHJcbiAgICBsZXQgcmFuZG9tVW5pdDogbnVtYmVyO1xyXG5cclxuICAgIGlmIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHVuZGVmaW5lZCB8fCAhKFwiY3JhemluZXNzXCIgaW4gb3B0aW9ucykpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwicGF0aC1wcmVwcm9jZXNzb3IudHMgfCBmcmVha1RvIHJlY2VpdmVkIG1hbGZvcm1lZCBvcHRpb25zIHBhcmFtZXRlci5cIik7XHJcbiAgICAgICAgcmFuZG9tVW5pdCA9IDM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJhbmRvbVVuaXQgPSBvcHRpb25zW1wiY3JhemluZXNzXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9jZXNzZWRUZXh0UGF0aHM6IG90Zi5QYXRoW10gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRleHRQYXRocykpO1xyXG5cclxuICAgIGZvciAobGV0IGNoYXJhY3RlckluZGV4ID0gMDsgY2hhcmFjdGVySW5kZXggPCB0ZXh0UGF0aHMubGVuZ3RoOyBjaGFyYWN0ZXJJbmRleCsrKXtcclxuICAgICAgICAvLyBnZXQgb3RmLlBhdGggb2JqZWN0IGZvciBjdXJyZW50IGNoYXJhY3RlclxyXG4gICAgICAgIGNvbnN0IGNoYXJhY3RlclBhdGg6IG90Zi5QYXRoID0gdGV4dFBhdGhzW2NoYXJhY3RlckluZGV4XTtcclxuICAgICAgICAvLyBUaGlzIHdpbGwgYWNjdW11bGF0ZSBhbGwgdGhlIG5ldyByYW5kb21pemVkIHBhdGggY29tbWFuZHMgdGhhdCB3ZSB3YW50XHJcbiAgICAgICAgbGV0IG5ld0NoYXJhY3RlclBhdGhDb21tYW5kczogb3RmLlBhdGhDb21tYW5kW10gPSBbXTtcclxuXHJcbiAgICAgICAgbGV0IHByZXZpb3VzUG9pbnQ6IFBvaW50ID0geyB4OiAwLCB5OiAwIH07XHJcblxyXG4gICAgICAgIC8vIHByb2Nlc3MgYWxsIHBhdGggY29tbWFuZHMgZm9yIHRoaXMgY3VycmVudCBjaGFyYWN0ZXJcclxuICAgICAgICBmb3IgKGxldCBjaGFyUGF0aENvbW1hbmRJbmRleCA9IDA7IGNoYXJQYXRoQ29tbWFuZEluZGV4IDwgY2hhcmFjdGVyUGF0aC5jb21tYW5kcy5sZW5ndGg7IGNoYXJQYXRoQ29tbWFuZEluZGV4Kyspe1xyXG4gICAgICAgICAgICBsZXQgY29tbWFuZCA9IGNoYXJhY3RlclBhdGguY29tbWFuZHNbY2hhclBhdGhDb21tYW5kSW5kZXhdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk1cIjpcclxuICAgICAgICAgICAgICAgICAgICBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiTVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBjb21tYW5kLnggKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBjb21tYW5kLnkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBhcyBvdGYuUGF0aENvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkxcIjpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVycEludGVydmFsczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHA1LnJhbmRvbSgwLCByYW5kb21Vbml0IC0gMSk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXJwSW50ZXJ2YWxzLnB1c2gocDUucmFuZG9tKDAsIDAuOSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXJwSW50ZXJ2YWxzLnNvcnQoKGE6IG51bWJlciwgYjogbnVtYmVyKSA9PiBhIC0gYik7IC8vIHNvcnQgaW4gYXNjZW5kaW5nIG9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGVycEludGVydmFsIG9mIGxlcnBJbnRlcnZhbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxlcnBlZFg6IG51bWJlciA9IHA1LmxlcnAocHJldmlvdXNQb2ludC54LCBjb21tYW5kLngsIGxlcnBJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsZXJwZWRZOiBudW1iZXIgPSBwNS5sZXJwKHByZXZpb3VzUG9pbnQueSwgY29tbWFuZC55LCBsZXJwSW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgbmVlZCB0byB1cGRhdGUgdGhlIG9yaWdpbmFsIHRleHRQYXRocyBhcyB3ZSBhcmUgYWRkaW5nIGNvbW1hbmRzIHRoYXQgbmVlZCB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZSByZWZsZWN0ZWQgaW4gdGhlIG9yaWdpbmFsIHRleHRQYXRocyAoY2F1c2Ugd2UgbWlnaHQgbmVlZCB0byB1c2UgdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRleHRQYXRocyBvdXRzaWRlIG9mIGhlcmUpIC0tIHRoaXMgd29ya3MgZmluZSBjYXVzZSBhcnJheXMgYXJlIHBhc3NlZCBieSByZWZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFBhdGhzW2NoYXJhY3RlckluZGV4XS5jb21tYW5kcy5zcGxpY2UoY2hhclBhdGhDb21tYW5kSW5kZXgsIDAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiTFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbGVycGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGxlcnBlZFlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBhcyBvdGYuUGF0aENvbW1hbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2hhcmFjdGVyUGF0aENvbW1hbmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJMXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBsZXJwZWRYICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LzEuNSwgcmFuZG9tVW5pdC8xLjUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbGVycGVkWSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdC8xLjUsIHJhbmRvbVVuaXQvMS41KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGFzIG90Zi5QYXRoQ29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiTFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBjb21tYW5kLnggKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBjb21tYW5kLnkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBhcyBvdGYuUGF0aENvbW1hbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhcyB3ZSBoYXZlIHVwZGF0ZWQgdGhlIHRleHRQYXRocyBieSByZWZlcmVuY2Ugd2UgbmVlZCB0byBhZGp1c3QgdGhlIGNoYXJQYXRoQ29tbWFuZEluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gYmUgYWZ0ZXIgdGhlIG9yaWdpbmFsIFwiTFwiIGNvbW1hbmRcclxuICAgICAgICAgICAgICAgICAgICBjaGFyUGF0aENvbW1hbmRJbmRleCArPSBsZXJwSW50ZXJ2YWxzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NoYXJhY3RlclBhdGhDb21tYW5kcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxOiBjb21tYW5kLngxICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTE6IGNvbW1hbmQueTEgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4MjogY29tbWFuZC54MiArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkyOiBjb21tYW5kLnkyICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogY29tbWFuZC54ICAgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBjb21tYW5kLnkgICArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdClcclxuICAgICAgICAgICAgICAgICAgICB9IGFzIG90Zi5QYXRoQ29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiUVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NoYXJhY3RlclBhdGhDb21tYW5kcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJRXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxOiBjb21tYW5kLngxICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTE6IGNvbW1hbmQueTEgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBjb21tYW5kLnggICArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IGNvbW1hbmQueSAgICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgb3RmLlBhdGhDb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJaXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hhcmFjdGVyUGF0aENvbW1hbmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlpcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgb3RmLlBhdGhDb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQudHlwZSAhPT0gXCJaXCIpIHtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzUG9pbnQueCA9IGNvbW1hbmQueDtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzUG9pbnQueSA9IGNvbW1hbmQueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFmdGVyIHByb2Nlc3NpbmcgcGF0aHMgYW5kIGFkZGluZyBzb21lIHJhbmRvbWl6YXRpb24gbGV0J3MgYXNzaWduIGFsbCB0aGVcclxuICAgICAgICAvLyBuZXcgcGF0aCBjb21tYW5kcyB0byB0aGUgb3JpZ2luYWwgb3RmLlBhdGhbXSBvYmplY3QgcGFyYW1ldGVyXHJcbiAgICAgICAgcHJvY2Vzc2VkVGV4dFBhdGhzW2NoYXJhY3RlckluZGV4XS5jb21tYW5kcyA9IG5ld0NoYXJhY3RlclBhdGhDb21tYW5kcztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcHJvY2Vzc2VkVGV4dFBhdGhzO1xyXG59IiwiaW1wb3J0IG90ZiBmcm9tICdvcGVudHlwZS5qcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY291bnRlckNvdW50ZXIoZm9udDogb3RmLkZvbnQsIGNoYXJhY3Rlcjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGlmIChjaGFyYWN0ZXIubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJ0eXBlLWNvdW50ZXJzLnRzIHwgUGF0aENvdW50ZXJDb3VudGVyIGFjY2VwdGVkIGEgY2hhcmFjdGVyIG9mIHNpemUgXCIgKyBjaGFyYWN0ZXIubGVuZ3RoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGb250IHNpemUgYW5kIHggYW5kIHkgY29vcmRzIHVzZWQgaGVyZSBhcmUgZHVtbWllc1xyXG4gICAgcmV0dXJuIHBhdGhDb3VudGVyQ291bnRlcihmb250LmdldFBhdGgoY2hhcmFjdGVyWzBdLCAwLCAwLCAyMCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGF0aENvdW50ZXJDb3VudGVyKGNoYXJhY3RlclBhdGg6IG90Zi5QYXRoKTogbnVtYmVyIHtcclxuXHJcbiAgICBsZXQgY291bnRlckNvdW50ZXI6IG51bWJlciA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgY29tbWFuZCBvZiBjaGFyYWN0ZXJQYXRoLmNvbW1hbmRzKSB7XHJcbiAgICAgICAgaWYgKGNvbW1hbmQudHlwZSA9PT0gXCJaXCIpIHtcclxuICAgICAgICAgICAgY291bnRlckNvdW50ZXIgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhpcyBhc3N1bWVzIHRoYXQgb3RmLlBhdGggU1ZHIGRyYXdpbmcgY29tbWFuZHMgYXJlIHN0cnVjdHVyZWQgd2l0aCB0aGUgYmFzZSBsZXR0ZXJmb3JtIHNoYXBlXHJcbiAgICAvLyBmb2xsb3dlZCBieSBjb3VudGVyc1xyXG4gICAgcmV0dXJuIGNvdW50ZXJDb3VudGVyID09PSAwID8gMCA6IGNvdW50ZXJDb3VudGVyIC0gMTtcclxufVxyXG5cclxuIiwiaW1wb3J0IG90ZiBmcm9tICdvcGVudHlwZS5qcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFNoYXBlc0Zyb21QYXRoKHBhdGg6IG90Zi5QYXRoKSA6IG90Zi5QYXRoQ29tbWFuZFtdW10ge1xyXG4gICAgbGV0IGN1cnJTaGFwZUNvdW50ZXI6IG51bWJlciA9IDA7XHJcbiAgICBsZXQgY3VyclNoYXBlczogb3RmLlBhdGhDb21tYW5kW11bXSA9IFtbXV07XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGguY29tbWFuZHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGxldCBjb21tYW5kID0gcGF0aC5jb21tYW5kc1tpXTtcclxuXHJcbiAgICAgICAgaWYgKGNvbW1hbmQudHlwZSAhPT0gXCJaXCIpIHsgLy8gaWYgd2UgYXJlbid0IGF0IGEgY2xvc2Ugc2hhcGUgY29tbWFuZFxyXG4gICAgICAgICAgICBjdXJyU2hhcGVzW2N1cnJTaGFwZUNvdW50ZXJdLnB1c2goY29tbWFuZClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgYXQgYSBjbG9zZSBzaGFwZSBjb21tYW5kXHJcbiAgICAgICAgICAgIC8vIHB1c2ggXCJaXCJcclxuICAgICAgICAgICAgY3VyclNoYXBlc1tjdXJyU2hhcGVDb3VudGVyXS5wdXNoKGNvbW1hbmQpXHJcbiAgICAgICAgICAgIC8vIGluY3JlbWVudCB0aGUgY3VyclNoYXBlQ291bnRlclxyXG4gICAgICAgICAgICBjdXJyU2hhcGVDb3VudGVyKys7XHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGFyZW4ndCBhdCB0aGUgbGFzdCBcIlpcIiB0aGVuIGtlZXAgZXhwYW5kaW5nIHRoZSBsaXN0XHJcbiAgICAgICAgICAgIGlmIChpICE9PSBwYXRoLmNvbW1hbmRzLmxlbmd0aCAtIDEpIGN1cnJTaGFwZXMucHVzaChbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjdXJyU2hhcGVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RTdGFydFBvaW50SW5QYXRoKHBhdGhDb21tYW5kczogb3RmLlBhdGhDb21tYW5kW10pIDogKFBvaW50IHwgbnVsbCkge1xyXG4gICAgZm9yIChsZXQgY29tbWFuZCBvZiBwYXRoQ29tbWFuZHMpIHtcclxuICAgICAgICBpZiAoY29tbWFuZC50eXBlID09PSBcIkNcIiB8fCAgLy8gY3ViaWMgYmV6aWVyXHJcbiAgICAgICAgICAgIGNvbW1hbmQudHlwZSA9PT0gXCJMXCIgfHwgIC8vIGxpbmUgdG9cclxuICAgICAgICAgICAgY29tbWFuZC50eXBlID09PSBcIlFcIikgeyAgLy8gcXVhZHJhdGljIGJlemllclxyXG4gICAgICAgICAgICByZXR1cm4geyB4OiBjb21tYW5kLngsIHk6IGNvbW1hbmQueSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhDb21tYW5kc1RvUGF0aERhdGEocGF0aENvbW1hbmRzOiBvdGYuUGF0aENvbW1hbmRbXSwgZGVjaW1hbFBsYWNlczogbnVtYmVyKSA6IHN0cmluZyB7XHJcbiAgICBsZXQgcGF0aERhdGE6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgZm9yIChsZXQgY29tbWFuZCBvZiBwYXRoQ29tbWFuZHMpIHtcclxuICAgICAgICAvLyBcIlpcIiBpcyBhcHBlbmRlZCBhdXRvbWF0aWNhbGx5IGhlcmVcclxuICAgICAgICBwYXRoRGF0YSArPSBjb21tYW5kLnR5cGUgKyBcIiBcIjtcclxuICAgICAgICBzd2l0Y2ggKGNvbW1hbmQudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiTVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiTFwiOlxyXG4gICAgICAgICAgICAgICAgcGF0aERhdGEgKz0gY29tbWFuZC54LnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIixcIiArIGNvbW1hbmQueS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJDXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoRGF0YSArPSBjb21tYW5kLngxLnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIixcIiArIGNvbW1hbmQueTEudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLngyLnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIixcIiArIGNvbW1hbmQueTIudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLngudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiLFwiICsgY29tbWFuZC55LnRvRml4ZWQoZGVjaW1hbFBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlFcIjpcclxuICAgICAgICAgICAgICAgIHBhdGhEYXRhICs9IGNvbW1hbmQueDEudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiLFwiICsgY29tbWFuZC55MS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQueC50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgXCIsXCIgKyBjb21tYW5kLnkudG9GaXhlZChkZWNpbWFsUGxhY2VzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGF0aERhdGE7XHJcbn0iLCJpbXBvcnQgcDUgZnJvbSAncDUnO1xyXG5pbXBvcnQgb3RmIGZyb20gJ29wZW50eXBlLmpzJztcclxuaW1wb3J0IHtwYXRoQ291bnRlckNvdW50ZXJ9IGZyb20gXCIuL3V0aWxzL3R5cGUtY291bnRlcnNcIjtcclxuaW1wb3J0IHtleHRyYWN0U2hhcGVzRnJvbVBhdGgsIGdldEZpcnN0U3RhcnRQb2ludEluUGF0aCwgcGF0aENvbW1hbmRzVG9QYXRoRGF0YX0gZnJvbSBcIi4vdXRpbHMvb3RmLXBhdGgtdXRpbHNcIjtcclxuXHJcbnR5cGUgRm9udFJlbmRlclN0cmF0ZWd5ID0gKHA1OiBwNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFBhdGhzOiBvdGYuUGF0aFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RmlsbFN0YXR1c2VzOiBGaWxsU3RhdHVzW11bXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHZvaWQ7XHJcbnR5cGUgRm9udFByZXByb2Nlc3NvciA9IChwNTogcDUsIHRleHRQYXRoczogb3RmLlBhdGhbXSwgb3B0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IG90Zi5QYXRoW107XHJcblxyXG5leHBvcnQgZW51bSBGaWxsU3RhdHVzIHtcclxuICAgIEZJTExFRCA9IFwiZmlsbGVkXCIsXHJcbiAgICBPUEVOID0gXCJvcGVuXCJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHRleHRGb3JlZ3JvdW5kQ29sb3VyID0gMDtcclxuZXhwb3J0IGNvbnN0IHRleHRCYWNrZ3JvdW5kQ29sb3VyID0gMjU1O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHRQYXRocyhwNTogcDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogb3RmLkZvbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVTaXplOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFByZXByb2Nlc3NvcjogRm9udFByZXByb2Nlc3NvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250UHJlcHJvY2Vzc29yT3B0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH0pOlxyXG4gICAgeyBvcmlnaW5hbFRleHRQYXRoOiBvdGYuUGF0aFtdLCBwcm9jZXNzZWRUZXh0UGF0aDogb3RmLlBhdGhbXSB9IHtcclxuICAgIGNvbnN0IHRleHRQYXRoOiBvdGYuUGF0aCA9IGZvbnQuZ2V0UGF0aCh0ZXh0LCAwLCAwLCB0eXBlU2l6ZSwgeyBrZXJuaW5nOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgdGV4dEJvdW5kaW5nQm94OiBvdGYuQm91bmRpbmdCb3ggPSB0ZXh0UGF0aC5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgY29uc3QgdGV4dEhlaWdodDogbnVtYmVyID0gdGV4dEJvdW5kaW5nQm94LnkyIC0gdGV4dEJvdW5kaW5nQm94LnkxO1xyXG4gICAgY29uc3QgdGV4dFdpZHRoOiBudW1iZXIgPSB0ZXh0Qm91bmRpbmdCb3gueDIgLSB0ZXh0Qm91bmRpbmdCb3gueDE7XHJcblxyXG4gICAgbGV0IHRleHRQYXRoczogb3RmLlBhdGhbXSA9IGZvbnQuZ2V0UGF0aHMoXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICAocDUud2luZG93V2lkdGggLSB0ZXh0V2lkdGgpIC8gMixcclxuICAgICAgICAocDUud2luZG93SGVpZ2h0IC0gdGV4dEhlaWdodCArIHR5cGVTaXplKSAvIDIsXHJcbiAgICAgICAgdHlwZVNpemUsXHJcbiAgICAgICAgeyBrZXJuaW5nOiB0cnVlIH1cclxuICAgICk7XHJcblxyXG4gICAgbGV0IHByb2Nlc3NlZFRleHRQYXRoczogb3RmLlBhdGhbXSA9IGZvbnRQcmVwcm9jZXNzb3IocDUsIHRleHRQYXRocywgZm9udFByZXByb2Nlc3Nvck9wdGlvbnMpO1xyXG5cclxuICAgIGlmICh0ZXh0UGF0aHMubGVuZ3RoICE9PSBwcm9jZXNzZWRUZXh0UGF0aHMubGVuZ3RoKVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJyZW5kZXItZm9udC50cyB8IHNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZyBpbiBvdGZcXHJlbmRlci1mb250LnRzI2dldFRleHRQYXRoc1wiICtcclxuICAgICAgICAgICAgXCIgcmVnYXJkaW5nIHRoZSBsZW5ndGhzIG9mIHRoZSBvdXRwdXR0ZWQgb3RmLlBhdGhbXVwiKTtcclxuXHJcbiAgICByZXR1cm4geyBvcmlnaW5hbFRleHRQYXRoOiB0ZXh0UGF0aHMsIHByb2Nlc3NlZFRleHRQYXRoOiBwcm9jZXNzZWRUZXh0UGF0aHMgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckZvbnQocDU6IHA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGF0aHM6IG90Zi5QYXRoW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRSZW5kZXJlcjogRm9udFJlbmRlclN0cmF0ZWd5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmb250UmVuZGVyZXJPcHRpb25zPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wcm9jZXNzZWRUZXh0UGF0aHM/OiBvdGYuUGF0aFtdKSA6IG90Zi5QYXRoW10ge1xyXG5cclxuICAgIC8vIHNvcnRpbmcgb3V0IHJlbmRlcmluZyBob2xlcyBpbiBmb250c1xyXG4gICAgLy8gdW5wcm9jZXNzZWRUZXh0UGF0aHMgY2FuIGJlIHVzZWQgaGVyZSBpZiB0aGUgcHJvY2Vzc2luZyB5b3UgZG8gb24geW91ciB0ZXh0IGlzIHNvIGV4dHJlbWUgdGhhdCBpdCBkZXN0cm95c1xyXG4gICAgLy8gbXkgdmVyeSBmaWNrbGUgYWxnb3JpdGhtIGZvciBkZXRlcm1pbmluZyB0aGUgbnVtYmVyIGFuZCBvcmRlciBvZiBob2xlcyBpbiBhIGxldHRlcmZvcm0gOilcclxuICAgIGNvbnN0IHRleHRGaWxsU3RhdHVzZXM6IEZpbGxTdGF0dXNbXVtdID0gdW5wcm9jZXNzZWRUZXh0UGF0aHMgPT09IHVuZGVmaW5lZCA/XHJcbiAgICAgICAgZ2V0VGV4dEZpbGxTdGF0dXNlcyhwNSwgdGV4dFBhdGhzKSA6IGdldFRleHRGaWxsU3RhdHVzZXMocDUsIHVucHJvY2Vzc2VkVGV4dFBhdGhzKTtcclxuXHJcbiAgICAvLyB1bnByb2Nlc3NlZFRleHRQYXRocyB0ZW5kIHRvIGJlIHVzZWZ1bCBpbiBGb250UmVuZGVyU3RyYXRlZ3kgYXMgdGhleSBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgZ2VvbWV0cnlcclxuICAgIC8vIGFuZCBjdXJ2ZXMgb2YgdGhlIGZvbnQgYmVmb3JlIHRoZXkgYXJlIHByb2Nlc3NlZCBjcmF6aWx5XHJcbiAgICBpZiAoZm9udFJlbmRlcmVyT3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIHVucHJvY2Vzc2VkVGV4dFBhdGhzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBmb250UmVuZGVyZXJPcHRpb25zW1widW5wcm9jZXNzZWRUZXh0UGF0aHNcIl0gPSB1bnByb2Nlc3NlZFRleHRQYXRocztcclxuICAgIH1cclxuXHJcbiAgICAvLyBhY3R1YWxseSByZW5kZXJpbmcgZm9udFxyXG4gICAgZm9udFJlbmRlcmVyKHA1LCB0ZXh0UGF0aHMsIHRleHRGaWxsU3RhdHVzZXMsIGZvbnRSZW5kZXJlck9wdGlvbnMpO1xyXG5cclxuICAgIHJldHVybiB0ZXh0UGF0aHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2FtcGxlT2Zmc2V0R3JpZChzaWRlTGVuZ3RoOiBudW1iZXIsIHNhbXBsZVVuaXQ6IG51bWJlcik6IFt4OiBudW1iZXIsIHk6IG51bWJlcl1bXSB7XHJcbiAgICBpZiAoc2lkZUxlbmd0aCAlIDIgPT09IDAgKSB7XHJcbiAgICAgICAgc2lkZUxlbmd0aCArPSAxO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgIFwicmVuZGVyLWZvbnQtb3RmLnRzIHwgZ2VuZXJhdGVTYW1wbGVPZmZzZXRHcmlkIHJlY2VpdmVkIGFuIGV2ZW4gc2lkZSBsZW5ndGggb2YgXCIgKyAoc2lkZUxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICsgXCIuIFRoZSBhY3R1YWwgc2lkZSBsZW5ndGggb2YgdGhlIGdyaWQgZ2VuZXJhdGVkIHdpbGwgYmUgb2RkOiBcIiArIHNpZGVMZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzYW1wbGVPZmZzZXRHcmlkOiBbeDogbnVtYmVyLCB5OiBudW1iZXJdW10gPSBbXTtcclxuICAgIGxldCBtYXhTYW1wbGVVbml0U2NhbGU6IG51bWJlciA9IE1hdGguZmxvb3Ioc2lkZUxlbmd0aCAvIDIpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSBtYXhTYW1wbGVVbml0U2NhbGU7IGkgPj0gLW1heFNhbXBsZVVuaXRTY2FsZTsgaS0tKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IC1tYXhTYW1wbGVVbml0U2NhbGU7IGogPD0gbWF4U2FtcGxlVW5pdFNjYWxlOyBqKyspIHtcclxuICAgICAgICAgICAgc2FtcGxlT2Zmc2V0R3JpZC5wdXNoKFtqICogc2FtcGxlVW5pdCwgLWkgKiBzYW1wbGVVbml0XSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNhbXBsZU9mZnNldEdyaWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRleHRGaWxsU3RhdHVzZXMocDU6IHA1LCB0ZXh0UGF0aHM6IG90Zi5QYXRoW10pOiBGaWxsU3RhdHVzW11bXSB7XHJcbiAgICBjb25zdCB0b1BhdGhEYXRhUmVzb2x1dGlvbjogbnVtYmVyID0gMztcclxuICAgIGNvbnN0IHNhbXBsZVVuaXQ6IG51bWJlciA9IDI7XHJcbiAgICBjb25zdCBzYW1wbGVPZmZzZXRLZXJuZWw6IFt4OiBudW1iZXIsIHk6IG51bWJlcl1bXSA9IGdlbmVyYXRlU2FtcGxlT2Zmc2V0R3JpZCg1LCBzYW1wbGVVbml0KTtcclxuICAgIGNvbnN0IGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gcDUuZHJhd2luZ0NvbnRleHQ7XHJcblxyXG4gICAgbGV0IHRleHRGaWxsU3RhdHVzZXM6IEZpbGxTdGF0dXNbXVtdID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgY2hhcmFjdGVySW5kZXggPSAwOyBjaGFyYWN0ZXJJbmRleCA8IHRleHRQYXRocy5sZW5ndGg7IGNoYXJhY3RlckluZGV4Kyspe1xyXG4gICAgICAgIGNvbnN0IGVudGlyZUxldHRlcmZvcm1QYXRoID0gdGV4dFBhdGhzW2NoYXJhY3RlckluZGV4XTtcclxuICAgICAgICBjb25zdCBjb3VudGVyQ291bnQ6IG51bWJlciA9IHBhdGhDb3VudGVyQ291bnRlcihlbnRpcmVMZXR0ZXJmb3JtUGF0aCk7XHJcblxyXG4gICAgICAgIHRleHRGaWxsU3RhdHVzZXMucHVzaChbXSk7XHJcblxyXG4gICAgICAgIGlmIChjb3VudGVyQ291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICB0ZXh0RmlsbFN0YXR1c2VzW2NoYXJhY3RlckluZGV4XS5wdXNoKEZpbGxTdGF0dXMuRklMTEVEKTtcclxuICAgICAgICAgICAgY29udGludWU7IC8vIHdpbGwgaW5jcmVtZW50IGNoYXJhY3RlckluZGV4XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGV0dGVyZm9ybUNvbXBvbmVudFNoYXBlczogb3RmLlBhdGhDb21tYW5kW11bXSA9IGV4dHJhY3RTaGFwZXNGcm9tUGF0aChlbnRpcmVMZXR0ZXJmb3JtUGF0aCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxldHRlcmZvcm1Db21wb25lbnRTaGFwZSBvZiBsZXR0ZXJmb3JtQ29tcG9uZW50U2hhcGVzKSB7XHJcbiAgICAgICAgICAgIGxldCBzYW1wbGVQb2ludDogUG9pbnQgfCBudWxsID0gZ2V0Rmlyc3RTdGFydFBvaW50SW5QYXRoKGxldHRlcmZvcm1Db21wb25lbnRTaGFwZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2FtcGxlUG9pbnQgPT09IG51bGwgfHwgc2FtcGxlUG9pbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInJlbmRlci1mb250LW90Zi50cyB8IHNhbXBsZVBvaW50LnggYW5kIHNhbXBsZVBvaW50Lnkgd2FzIG51bGxcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbm93IHdlIG5lZWQgdG8gc2FtcGxlIGFyb3VuZCB0aGUgKHNhbXBsZVgsIHNhbXBsZVkpIGNvb3JkaW5hdGUgd2UgaGF2ZSBhbmQgdGVzdCBhZ2FpbnN0XHJcbiAgICAgICAgICAgIC8vIGN0eC5pc1BvaW50SW5QYXRoIHdpdGggdGhlIHJlbGV2YW50IGVudGlyZUxldHRlcmZvcm1QYXRoIGFzIHRoZSBwYXRoXHJcbiAgICAgICAgICAgIGxldCBzYW1wbGVQb2ludE9mZnNldDogUG9pbnQgPSB7eDogc2FtcGxlUG9pbnQueCwgeTogc2FtcGxlUG9pbnQueX07XHJcbiAgICAgICAgICAgIGxldCB3YXNGaWxsU3RhdHVzQXNzaWduZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHNhbXBsZU9mZnNldCBvZiBzYW1wbGVPZmZzZXRLZXJuZWwpIHtcclxuICAgICAgICAgICAgICAgIHNhbXBsZVBvaW50T2Zmc2V0LnggPSBzYW1wbGVQb2ludC54ICsgc2FtcGxlT2Zmc2V0WzBdO1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlUG9pbnRPZmZzZXQueSA9IHNhbXBsZVBvaW50LnkgKyBzYW1wbGVPZmZzZXRbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2VhcmNoaW5nIHRvIHNlZSBpZiB3ZSdyZSBpbnNpZGUgdGhlIGN1cnJlbnQgc2hhcGVcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBwNS5waXhlbERlbnNpdHkoKSBwYXJ0IGlzIENSVUNJQUwhXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJQYXRoMkQ6IFBhdGgyRCA9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFBhdGgyRChwYXRoQ29tbWFuZHNUb1BhdGhEYXRhKGxldHRlcmZvcm1Db21wb25lbnRTaGFwZSwgdG9QYXRoRGF0YVJlc29sdXRpb24pKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5QYXRoOiBib29sZWFuID0gY3R4LmlzUG9pbnRJblBhdGgoXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyUGF0aDJELFxyXG4gICAgICAgICAgICAgICAgICAgIHA1LnBpeGVsRGVuc2l0eSgpICogc2FtcGxlUG9pbnRPZmZzZXQueCxcclxuICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5TdHJva2U6IGJvb2xlYW4gPSBjdHguaXNQb2ludEluU3Ryb2tlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclBhdGgyRCxcclxuICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LngsXHJcbiAgICAgICAgICAgICAgICAgICAgcDUucGl4ZWxEZW5zaXR5KCkgKiBzYW1wbGVQb2ludE9mZnNldC55LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzdG9wIHNlYXJjaGluZyBpZiB3ZSd2ZSBmb3VuZCBhIHBvaW50IHdpdGhpbiB0aGUgcGF0aCBhbmQgbm90IG9uIHRoZSBzdHJva2UgYXMgdGhpcyB3b24ndFxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyB1cCBpbiBmdXR1cmUgaXNQb2ludEluUGF0aCBjYWxjdWxhdGlvbnMgd2l0aCB0aGUgZW50aXJlIGxldHRlcmZvcm1cclxuICAgICAgICAgICAgICAgIGlmIChpc0luUGF0aCAmJiAhaXNJblN0cm9rZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhc0ZpbGxTdGF0dXNBc3NpZ25lZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGFyYWN0ZXJTaGFwZVBhdGgyRDogUGF0aDJEID0gbmV3IFBhdGgyRChlbnRpcmVMZXR0ZXJmb3JtUGF0aC50b1BhdGhEYXRhKHRvUGF0aERhdGFSZXNvbHV0aW9uKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gc2FtcGxlIHRoaXMgcG9pbnQgaW4gdGhlIHRleHRQYXRoIHVzaW5nIGN0eC5pc1BvaW50SW5QYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJblBhdGg6IGJvb2xlYW4gPSBjdHguaXNQb2ludEluUGF0aChcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyU2hhcGVQYXRoMkQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHA1LnBpeGVsRGVuc2l0eSgpICogc2FtcGxlUG9pbnRPZmZzZXQueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDUucGl4ZWxEZW5zaXR5KCkgKiBzYW1wbGVQb2ludE9mZnNldC55LFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5TdHJva2U6IGJvb2xlYW4gPSBjdHguaXNQb2ludEluU3Ryb2tlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJTaGFwZVBhdGgyRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDUucGl4ZWxEZW5zaXR5KCkgKiBzYW1wbGVQb2ludE9mZnNldC54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgb25seSBOT1QgaW4gYSBjb3VudGVyL3NvbWV0aGluZyB0aGF0IHNob3VsZG4ndCBiZSBmaWxsZWQgd2hlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzSW5QYXRoID09PSBGQUxTRSAmJiBpc0luU3Ryb2tlID09PSBGQUxTRTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJblBhdGggfHwgaXNJblN0cm9rZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RmlsbFN0YXR1c2VzW2NoYXJhY3RlckluZGV4XS5wdXNoKEZpbGxTdGF0dXMuRklMTEVEKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0RmlsbFN0YXR1c2VzW2NoYXJhY3RlckluZGV4XS5wdXNoKEZpbGxTdGF0dXMuT1BFTik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVE9ETyBuZWVkIHRvIGRvIGVycm9yIGhhbmRsaW5nIGZvciB3aGF0IGhhcHBlbnMgd2hlbiB3ZSBmYWxsIHRocm91Z2ggaGVyZSB3aXRob3V0IGEgc3RhdHVzXHJcbiAgICAgICAgICAgIGlmICghd2FzRmlsbFN0YXR1c0Fzc2lnbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0ZXh0RmlsbFN0YXR1c2VzW2NoYXJhY3RlckluZGV4XS5wdXNoKEZpbGxTdGF0dXMuRklMTEVEKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJyZW5kZXItZm9udC1vdGYudHMgfCBnZXRUZXh0RmlsbFN0YXR1c2VzIGNvdWxkIG5vdCBmaW5kIGEgc3VpdGFibGUgc2FtcGxlIHBvaW50IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIihhdCBjaGFyYWN0ZXIgaW5kZXggXCIgKyBjaGFyYWN0ZXJJbmRleCArIFwiKSBmb3IgY2FsY3VsYXRpbmcgdGV4dCBmaWxsIHN0YXR1c1wiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0ZXh0RmlsbFN0YXR1c2VzO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsicmVuZGVyU3RyYXRlZ3lCZW93dWxmIiwicDUiLCJwb2ludHMiLCJjb25zb2xlIiwibG9nIiwieCIsInJhbmRvbSIsInkiLCJwdXNoIiwic3Ryb2tlV2VpZ2h0IiwiZmlsbCIsImJlZ2luU2hhcGUiLCJpIiwibGVuZ3RoIiwicG9pbnQxIiwicG9pbnQyIiwiZHgiLCJkeSIsIk1hdGgiLCJzcXJ0IiwiZW5kU2hhcGUiLCJDTE9TRSIsInZlcnRleCIsInBvcCIsImxpYnJlQmFza2VydmlsbGVSZWdQNSIsImxpYnJlQmFza2VydmlsbGVSZWdPVEYiLCJsaWJyZUJhc2tlcnZpbGxlSXRhbGljUDUiLCJsaWJyZUJhc2tlcnZpbGxlQm9sZFA1IiwidGV4dFBhdGhzIiwidW5wcm9jZXNzZWRUZXh0UGF0aHMiLCJlcm9zaW9uU3RyZW5ndGhTbGlkZXIiLCJlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQiLCJmcmVha1RvQ3JhemluZXNzU3RyZW5ndGhTbGlkZXIiLCJmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0Iiwic2FtcGxlVGV4dHMiLCJ0ZXh0Iiwicm91bmQiLCJyZWRyYXdGb250IiwiaW1tZWRpYXRlbHlSZWRyYXciLCJiYWNrZ3JvdW5kIiwicGF0aHMiLCJjcmF6aW5lc3MiLCJ2YWx1ZSIsInByb2Nlc3NlZFRleHRQYXRoIiwib3JpZ2luYWxUZXh0UGF0aCIsImZvbnQiLCJmb250U2l6ZSIsImZvbnRTYW1wbGVGYWN0b3IiLCJmb250UmVuZGVyZXIiLCJudW1iZXJPZkxpbmVzIiwic3BsaXQiLCJ0ZXh0Rm9udCIsInRleHRTaXplIiwidGV4dFRvUG9pbnRzIiwid2luZG93V2lkdGgiLCJ0ZXh0V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJ0ZXh0QXNjZW50IiwidGV4dERlc2NlbnQiLCJzYW1wbGVGYWN0b3IiLCJwcmVsb2FkIiwibG9hZEZvbnQiLCJzZXR1cCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJzZUZsb2F0IiwiU3RyaW5nIiwiaHRtbCIsImNyZWF0ZUNhbnZhcyIsImVycm9yIiwidW5kZWZpbmVkIiwiY3JlYXRlU2xpZGVyIiwicG9zaXRpb24iLCJzaXplIiwiZnJlYWtUb0NyYXppbmVzc0xhYmVsIiwiY3JlYXRlUCIsInN0eWxlIiwiY2hhbmdlZCIsImVyb3Npb25TdHJlbmd0aExhYmVsIiwid2luZG93UmVzaXplZCIsInJlc2l6ZUNhbnZhcyIsImtleVByZXNzZWQiLCJuZWVkc1VwZGF0ZSIsImtleSIsInNsaWNlIiwiZnJlYWtUbyIsIm9wdGlvbnMiLCJyYW5kb21Vbml0IiwicHJvY2Vzc2VkVGV4dFBhdGhzIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiY2hhcmFjdGVySW5kZXgiLCJjaGFyYWN0ZXJQYXRoIiwibmV3Q2hhcmFjdGVyUGF0aENvbW1hbmRzIiwicHJldmlvdXNQb2ludCIsImNoYXJQYXRoQ29tbWFuZEluZGV4IiwiY29tbWFuZHMiLCJjb21tYW5kIiwidHlwZSIsImxlcnBJbnRlcnZhbHMiLCJzb3J0IiwiYSIsImIiLCJsZXJwSW50ZXJ2YWwiLCJsZXJwZWRYIiwibGVycCIsImxlcnBlZFkiLCJzcGxpY2UiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInBhdGhDb3VudGVyQ291bnRlciIsImNvdW50ZXJDb3VudGVyIiwiZXh0cmFjdFNoYXBlc0Zyb21QYXRoIiwicGF0aCIsImN1cnJTaGFwZUNvdW50ZXIiLCJjdXJyU2hhcGVzIiwiZ2V0Rmlyc3RTdGFydFBvaW50SW5QYXRoIiwicGF0aENvbW1hbmRzIiwicGF0aENvbW1hbmRzVG9QYXRoRGF0YSIsImRlY2ltYWxQbGFjZXMiLCJwYXRoRGF0YSIsInRvRml4ZWQiLCJGaWxsU3RhdHVzIiwidGV4dEZvcmVncm91bmRDb2xvdXIiLCJ0ZXh0QmFja2dyb3VuZENvbG91ciIsImdldFRleHRQYXRocyIsInR5cGVTaXplIiwiZm9udFByZXByb2Nlc3NvciIsImZvbnRQcmVwcm9jZXNzb3JPcHRpb25zIiwidGV4dEJvdW5kaW5nQm94IiwiZ2V0UGF0aCIsImtlcm5pbmciLCJnZXRCb3VuZGluZ0JveCIsInRleHRIZWlnaHQiLCJnZXRQYXRocyIsInJlbmRlckZvbnQiLCJmb250UmVuZGVyZXJPcHRpb25zIiwidGV4dEZpbGxTdGF0dXNlcyIsInNhbXBsZU9mZnNldEtlcm5lbCIsInNpZGVMZW5ndGgiLCJzYW1wbGVVbml0Iiwic2FtcGxlT2Zmc2V0R3JpZCIsIm1heFNhbXBsZVVuaXRTY2FsZSIsImZsb29yIiwiaiIsImdlbmVyYXRlU2FtcGxlT2Zmc2V0R3JpZCIsImN0eCIsImRyYXdpbmdDb250ZXh0IiwiZW50aXJlTGV0dGVyZm9ybVBhdGgiLCJjb3VudGVyQ291bnQiLCJGSUxMRUQiLCJsZXR0ZXJmb3JtQ29tcG9uZW50U2hhcGVzIiwibGV0dGVyZm9ybUNvbXBvbmVudFNoYXBlIiwic2FtcGxlUG9pbnQiLCJzYW1wbGVQb2ludE9mZnNldCIsIndhc0ZpbGxTdGF0dXNBc3NpZ25lZCIsInNhbXBsZU9mZnNldCIsImNoYXJhY3RlclBhdGgyRCIsIlBhdGgyRCIsImlzSW5QYXRoIiwiaXNQb2ludEluUGF0aCIsInBpeGVsRGVuc2l0eSIsImlzSW5TdHJva2UiLCJpc1BvaW50SW5TdHJva2UiLCJjaGFyYWN0ZXJTaGFwZVBhdGgyRCIsInRvUGF0aERhdGEiLCJPUEVOIiwiZ2V0VGV4dEZpbGxTdGF0dXNlcyJdLCJzb3VyY2VSb290IjoiIn0=