(self.webpackChunkrandomfont=self.webpackChunkrandomfont||[]).push([[882],{97:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Bold.ttf"},164:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Italic.ttf"},331:(e,t,o)=>{"use strict";var n=o(996),s=o.n(n),i=o(652),l=o(496),r=o(164),a=o(97);function d(e,t){console.log("Random Unit Modifier is: 5e-25"),console.log("Random Unit: 2"),t[0]={x:t[0].x+e.random(-2,2),y:t[0].y+e.random(-2,2)},e.push(),e.strokeWeight(0),e.fill(12.5),e.beginShape();for(let o=0;o<t.length;o++){let n=t[o];if(o+1>=t.length)break;let s=t[o+1],i=s.x-n.x,l=s.y-n.y;Math.sqrt(i**2+l**2)>20?(e.endShape(e.CLOSE),e.beginShape()):(t[o+1]={x:s.x+e.random(-2,2),y:s.y+e.random(-2,2)},e.vertex(n.x,n.y))}e.endShape(e.CLOSE),e.pop()}var p=o(493),y=o(386);new(s())(function(e){let t,o,n,s,c,x,f,h,u,g,m=["Archaeopteryx","The “Big Five”","End-Ordovician","Late Devonian","End-Permian","End-Triassic","End-Cretaceous"],w=m[Math.round(e.random(0,m.length-1))];function k(n=!0){if(e.background(255),n){let t=p.is(e,o,w,148,y.H,{craziness:u.value()});c=t.processedTextPath,x=t.originalTextPath}!function(e,t,o,n,s,i){const l=o.split("\n").length;e.textFont(t),e.textSize(148);let r=t.textToPoints(o,(e.windowWidth-e.textWidth(o))/2,(e.windowHeight+-l*(e.textAscent()-e.textDescent()))/2,148,{sampleFactor:.13});i(e,r)}(e,t,w,0,0,d)}e.preload=()=>{t=e.loadFont(l),n=e.loadFont(r),s=e.loadFont(a)},e.setup=()=>{window.addEventListener("afterprint",()=>{k(!1),f.value(parseFloat(String(f.value()))+2),h.html(String(f.value()))}),e.createCanvas(e.windowWidth,e.windowHeight),i.Ay.load(l,(e,t)=>{e?console.log("opentype.js | "+l+" could not be loaded: "+e):void 0!==t?(o=t,k(),console.log("opentype.js | "+l+" loaded.")):console.log("opentype.js | "+l+" could not be loaded: it was undefined")}),u=e.createSlider(0,10,3.56,.01),u.position(65,10),u.size(200);let t=e.createP("crazy");t.style("position: absolute"),t.style("font-family: monospace"),t.style("font-weight: bold"),t.style("font-size: 15px"),t.style("left: 10px"),t.style("top: -3px"),g=e.createP(String(u.value())),g.style("position: absolute"),g.style("font-family: monospace"),g.style("font-size: 15px"),g.style("left: 285px"),g.style("top: -3px"),u.changed(()=>{k(),g.html(String(u.value())),console.log(u.value())}),f=e.createSlider(0,10,4.44,.01),f.position(65,50),f.size(200);let n=e.createP("erode");n.style("position: absolute"),n.style("font-family: monospace"),n.style("font-weight: bold"),n.style("font-size: 15px"),n.style("left: 10px"),n.style("top: 37px"),h=e.createP(String(f.value())),h.style("position: absolute"),h.style("font-family: monospace"),h.style("font-size: 15px"),h.style("left: 285px"),h.style("top: 37px"),f.changed(()=>{k(!1),h.html(String(f.value()))})},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight),k(!1)},e.keyPressed=()=>{let t=!1;1===e.key.length?(e.key,w+=e.key,t=!0):"Backspace"===e.key?(w=w.slice(0,w.length-1),t=!0):"Enter"===e.key?w+="\n":"ArrowUp"===e.key&&(t=!0),t&&k()}})},386:(e,t,o)=>{"use strict";function n(e,t,o){let n;null!=o&&"craziness"in o?n=o.craziness:(console.error("path-preprocessor.ts | freakTo received malformed options parameter."),n=3);let s=JSON.parse(JSON.stringify(t));for(let o=0;o<t.length;o++){const i=t[o];let l=[],r={x:0,y:0};for(let s=0;s<i.commands.length;s++){let a=i.commands[s];switch(a.type){case"M":l.push({type:"M",x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"L":let i=[];for(let t=0;t<e.random(0,n-1);t++)i.push(e.random(0,.9));i.sort((e,t)=>e-t);for(let d of i){let i=e.lerp(r.x,a.x,d),p=e.lerp(r.y,a.y,d);t[o].commands.splice(s,0,{type:"L",x:i,y:p}),l.push({type:"L",x:i+e.random(-n/1.5,n/1.5),y:p+e.random(-n/1.5,n/1.5)})}l.push({type:"L",x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)}),s+=i.length;break;case"C":l.push({type:"C",x1:a.x1+e.random(-n,n),y1:a.y1+e.random(-n,n),x2:a.x2+e.random(-n,n),y2:a.y2+e.random(-n,n),x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"Q":l.push({type:"Q",x1:a.x1+e.random(-n,n),y1:a.y1+e.random(-n,n),x:a.x+e.random(-n,n),y:a.y+e.random(-n,n)});break;case"Z":l.push({type:"Z"})}"Z"!==a.type&&(r.x=a.x,r.y=a.y)}s[o].commands=l}return s}o.d(t,{H:()=>n})},493:(e,t,o)=>{"use strict";function n(e){let t=0;for(let o of e.commands)"Z"===o.type&&(t+=1);return 0===t?0:t-1}function s(e){let t=0,o=[[]];for(let n=0;n<e.commands.length;n++){let s=e.commands[n];"Z"!==s.type?o[t].push(s):(o[t].push(s),t++,n!==e.commands.length-1&&o.push([]))}return o}function i(e){for(let t of e)if("C"===t.type||"L"===t.type||"Q"===t.type)return{x:t.x,y:t.y};return null}function l(e,t){let o="";for(let n of e)switch(o+=n.type+" ",n.type){case"M":case"L":o+=n.x.toFixed(t)+","+n.y.toFixed(t);break;case"C":o+=n.x1.toFixed(t)+","+n.y1.toFixed(t)+" "+n.x2.toFixed(t)+","+n.y2.toFixed(t)+" "+n.x.toFixed(t)+","+n.y.toFixed(t);break;case"Q":o+=n.x1.toFixed(t)+","+n.y1.toFixed(t)+" "+n.x.toFixed(t)+","+n.y.toFixed(t)}return o}var r;o.d(t,{eV:()=>r,is:()=>p,Q1:()=>y,Yc:()=>d,$Q:()=>a}),function(e){e.FILLED="filled",e.OPEN="open"}(r||(r={}));const a=0,d=255;function p(e,t,o,n,s,i){const l=t.getPath(o,0,0,n,{kerning:!0}).getBoundingBox(),r=l.y2-l.y1,a=l.x2-l.x1;let d=t.getPaths(o,(e.windowWidth-a)/2,(e.windowHeight-r+n)/2,n,{kerning:!0}),p=s(e,d,i);return d.length!==p.length&&console.error("render-font.ts | something has gone wrong in otf\render-font.ts#getTextPaths regarding the lengths of the outputted otf.Path[]"),{originalTextPath:d,processedTextPath:p}}function y(e,t,o,a,d){const p=function(e,t){const o=function(e,t){e%2==0&&(e+=1,console.error("render-font-otf.ts | generateSampleOffsetGrid received an even side length of "+(e-1)+". The actual side length of the grid generated will be odd: "+e));let o=[],n=Math.floor(e/2);for(let e=n;e>=-n;e--)for(let s=-n;s<=n;s++)o.push([s*t,-e*t]);return o}(5,2),a=e.drawingContext;let d=[];for(let p=0;p<t.length;p++){const y=t[p],c=n(y);if(d.push([]),c<=0){d[p].push(r.FILLED);continue}let x=s(y);for(let t of x){let n=i(t);if(null==n){console.error("render-font-otf.ts | samplePoint.x and samplePoint.y was null");break}let s={x:n.x,y:n.y},c=!1;for(let i of o){s.x=n.x+i[0],s.y=n.y+i[1];const o=new Path2D(l(t,3)),x=a.isPointInPath(o,e.pixelDensity()*s.x,e.pixelDensity()*s.y),f=a.isPointInStroke(o,e.pixelDensity()*s.x,e.pixelDensity()*s.y);if(x&&!f){c=!0;let t=new Path2D(y.toPathData(3));const o=a.isPointInPath(t,e.pixelDensity()*s.x,e.pixelDensity()*s.y),n=a.isPointInStroke(t,e.pixelDensity()*s.x,e.pixelDensity()*s.y);o||n?d[p].push(r.FILLED):d[p].push(r.OPEN);break}}c||console.error("render-font-otf.ts | getTextFillStatuses could not find a suitable sample point (at character index "+p+") for calculating text fill status")}}return d}(e,void 0===d?t:d);return void 0!==a&&void 0!==d&&(a.unprocessedTextPaths=d),o(e,t,p,a),t}},496:(e,t,o)=>{"use strict";e.exports=o.p+"assets/fonts/LibreBaskerville-Regular.ttf"},753:()=>{}},e=>{e.O(0,[652],()=>e(e.s=331)),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHbUssZUFBaUJQLEVBQWtCeEosRUFDdENKLEVBQUdtSyxlQUFpQlAsRUFBa0J0SixHQUsxQyxHQUFJMkosSUFBYUcsRUFBWSxDQUN6QlAsR0FBd0IsRUFFeEIsSUFBSVMsRUFBK0IsSUFBSU4sT0FBT1YsRUFBcUJpQixXQTFEOUMsSUE2RHJCLE1BQU1OLEVBQW9CYixFQUFJYyxjQUMxQkksRUFDQXRLLEVBQUdtSyxlQUFpQlAsRUFBa0J4SixFQUN0Q0osRUFBR21LLGVBQWlCUCxFQUFrQnRKLEdBR3BDOEosRUFBc0JoQixFQUFJaUIsZ0JBQzVCQyxFQUNBdEssRUFBR21LLGVBQWlCUCxFQUFrQnhKLEVBQ3RDSixFQUFHbUssZUFBaUJQLEVBQWtCdEosR0FLdEMySixHQUFZRyxFQUNaekIsRUFBaUJoRCxHQUFnQnBGLEtBQUtxSCxFQUFXNEIsUUFFakRiLEVBQWlCaEQsR0FBZ0JwRixLQUFLcUgsRUFBVzRDLE1BR3JELEtBQ0osQ0FDSixDQUdLWCxHQUVEM0osUUFBUWtFLE1BQU0sdUdBQ2V1QixFQUFpQixxQ0FFdEQsQ0FDSixDQUVBLE9BQU9nRCxDQUNYLENBbElROEIsQ0FBb0J6SyxPQUQwQ3FFLElBQXpCekMsRUFDYkQsRUFBcUNDLEdBV2pFLFlBUDRCeUMsSUFBeEJxRSxRQUE4RHJFLElBQXpCekMsSUFDckM4RyxFQUEwQyxxQkFBSTlHLEdBSWxEbUIsRUFBYS9DLEVBQUkyQixFQUFXZ0gsRUFBa0JELEdBRXZDL0csQ0FDWCxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFuZG9tZm9udC8uL3NyYy9yZW5kZXJlcnMvcDUvcmVuZGVyLWZvbnQudHMiLCJ3ZWJwYWNrOi8vcmFuZG9tZm9udC8uL3NyYy9leHBlcmltZW50cy9tZWRpdW0vc2tldGNoLnRzIiwid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvcmVuZGVyZXJzL290Zi9wYXRoLXByZXByb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL3JlbmRlcmVycy9vdGYvdXRpbC90eXBlLWNvdW50ZXJzLnRzIiwid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvcmVuZGVyZXJzL290Zi91dGlsL290Zi1wYXRoLXV0aWxzLnRzIiwid2VicGFjazovL3JhbmRvbWZvbnQvLi9zcmMvcmVuZGVyZXJzL290Zi9yZW5kZXItZm9udC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcDUgZnJvbSAncDUnO1xyXG5cclxudHlwZSBGb250UmVuZGVyU3RyYXRlZ3kgPSAocDU6IHA1LCBwb2ludHM6IFBvaW50W10pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKHA1OiBwNSxcclxuICAgICAgICAgICAgICAgICAgICAgICBmb250OiBwNS5Gb250LFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGZvbnRTYW1wbGVGYWN0b3I6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICBmb250UmVuZGVyZXI6IEZvbnRSZW5kZXJTdHJhdGVneSkgOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBudW1iZXJPZkxpbmVzID0gdGV4dC5zcGxpdChcIlxcblwiKS5sZW5ndGg7XHJcblxyXG4gICAgcDUudGV4dEZvbnQoZm9udCk7XHJcbiAgICBwNS50ZXh0U2l6ZShmb250U2l6ZSk7XHJcbiAgICBsZXQgcG9pbnRzOiBQb2ludFtdID0gZm9udC50ZXh0VG9Qb2ludHMoXHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICAocDUud2luZG93V2lkdGggLSBwNS50ZXh0V2lkdGgodGV4dCkpIC8gMixcclxuICAgICAgICAocDUud2luZG93SGVpZ2h0ICsgLW51bWJlck9mTGluZXMgKiAocDUudGV4dEFzY2VudCgpIC0gcDUudGV4dERlc2NlbnQoKSkpIC8gMixcclxuICAgICAgICBmb250U2l6ZSxcclxuICAgICAgICB7IHNhbXBsZUZhY3RvcjogZm9udFNhbXBsZUZhY3RvciB9XHJcbiAgICApO1xyXG5cclxuICAgIGZvbnRSZW5kZXJlcihwNSwgcG9pbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0cmF0ZWd5UmFuZG9tUG9pbnRzKHA1OiBwNSwgcG9pbnRzOiBQb2ludFtdKSA6IHZvaWQge1xyXG4gICAgcDUuc3Ryb2tlV2VpZ2h0KDEuNzUpO1xyXG5cclxuICAgIGZvciAobGV0IHAgb2YgcG9pbnRzKSB7XHJcbiAgICAgICAgcDUucG9pbnQocC54ICsgcDUucmFuZG9tKDAsIDE1KSwgcC55ICsgcDUucmFuZG9tKDAsIDUpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0cmF0ZWd5UG9pbnRzKHA1OiBwNSwgcG9pbnRzOiBQb2ludFtdKSA6IHZvaWQge1xyXG4gICAgcDUuc3Ryb2tlV2VpZ2h0KDIpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTtcclxuICAgICAgICBwNS5wb2ludChwLngsIHAueSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJTdHJhdGVneU91dGxpbmVkKHA1OiBwNSwgcG9pbnRzOlBvaW50W10pIDogdm9pZCB7XHJcbiAgICBsZXQgbWF4SnVtcERpc3RhbmNlID0gNztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBwb2ludDE6IFBvaW50ICA9IHBvaW50c1tpXTtcclxuICAgICAgICBpZiAoaSArIDEgPj0gcG9pbnRzLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgbGV0IHBvaW50MjogUG9pbnQgPSBwb2ludHNbaSArIDFdO1xyXG5cclxuICAgICAgICAvLyBTdG9wcGluZyBcImp1bXAgc3RpdGNoZXNcIiBpbnRyYSBhbmQgaW50ZXIgbGV0dGVyc1xyXG4gICAgICAgIGxldCBkeCA9IHBvaW50Mi54IC0gcG9pbnQxLng7XHJcbiAgICAgICAgbGV0IGR5ID0gcG9pbnQyLnkgLSBwb2ludDEueTtcclxuICAgICAgICBpZiAoTWF0aC5zcXJ0KGR4ICoqIDIgKyBkeSAqKiAyKSA+IG1heEp1bXBEaXN0YW5jZSkgY29udGludWU7XHJcblxyXG4gICAgICAgIHA1LmxpbmUocG9pbnQxLngsIHBvaW50MS55LCBwb2ludDIueCwgcG9pbnQyLnkpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0cmF0ZWd5UmFuZG9tT3V0bGluZWQocDU6IHA1LCBwb2ludHM6UG9pbnRbXSkgOiB2b2lkIHtcclxuICAgIGxldCBtYXhKdW1wRGlzdGFuY2UgPSA3O1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHBvaW50MTogUG9pbnQgID0gcG9pbnRzW2ldO1xyXG4gICAgICAgIGlmIChpICsgMSA+PSBwb2ludHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICBsZXQgcG9pbnQyOiBQb2ludCA9IHBvaW50c1tpICsgMV07XHJcblxyXG4gICAgICAgIC8vIFN0b3BwaW5nIFwianVtcCBzdGl0Y2hlc1wiIGludHJhIGFuZCBpbnRlciBsZXR0ZXJzXHJcbiAgICAgICAgbGV0IGR4ID0gcG9pbnQyLnggLSBwb2ludDEueDtcclxuICAgICAgICBsZXQgZHkgPSBwb2ludDIueSAtIHBvaW50MS55O1xyXG4gICAgICAgIGlmIChNYXRoLnNxcnQoZHggKiogMiArIGR5ICoqIDIpID4gbWF4SnVtcERpc3RhbmNlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgLy8gZ2VuZXJhdGUgcmFuZG9tIGludGVybWVkaWFyeSBwb2ludFxyXG4gICAgICAgIGxldCByYW5kb21Vbml0ID0gcDUucmFuZG9tKDAsIDEwMCk7XHJcbiAgICAgICAgaWYgKHJhbmRvbVVuaXQgPiA0NSkge1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQzWCA9IHBvaW50MS54ICsgZHggKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQvMTAsIHJhbmRvbVVuaXQvMjApO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQzWSA9IHBvaW50MS55ICsgZHkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQvMTAsIHJhbmRvbVVuaXQvMjApO1xyXG5cclxuICAgICAgICAgICAgcDUubGluZShwb2ludDEueCwgcG9pbnQxLnksIHBvaW50M1gsIHBvaW50M1kpO1xyXG4gICAgICAgICAgICBwNS5saW5lKHBvaW50M1gsIHBvaW50M1ksIHBvaW50Mi54LCBwb2ludDIueSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcDUubGluZShwb2ludDEueCwgcG9pbnQxLnksIHBvaW50Mi54LCBwb2ludDIueSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RyYXRlZ3lGaWxsZWQocDU6IHA1LCBwb2ludHM6IFBvaW50W10pIDogdm9pZCB7XHJcbiAgICBsZXQgbWF4SnVtcERpc3RhbmNlID0gMjA7XHJcblxyXG4gICAgcDUucHVzaCgpO1xyXG4gICAgcDUuc3Ryb2tlV2VpZ2h0KDApO1xyXG4gICAgcDUuYmVnaW5TaGFwZSgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyB0aGlzIHdhcyBjaGFuZ2VkIGJ5IHRoZSBwcmV2aW91cyBpdGVyYXRpb25cclxuICAgICAgICBsZXQgcG9pbnQxOiBQb2ludCA9IHBvaW50c1tpXTtcclxuICAgICAgICBpZiAoaSArIDEgPj0gcG9pbnRzLmxlbmd0aCkgYnJlYWs7XHJcbiAgICAgICAgLy8gdGhpcyB3aWxsIGJlIHJhbmRvbWl6ZWQgb24gdGhpcyBpdGVyYXRpb25cclxuICAgICAgICBsZXQgcG9pbnQyOiBQb2ludCA9IHBvaW50c1tpICsgMV07XHJcblxyXG4gICAgICAgIC8vIFN0b3BwaW5nIFwianVtcCBzdGl0Y2hlc1wiIGludHJhIGFuZCBpbnRlciBsZXR0ZXJzXHJcbiAgICAgICAgbGV0IGR4ID0gcG9pbnQyLnggLSBwb2ludDEueDtcclxuICAgICAgICBsZXQgZHkgPSBwb2ludDIueSAtIHBvaW50MS55O1xyXG4gICAgICAgIGlmIChNYXRoLnNxcnQoZHggKiogMiArIGR5ICoqIDIpID4gbWF4SnVtcERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHA1LmVuZFNoYXBlKHA1LkNMT1NFKTtcclxuICAgICAgICAgICAgcDUuYmVnaW5TaGFwZSgpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmluZyB0aGUgd2luZGluZyBkaXJlY3Rpb24gb2YgdGhlIHBvaW50c1xyXG4gICAgICAgIC8vIHRoaXMgaXMgc28gY291bnRlcnMgc2hvdyBhcyBob2xlcyBpbiB0aGUgdHlwZS5cclxuICAgICAgICAvLyB0ZXh0VG9Qb2ludHMgd2luZHMgY291bnRlcnMgYXMgY2xvY2t3aXNlIHdoaWxzdCBvdGhlciBwYXJ0cyBvZiB0aGUgdHlwZSBhcmUgd291bmQgYW50aWNsb2Nrd2lzZSA6KVxyXG4gICAgICAgIC8vIGkgaGF0ZSBob3cgbGluZWFyIGFsZ2VicmEgaXMgdGhlIGFuc3dlciB0byB0aGlzOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0N1cnZlX29yaWVudGF0aW9uI09yaWVudGF0aW9uX29mX2Ffc2ltcGxlX3BvbHlnb25cclxuICAgICAgICAvLyBpZiAoaSArIDIgPCBwb2ludHMubGVuZ3RoKSB7IC8vIHdlIG5lZWQgMyBwb2ludHMgdG8gY2FsY3VsYXRlIHRoZSB3aW5kaW5nIGRpcmVjdGlvblxyXG4gICAgICAgIC8vICAgICBsZXQgcG9pbnQzOiBQb2ludCA9IHBvaW50c1tpICsgMl07XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgbGV0IGRldGVybWluYW50T2ZQb2ludHMgPSAoKHBvaW50Mi54ICogcG9pbnQzLnkpICsgKHBvaW50MS54ICogcG9pbnQyLnkpICsgKHBvaW50MS55ICogcG9pbnQzLngpKVxyXG4gICAgICAgIC8vICAgICAgICAgLSAoKHBvaW50MS55ICogcG9pbnQyLngpICsgKHBvaW50Mi55ICogcG9pbnQzLngpICsgKHBvaW50MS54ICogcG9pbnQzLnkpKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBsZXQgY3VycldpbmRpbmdEaXJlY3Rpb24gPSBkZXRlcm1pbmFudE9mUG9pbnRzIDwgMCA/XHJcbiAgICAgICAgLy8gICAgICAgICBXaW5kaW5nRGlyZWN0aW9uLkNMT0NLV0lTRSA6IFdpbmRpbmdEaXJlY3Rpb24uQU5USUNMT0NLV0lTRTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBpZiAoY3VycldpbmRpbmdEaXJlY3Rpb24gPT09IFdpbmRpbmdEaXJlY3Rpb24uQ0xPQ0tXSVNFKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBwNS5maWxsKDEyLjUpO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgcDUuZmlsbCgyNTUpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgaWYgKGRldGVybWluYW50T2ZQb2ludHMgPT09IDApIHtcclxuICAgICAgICAvLyAgICAgICAgIHA1LmZpbGwoMjU1KTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIHByZXZXaW5kaW5nRGlyZWN0aW9uID0gZGV0ZXJtaW5hbnRPZlBvaW50cyA8IDAgP1xyXG4gICAgICAgIC8vICAgICAgICAgV2luZGluZ0RpcmVjdGlvbi5DTE9DS1dJU0UgOiBXaW5kaW5nRGlyZWN0aW9uLkFOVElDTE9DS1dJU0U7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJjdXJyZW50RGV0OiBcIiArIGRldGVybWluYW50T2ZQb2ludHMgKyBcIiwgb3JpZW50ZWQ6IFwiICsgcHJldldpbmRpbmdEaXJlY3Rpb24pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgcDUudmVydGV4KHBvaW50MS54LCBwb2ludDEueSk7XHJcbiAgICB9XHJcbiAgICBwNS5lbmRTaGFwZShwNS5DTE9TRSk7XHJcbiAgICBwNS5wb3AoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0cmF0ZWd5QmVvd3VsZihwNTogcDUsIHBvaW50czogUG9pbnRbXSkgOiB2b2lkIHtcclxuICAgIGxldCBtYXhKdW1wRGlzdGFuY2UgPSAyMDtcclxuICAgIGxldCByYW5kb21Vbml0TW9kaWZpZXIgPSAwLjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDU7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJhbmRvbSBVbml0IE1vZGlmaWVyIGlzOiBcIiArIHJhbmRvbVVuaXRNb2RpZmllcik7XHJcbiAgICBsZXQgcmFuZG9tVW5pdCA9IDI7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJhbmRvbSBVbml0OiBcIiArIHJhbmRvbVVuaXQpO1xyXG5cclxuICAgIHBvaW50c1swXSA9IHtcclxuICAgICAgICB4OiBwb2ludHNbMF0ueCArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgeTogcG9pbnRzWzBdLnkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgfVxyXG5cclxuICAgIHA1LnB1c2goKTtcclxuICAgIHA1LnN0cm9rZVdlaWdodCgwKTtcclxuICAgIHA1LmZpbGwoMTIuNSk7XHJcbiAgICBwNS5iZWdpblNoYXBlKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIHRoaXMgd2FzIGNoYW5nZWQgYnkgdGhlIHByZXZpb3VzIGl0ZXJhdGlvblxyXG4gICAgICAgIGxldCBwb2ludDE6IFBvaW50ID0gcG9pbnRzW2ldO1xyXG4gICAgICAgIGlmIChpICsgMSA+PSBwb2ludHMubGVuZ3RoKSBicmVhaztcclxuICAgICAgICAvLyB0aGlzIHdpbGwgYmUgcmFuZG9taXplZCBvbiB0aGlzIGl0ZXJhdGlvblxyXG4gICAgICAgIGxldCBwb2ludDI6IFBvaW50ID0gcG9pbnRzW2kgKyAxXTtcclxuXHJcbiAgICAgICAgLy8gU3RvcHBpbmcgXCJqdW1wIHN0aXRjaGVzXCIgaW50cmEgYW5kIGludGVyIGxldHRlcnNcclxuICAgICAgICBsZXQgZHggPSBwb2ludDIueCAtIHBvaW50MS54O1xyXG4gICAgICAgIGxldCBkeSA9IHBvaW50Mi55IC0gcG9pbnQxLnk7XHJcbiAgICAgICAgaWYgKE1hdGguc3FydChkeCAqKiAyICsgZHkgKiogMikgPiBtYXhKdW1wRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgcDUuZW5kU2hhcGUocDUuQ0xPU0UpO1xyXG4gICAgICAgICAgICBwNS5iZWdpblNoYXBlKCk7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHJhbmRvbVVuaXQgPSBwNS5yYW5kb20oXHJcbiAgICAgICAgLy8gICAgIC0xMCAqIHA1Lm5vaXNlKHJhbmRvbVVuaXRNb2RpZmllciksXHJcbiAgICAgICAgLy8gICAgIDEwICogcDUubm9pc2UocmFuZG9tVW5pdE1vZGlmaWVyKVxyXG4gICAgICAgIC8vICk7XHJcblxyXG4gICAgICAgIHBvaW50c1tpICsgMV0gPSB7XHJcbiAgICAgICAgICAgIHg6IHBvaW50Mi54ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgeTogcG9pbnQyLnkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHA1LnZlcnRleChwb2ludDEueCwgcG9pbnQxLnkpO1xyXG4gICAgfVxyXG4gICAgcDUuZW5kU2hhcGUocDUuQ0xPU0UpO1xyXG4gICAgcDUucG9wKCk7XHJcbn1cclxuIiwiaW1wb3J0IHA1IGZyb20gJ3A1JztcclxuaW1wb3J0IG90ZiBmcm9tICdvcGVudHlwZS5qcyc7XHJcblxyXG5pbXBvcnQgJ0BzcmMvc3R5bGVzL3NrZXRjaC5jc3MnO1xyXG5cclxuaW1wb3J0IGxpYnJlQmFza2VydmlsbGVSZWdQYXRoIGZyb20gJ0BzcmMvYXNzZXRzL2ZvbnRzL0xpYnJlX0Jhc2tlcnZpbGxlL0xpYnJlQmFza2VydmlsbGUtUmVndWxhci50dGYnO1xyXG5pbXBvcnQgbGlicmVCYXNrZXJ2aWxsZUl0YWxpY1BhdGggZnJvbSAnQHNyYy9hc3NldHMvZm9udHMvTGlicmVfQmFza2VydmlsbGUvTGlicmVCYXNrZXJ2aWxsZS1JdGFsaWMudHRmJztcclxuaW1wb3J0IGxpYnJlQmFza2VydmlsbGVCb2xkUGF0aCBmcm9tICdAc3JjL2Fzc2V0cy9mb250cy9MaWJyZV9CYXNrZXJ2aWxsZS9MaWJyZUJhc2tlcnZpbGxlLUJvbGQudHRmJztcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0ICogYXMgUDVGb250UmVuZGVyZXIgZnJvbSAnQHNyYy9yZW5kZXJlcnMvcDUvcmVuZGVyLWZvbnQnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCAqIGFzIE9URkZvbnRSZW5kZXJlciBmcm9tICdAc3JjL3JlbmRlcmVycy9vdGYvcmVuZGVyLWZvbnQnO1xyXG4vLyBAdHMtaWdub3JlXHJcbmltcG9ydCAqIGFzIE9URkZvbnRSZW5kZXJTdHJhdGVneSBmcm9tICdAc3JjL3JlbmRlcmVycy9vdGYvcmVuZGVyLXN0cmF0ZWd5JztcclxuLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQgKiBhcyBPVEZQYXRoUHJlcHJvY2Vzc29yIGZyb20gJ0BzcmMvcmVuZGVyZXJzL290Zi9wYXRoLXByZXByb2Nlc3Nvcic7XHJcblxyXG5mdW5jdGlvbiBza2V0Y2gocDU6IHA1KTogdm9pZCB7XHJcblxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgbGV0IGxpYnJlQmFza2VydmlsbGVSZWdQNSA6IHA1LkZvbnQ7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgbGlicmVCYXNrZXJ2aWxsZVJlZ09URiA6IG90Zi5Gb250O1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgbGV0IGxpYnJlQmFza2VydmlsbGVJdGFsaWNQNSA6IHA1LkZvbnQ7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgbGlicmVCYXNrZXJ2aWxsZUJvbGRQNSA6IHA1LkZvbnQ7XHJcblxyXG4gICAgbGV0IHNhbXBsZVRleHRzOiBzdHJpbmdbXSA9IFtcIkFyY2hhZW9wdGVyeXhcIiwgXCJUaGUg4oCcQmlnIEZpdmXigJ1cIiwgXCJFbmQtT3Jkb3ZpY2lhblwiLCBcIkxhdGUgRGV2b25pYW5cIiwgXCJFbmQtUGVybWlhblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkVuZC1Ucmlhc3NpY1wiLCBcIkVuZC1DcmV0YWNlb3VzXCJdO1xyXG5cclxuICAgIGxldCB0ZXh0OiBzdHJpbmcgPSBzYW1wbGVUZXh0c1tNYXRoLnJvdW5kKHA1LnJhbmRvbSgwLCBzYW1wbGVUZXh0cy5sZW5ndGggLSAxKSldO1xyXG4gICAgbGV0IHR5cGVTaXplOiBudW1iZXIgPSAxNDg7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBsZXQgdGV4dFBhdGhzOiBvdGYuUGF0aFtdO1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgbGV0IHVucHJvY2Vzc2VkVGV4dFBhdGhzOiBvdGYuUGF0aFtdO1xyXG5cclxuICAgIGxldCBlcm9zaW9uU3RyZW5ndGhTbGlkZXI6IHA1LkVsZW1lbnQ7XHJcbiAgICBsZXQgZXJvc2lvblN0cmVuZ3RoVmFsdWVUZXh0OiBwNS5FbGVtZW50O1xyXG4gICAgbGV0IGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlcjogcDUuRWxlbWVudDtcclxuICAgIGxldCBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0OiBwNS5FbGVtZW50O1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlZHJhd0ZvbnQoaW1tZWRpYXRlbHlSZWRyYXc6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgICAgcDUuYmFja2dyb3VuZCgyNTUpO1xyXG5cclxuICAgICAgICBpZiAoaW1tZWRpYXRlbHlSZWRyYXcpIHsgLy8gdGhpcyBjb25kaXRpb24gaXMgZm9yIHdoZW4gdGhlIHRleHQgaXMgdXBkYXRlZCAoZm9yIGRlYnVnZ2luZylcclxuICAgICAgICAgICAgbGV0IHBhdGhzOiB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFRleHRQYXRoOiBvdGYuUGF0aFtdXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRUZXh0UGF0aDogb3RmLlBhdGhbXVxyXG4gICAgICAgICAgICB9ID0gT1RGRm9udFJlbmRlcmVyLmdldFRleHRQYXRocyhcclxuICAgICAgICAgICAgICAgIHA1LFxyXG4gICAgICAgICAgICAgICAgbGlicmVCYXNrZXJ2aWxsZVJlZ09URixcclxuICAgICAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgICAgICB0eXBlU2l6ZSxcclxuICAgICAgICAgICAgICAgIE9URlBhdGhQcmVwcm9jZXNzb3IuZnJlYWtUbyxcclxuICAgICAgICAgICAgICAgIHsgY3JhemluZXNzOiBmcmVha1RvQ3JhemluZXNzU3RyZW5ndGhTbGlkZXIudmFsdWUoKSB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRleHRQYXRocyA9IHBhdGhzLnByb2Nlc3NlZFRleHRQYXRoO1xyXG4gICAgICAgICAgICB1bnByb2Nlc3NlZFRleHRQYXRocyA9IHBhdGhzLm9yaWdpbmFsVGV4dFBhdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPVEZGb250UmVuZGVyZXIucmVuZGVyRm9udChcclxuICAgICAgICAvLyAgICAgcDUsXHJcbiAgICAgICAgLy8gICAgIHRleHRQYXRocyxcclxuICAgICAgICAvLyAgICAgT1RGRm9udFJlbmRlclN0cmF0ZWd5LmVyb2RlLFxyXG4gICAgICAgIC8vICAgICB7IGVyb3Npb25TdHJlbmd0aDogLWVyb3Npb25TdHJlbmd0aFNsaWRlci52YWx1ZSgpIH0sXHJcbiAgICAgICAgLy8gICAgIHVucHJvY2Vzc2VkVGV4dFBhdGhzXHJcbiAgICAgICAgLy8gKTtcclxuXHJcbiAgICAgICAgUDVGb250UmVuZGVyZXIucmVuZGVyKFxyXG4gICAgICAgICAgICBwNSxcclxuICAgICAgICAgICAgbGlicmVCYXNrZXJ2aWxsZVJlZ1A1LFxyXG4gICAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgICB0eXBlU2l6ZSxcclxuICAgICAgICAgICAgMC4xMyxcclxuICAgICAgICAgICAgUDVGb250UmVuZGVyZXIucmVuZGVyU3RyYXRlZ3lCZW93dWxmXHJcbiAgICAgICAgKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIHA1IGZvbnQgaW5pdGlhbGl6YXRpb25cclxuICAgIHA1LnByZWxvYWQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgbGlicmVCYXNrZXJ2aWxsZVJlZ1A1ID0gcDUubG9hZEZvbnQobGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGgpO1xyXG4gICAgICAgIGxpYnJlQmFza2VydmlsbGVJdGFsaWNQNSA9IHA1LmxvYWRGb250KGxpYnJlQmFza2VydmlsbGVJdGFsaWNQYXRoKTtcclxuICAgICAgICBsaWJyZUJhc2tlcnZpbGxlQm9sZFA1ID0gcDUubG9hZEZvbnQobGlicmVCYXNrZXJ2aWxsZUJvbGRQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBwNS5zZXR1cCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImFmdGVycHJpbnRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWRyYXdGb250KGZhbHNlKTtcclxuICAgICAgICAgICAgZXJvc2lvblN0cmVuZ3RoU2xpZGVyLnZhbHVlKHBhcnNlRmxvYXQoU3RyaW5nKGVyb3Npb25TdHJlbmd0aFNsaWRlci52YWx1ZSgpKSkgKyAyKTtcclxuICAgICAgICAgICAgZXJvc2lvblN0cmVuZ3RoVmFsdWVUZXh0Lmh0bWwoU3RyaW5nKGVyb3Npb25TdHJlbmd0aFNsaWRlci52YWx1ZSgpKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHA1LmNyZWF0ZUNhbnZhcyhwNS53aW5kb3dXaWR0aCwgcDUud2luZG93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gb3BlbnR5cGUuanMgZm9udCBpbml0aWFsaXphdGlvblxyXG4gICAgICAgIG90Zi5sb2FkKGxpYnJlQmFza2VydmlsbGVSZWdQYXRoLCAoZXJyb3IsIGZvbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcGVudHlwZS5qcyB8IFwiICsgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggKyBcIiBjb3VsZCBub3QgYmUgbG9hZGVkOiBcIiArIGVycm9yKTtcclxuICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICBpZiAoZm9udCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGID0gZm9udDtcclxuICAgICAgICAgICAgICAgICAgIHJlZHJhd0ZvbnQoKTtcclxuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3BlbnR5cGUuanMgfCBcIiArIGxpYnJlQmFza2VydmlsbGVSZWdQYXRoICsgXCIgbG9hZGVkLlwiKTtcclxuICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3BlbnR5cGUuanMgfCBcIiArIGxpYnJlQmFza2VydmlsbGVSZWdQYXRoICsgXCIgY291bGQgbm90IGJlIGxvYWRlZDogaXQgd2FzIHVuZGVmaW5lZFwiKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gc2V0dGluZyB1cCBzbGlkZXJzIGZvciBkZWJ1Z2dpbmdcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzU3RyZW5ndGhTbGlkZXIgPSBwNS5jcmVhdGVTbGlkZXIoMCwgMTAsIDMuNTYsIDAuMDEpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci5wb3NpdGlvbig2NSwgMTApO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci5zaXplKDIwMCk7XHJcbiAgICAgICAgbGV0IGZyZWFrVG9DcmF6aW5lc3NMYWJlbDogcDUuRWxlbWVudCA9IHA1LmNyZWF0ZVAoXCJjcmF6eVwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJwb3NpdGlvbjogYWJzb2x1dGVcIik7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc0xhYmVsLnN0eWxlKFwiZm9udC1mYW1pbHk6IG1vbm9zcGFjZVwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJmb250LXdlaWdodDogYm9sZFwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJmb250LXNpemU6IDE1cHhcIik7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc0xhYmVsLnN0eWxlKFwibGVmdDogMTBweFwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzTGFiZWwuc3R5bGUoXCJ0b3A6IC0zcHhcIik7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc1ZhbHVlVGV4dCA9IHA1LmNyZWF0ZVAoU3RyaW5nKGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci52YWx1ZSgpKSk7XHJcbiAgICAgICAgZnJlYWtUb0NyYXppbmVzc1ZhbHVlVGV4dC5zdHlsZShcInBvc2l0aW9uOiBhYnNvbHV0ZVwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0LnN0eWxlKFwiZm9udC1mYW1pbHk6IG1vbm9zcGFjZVwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0LnN0eWxlKFwiZm9udC1zaXplOiAxNXB4XCIpO1xyXG4gICAgICAgIGZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQuc3R5bGUoXCJsZWZ0OiAyODVweFwiKTtcclxuICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0LnN0eWxlKFwidG9wOiAtM3B4XCIpO1xyXG4gICAgICAgIChmcmVha1RvQ3JhemluZXNzU3RyZW5ndGhTbGlkZXIgYXMgYW55KS5jaGFuZ2VkKCgpID0+IHtcclxuICAgICAgICAgICAgcmVkcmF3Rm9udCgpO1xyXG4gICAgICAgICAgICBmcmVha1RvQ3JhemluZXNzVmFsdWVUZXh0Lmh0bWwoU3RyaW5nKGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci52YWx1ZSgpKSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlci52YWx1ZSgpKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhTbGlkZXIgPSBwNS5jcmVhdGVTbGlkZXIoMCwgMTAsIDQuNDQsIDAuMDEpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFNsaWRlci5wb3NpdGlvbig2NSwgNTApO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFNsaWRlci5zaXplKDIwMCk7XHJcbiAgICAgICAgbGV0IGVyb3Npb25TdHJlbmd0aExhYmVsOiBwNS5FbGVtZW50ID0gcDUuY3JlYXRlUChcImVyb2RlXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwicG9zaXRpb246IGFic29sdXRlXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwiZm9udC1mYW1pbHk6IG1vbm9zcGFjZVwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhMYWJlbC5zdHlsZShcImZvbnQtd2VpZ2h0OiBib2xkXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwiZm9udC1zaXplOiAxNXB4XCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aExhYmVsLnN0eWxlKFwibGVmdDogMTBweFwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhMYWJlbC5zdHlsZShcInRvcDogMzdweFwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQgPSBwNS5jcmVhdGVQKFN0cmluZyhlcm9zaW9uU3RyZW5ndGhTbGlkZXIudmFsdWUoKSkpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dC5zdHlsZShcInBvc2l0aW9uOiBhYnNvbHV0ZVwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQuc3R5bGUoXCJmb250LWZhbWlseTogbW9ub3NwYWNlXCIpO1xyXG4gICAgICAgIGVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dC5zdHlsZShcImZvbnQtc2l6ZTogMTVweFwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQuc3R5bGUoXCJsZWZ0OiAyODVweFwiKTtcclxuICAgICAgICBlcm9zaW9uU3RyZW5ndGhWYWx1ZVRleHQuc3R5bGUoXCJ0b3A6IDM3cHhcIik7XHJcbiAgICAgICAgKGVyb3Npb25TdHJlbmd0aFNsaWRlciBhcyBhbnkpLmNoYW5nZWQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZWRyYXdGb250KGZhbHNlKTtcclxuICAgICAgICAgICAgZXJvc2lvblN0cmVuZ3RoVmFsdWVUZXh0Lmh0bWwoU3RyaW5nKGVyb3Npb25TdHJlbmd0aFNsaWRlci52YWx1ZSgpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHA1LndpbmRvd1Jlc2l6ZWQgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIHA1LnJlc2l6ZUNhbnZhcyhwNS53aW5kb3dXaWR0aCwgcDUud2luZG93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmVkcmF3Rm9udChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcDUua2V5UHJlc3NlZCA9ICgpIDogdm9pZCA9PiB7XHJcbiAgICAgICAgbGV0IG5lZWRzVXBkYXRlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChwNS5rZXkubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocDUua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gcDUua2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHA1LmtleSA9PT0gXCJCYWNrc3BhY2VcIikge1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCB0ZXh0Lmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwNS5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICB0ZXh0ICs9IFwiXFxuXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwNS5rZXkgPT09IFwiQXJyb3dVcFwiKSB7XHJcbiAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuZWVkc1VwZGF0ZSkgcmVkcmF3Rm9udCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5uZXcgcDUoc2tldGNoKTtcclxuIiwiaW1wb3J0IHA1IGZyb20gXCJwNVwiO1xyXG5pbXBvcnQgb3RmIGZyb20gXCJvcGVudHlwZS5qc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG5vUHJlcHJvY2VzcyhfcDU6IHA1LCB0ZXh0UGF0aHM6IG90Zi5QYXRoW10pOiBvdGYuUGF0aFtdIHtcclxuICAgIHJldHVybiB0ZXh0UGF0aHM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmcmVha1RvKHA1OiBwNSwgdGV4dFBhdGhzOiBvdGYuUGF0aFtdLCBvcHRpb25zPzogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSk6IG90Zi5QYXRoW10ge1xyXG4gICAgbGV0IHJhbmRvbVVuaXQ6IG51bWJlcjtcclxuXHJcbiAgICBpZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB1bmRlZmluZWQgfHwgIShcImNyYXppbmVzc1wiIGluIG9wdGlvbnMpKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcInBhdGgtcHJlcHJvY2Vzc29yLnRzIHwgZnJlYWtUbyByZWNlaXZlZCBtYWxmb3JtZWQgb3B0aW9ucyBwYXJhbWV0ZXIuXCIpO1xyXG4gICAgICAgIHJhbmRvbVVuaXQgPSAzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByYW5kb21Vbml0ID0gb3B0aW9uc1tcImNyYXppbmVzc1wiXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvY2Vzc2VkVGV4dFBhdGhzOiBvdGYuUGF0aFtdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0ZXh0UGF0aHMpKTtcclxuXHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXJJbmRleCA9IDA7IGNoYXJhY3RlckluZGV4IDwgdGV4dFBhdGhzLmxlbmd0aDsgY2hhcmFjdGVySW5kZXgrKyl7XHJcbiAgICAgICAgLy8gZ2V0IG90Zi5QYXRoIG9iamVjdCBmb3IgY3VycmVudCBjaGFyYWN0ZXJcclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXJQYXRoOiBvdGYuUGF0aCA9IHRleHRQYXRoc1tjaGFyYWN0ZXJJbmRleF07XHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIGFjY3VtdWxhdGUgYWxsIHRoZSBuZXcgcmFuZG9taXplZCBwYXRoIGNvbW1hbmRzIHRoYXQgd2Ugd2FudFxyXG4gICAgICAgIGxldCBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHM6IG90Zi5QYXRoQ29tbWFuZFtdID0gW107XHJcblxyXG4gICAgICAgIGxldCBwcmV2aW91c1BvaW50OiBQb2ludCA9IHsgeDogMCwgeTogMCB9O1xyXG5cclxuICAgICAgICAvLyBwcm9jZXNzIGFsbCBwYXRoIGNvbW1hbmRzIGZvciB0aGlzIGN1cnJlbnQgY2hhcmFjdGVyXHJcbiAgICAgICAgZm9yIChsZXQgY2hhclBhdGhDb21tYW5kSW5kZXggPSAwOyBjaGFyUGF0aENvbW1hbmRJbmRleCA8IGNoYXJhY3RlclBhdGguY29tbWFuZHMubGVuZ3RoOyBjaGFyUGF0aENvbW1hbmRJbmRleCsrKXtcclxuICAgICAgICAgICAgbGV0IGNvbW1hbmQgPSBjaGFyYWN0ZXJQYXRoLmNvbW1hbmRzW2NoYXJQYXRoQ29tbWFuZEluZGV4XTtcclxuICAgICAgICAgICAgc3dpdGNoIChjb21tYW5kLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJNXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hhcmFjdGVyUGF0aENvbW1hbmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIk1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogY29tbWFuZC54ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogY29tbWFuZC55ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgb3RmLlBhdGhDb21tYW5kKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJMXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlcnBJbnRlcnZhbHM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwNS5yYW5kb20oMCwgcmFuZG9tVW5pdCAtIDEpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVycEludGVydmFscy5wdXNoKHA1LnJhbmRvbSgwLCAwLjkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGVycEludGVydmFscy5zb3J0KChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gYSAtIGIpOyAvLyBzb3J0IGluIGFzY2VuZGluZyBvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxlcnBJbnRlcnZhbCBvZiBsZXJwSW50ZXJ2YWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsZXJwZWRYOiBudW1iZXIgPSBwNS5sZXJwKHByZXZpb3VzUG9pbnQueCwgY29tbWFuZC54LCBsZXJwSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGVycGVkWTogbnVtYmVyID0gcDUubGVycChwcmV2aW91c1BvaW50LnksIGNvbW1hbmQueSwgbGVycEludGVydmFsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBvcmlnaW5hbCB0ZXh0UGF0aHMgYXMgd2UgYXJlIGFkZGluZyBjb21tYW5kcyB0aGF0IG5lZWQgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmUgcmVmbGVjdGVkIGluIHRoZSBvcmlnaW5hbCB0ZXh0UGF0aHMgKGNhdXNlIHdlIG1pZ2h0IG5lZWQgdG8gdXNlIHRoZSBvcmlnaW5hbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0UGF0aHMgb3V0c2lkZSBvZiBoZXJlKSAtLSB0aGlzIHdvcmtzIGZpbmUgY2F1c2UgYXJyYXlzIGFyZSBwYXNzZWQgYnkgcmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRQYXRoc1tjaGFyYWN0ZXJJbmRleF0uY29tbWFuZHMuc3BsaWNlKGNoYXJQYXRoQ29tbWFuZEluZGV4LCAwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGxlcnBlZFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBsZXJwZWRZXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gYXMgb3RmLlBhdGhDb21tYW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NoYXJhY3RlclBhdGhDb21tYW5kcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiTFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbGVycGVkWCArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdC8xLjUsIHJhbmRvbVVuaXQvMS41KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGxlcnBlZFkgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQvMS41LCByYW5kb21Vbml0LzEuNSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBhcyBvdGYuUGF0aENvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hhcmFjdGVyUGF0aENvbW1hbmRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogY29tbWFuZC54ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogY29tbWFuZC55ICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgb3RmLlBhdGhDb21tYW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgd2UgaGF2ZSB1cGRhdGVkIHRoZSB0ZXh0UGF0aHMgYnkgcmVmZXJlbmNlIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSBjaGFyUGF0aENvbW1hbmRJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGJlIGFmdGVyIHRoZSBvcmlnaW5hbCBcIkxcIiBjb21tYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhclBhdGhDb21tYW5kSW5kZXggKz0gbGVycEludGVydmFscy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkNcIjpcclxuICAgICAgICAgICAgICAgICAgICBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4MTogY29tbWFuZC54MSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkxOiBjb21tYW5kLnkxICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDI6IGNvbW1hbmQueDIgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5MjogY29tbWFuZC55MiArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGNvbW1hbmQueCAgICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeTogY29tbWFuZC55ICAgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBhcyBvdGYuUGF0aENvbW1hbmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlFcIjpcclxuICAgICAgICAgICAgICAgICAgICBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4MTogY29tbWFuZC54MSArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkxOiBjb21tYW5kLnkxICsgcDUucmFuZG9tKC1yYW5kb21Vbml0LCByYW5kb21Vbml0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogY29tbWFuZC54ICAgKyBwNS5yYW5kb20oLXJhbmRvbVVuaXQsIHJhbmRvbVVuaXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBjb21tYW5kLnkgICArIHA1LnJhbmRvbSgtcmFuZG9tVW5pdCwgcmFuZG9tVW5pdClcclxuICAgICAgICAgICAgICAgICAgICB9IGFzIG90Zi5QYXRoQ29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NoYXJhY3RlclBhdGhDb21tYW5kcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJaXCJcclxuICAgICAgICAgICAgICAgICAgICB9IGFzIG90Zi5QYXRoQ29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb21tYW5kLnR5cGUgIT09IFwiWlwiKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BvaW50LnggPSBjb21tYW5kLng7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1BvaW50LnkgPSBjb21tYW5kLnk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhZnRlciBwcm9jZXNzaW5nIHBhdGhzIGFuZCBhZGRpbmcgc29tZSByYW5kb21pemF0aW9uIGxldCdzIGFzc2lnbiBhbGwgdGhlXHJcbiAgICAgICAgLy8gbmV3IHBhdGggY29tbWFuZHMgdG8gdGhlIG9yaWdpbmFsIG90Zi5QYXRoW10gb2JqZWN0IHBhcmFtZXRlclxyXG4gICAgICAgIHByb2Nlc3NlZFRleHRQYXRoc1tjaGFyYWN0ZXJJbmRleF0uY29tbWFuZHMgPSBuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZFRleHRQYXRocztcclxufSIsImltcG9ydCBvdGYgZnJvbSAnb3BlbnR5cGUuanMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50ZXJDb3VudGVyKGZvbnQ6IG90Zi5Gb250LCBjaGFyYWN0ZXI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICBpZiAoY2hhcmFjdGVyLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwidHlwZS1jb3VudGVycy50cyB8IFBhdGhDb3VudGVyQ291bnRlciBhY2NlcHRlZCBhIGNoYXJhY3RlciBvZiBzaXplIFwiICsgY2hhcmFjdGVyLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9udCBzaXplIGFuZCB4IGFuZCB5IGNvb3JkcyB1c2VkIGhlcmUgYXJlIGR1bW1pZXNcclxuICAgIHJldHVybiBwYXRoQ291bnRlckNvdW50ZXIoZm9udC5nZXRQYXRoKGNoYXJhY3RlclswXSwgMCwgMCwgMjApKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhDb3VudGVyQ291bnRlcihjaGFyYWN0ZXJQYXRoOiBvdGYuUGF0aCk6IG51bWJlciB7XHJcblxyXG4gICAgbGV0IGNvdW50ZXJDb3VudGVyOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGNvbW1hbmQgb2YgY2hhcmFjdGVyUGF0aC5jb21tYW5kcykge1xyXG4gICAgICAgIGlmIChjb21tYW5kLnR5cGUgPT09IFwiWlwiKSB7XHJcbiAgICAgICAgICAgIGNvdW50ZXJDb3VudGVyICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoaXMgYXNzdW1lcyB0aGF0IG90Zi5QYXRoIFNWRyBkcmF3aW5nIGNvbW1hbmRzIGFyZSBzdHJ1Y3R1cmVkIHdpdGggdGhlIGJhc2UgbGV0dGVyZm9ybSBzaGFwZVxyXG4gICAgLy8gZm9sbG93ZWQgYnkgY291bnRlcnNcclxuICAgIHJldHVybiBjb3VudGVyQ291bnRlciA9PT0gMCA/IDAgOiBjb3VudGVyQ291bnRlciAtIDE7XHJcbn1cclxuXHJcbiIsImltcG9ydCBvdGYgZnJvbSAnb3BlbnR5cGUuanMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RTaGFwZXNGcm9tUGF0aChwYXRoOiBvdGYuUGF0aCkgOiBvdGYuUGF0aENvbW1hbmRbXVtdIHtcclxuICAgIGxldCBjdXJyU2hhcGVDb3VudGVyOiBudW1iZXIgPSAwO1xyXG4gICAgbGV0IGN1cnJTaGFwZXM6IG90Zi5QYXRoQ29tbWFuZFtdW10gPSBbW11dO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmNvbW1hbmRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBsZXQgY29tbWFuZCA9IHBhdGguY29tbWFuZHNbaV07XHJcblxyXG4gICAgICAgIGlmIChjb21tYW5kLnR5cGUgIT09IFwiWlwiKSB7IC8vIGlmIHdlIGFyZW4ndCBhdCBhIGNsb3NlIHNoYXBlIGNvbW1hbmRcclxuICAgICAgICAgICAgY3VyclNoYXBlc1tjdXJyU2hhcGVDb3VudGVyXS5wdXNoKGNvbW1hbmQpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGF0IGEgY2xvc2Ugc2hhcGUgY29tbWFuZFxyXG4gICAgICAgICAgICAvLyBwdXNoIFwiWlwiXHJcbiAgICAgICAgICAgIGN1cnJTaGFwZXNbY3VyclNoYXBlQ291bnRlcl0ucHVzaChjb21tYW5kKVxyXG4gICAgICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGN1cnJTaGFwZUNvdW50ZXJcclxuICAgICAgICAgICAgY3VyclNoYXBlQ291bnRlcisrO1xyXG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmVuJ3QgYXQgdGhlIGxhc3QgXCJaXCIgdGhlbiBrZWVwIGV4cGFuZGluZyB0aGUgbGlzdFxyXG4gICAgICAgICAgICBpZiAoaSAhPT0gcGF0aC5jb21tYW5kcy5sZW5ndGggLSAxKSBjdXJyU2hhcGVzLnB1c2goW10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY3VyclNoYXBlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0U3RhcnRQb2ludEluUGF0aChwYXRoQ29tbWFuZHM6IG90Zi5QYXRoQ29tbWFuZFtdKSA6IChQb2ludCB8IG51bGwpIHtcclxuICAgIGZvciAobGV0IGNvbW1hbmQgb2YgcGF0aENvbW1hbmRzKSB7XHJcbiAgICAgICAgaWYgKGNvbW1hbmQudHlwZSA9PT0gXCJDXCIgfHwgIC8vIGN1YmljIGJlemllclxyXG4gICAgICAgICAgICBjb21tYW5kLnR5cGUgPT09IFwiTFwiIHx8ICAvLyBsaW5lIHRvXHJcbiAgICAgICAgICAgIGNvbW1hbmQudHlwZSA9PT0gXCJRXCIpIHsgIC8vIHF1YWRyYXRpYyBiZXppZXJcclxuICAgICAgICAgICAgcmV0dXJuIHsgeDogY29tbWFuZC54LCB5OiBjb21tYW5kLnkgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXRoQ29tbWFuZHNUb1BhdGhEYXRhKHBhdGhDb21tYW5kczogb3RmLlBhdGhDb21tYW5kW10sIGRlY2ltYWxQbGFjZXM6IG51bWJlcikgOiBzdHJpbmcge1xyXG4gICAgbGV0IHBhdGhEYXRhOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGZvciAobGV0IGNvbW1hbmQgb2YgcGF0aENvbW1hbmRzKSB7XHJcbiAgICAgICAgLy8gXCJaXCIgaXMgYXBwZW5kZWQgYXV0b21hdGljYWxseSBoZXJlXHJcbiAgICAgICAgcGF0aERhdGEgKz0gY29tbWFuZC50eXBlICsgXCIgXCI7XHJcbiAgICAgICAgc3dpdGNoIChjb21tYW5kLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIk1cIjpcclxuICAgICAgICAgICAgY2FzZSBcIkxcIjpcclxuICAgICAgICAgICAgICAgIHBhdGhEYXRhICs9IGNvbW1hbmQueC50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgXCIsXCIgKyBjb21tYW5kLnkudG9GaXhlZChkZWNpbWFsUGxhY2VzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQ1wiOlxyXG4gICAgICAgICAgICAgICAgcGF0aERhdGEgKz0gY29tbWFuZC54MS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgXCIsXCIgKyBjb21tYW5kLnkxLnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZC54Mi50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgXCIsXCIgKyBjb21tYW5kLnkyLnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZC54LnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIixcIiArIGNvbW1hbmQueS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJRXCI6XHJcbiAgICAgICAgICAgICAgICBwYXRoRGF0YSArPSBjb21tYW5kLngxLnRvRml4ZWQoZGVjaW1hbFBsYWNlcykgKyBcIixcIiArIGNvbW1hbmQueTEudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kLngudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIFwiLFwiICsgY29tbWFuZC55LnRvRml4ZWQoZGVjaW1hbFBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhdGhEYXRhO1xyXG59IiwiaW1wb3J0IHA1IGZyb20gJ3A1JztcclxuaW1wb3J0IG90ZiBmcm9tICdvcGVudHlwZS5qcyc7XHJcbmltcG9ydCB7cGF0aENvdW50ZXJDb3VudGVyfSBmcm9tIFwiLi91dGlsL3R5cGUtY291bnRlcnNcIjtcclxuaW1wb3J0IHtleHRyYWN0U2hhcGVzRnJvbVBhdGgsIGdldEZpcnN0U3RhcnRQb2ludEluUGF0aCwgcGF0aENvbW1hbmRzVG9QYXRoRGF0YX0gZnJvbSBcIi4vdXRpbC9vdGYtcGF0aC11dGlsc1wiO1xyXG5cclxudHlwZSBGb250UmVuZGVyU3RyYXRlZ3kgPSAocDU6IHA1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0UGF0aHM6IG90Zi5QYXRoW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRGaWxsU3RhdHVzZXM6IEZpbGxTdGF0dXNbXVtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gdm9pZDtcclxudHlwZSBGb250UHJlcHJvY2Vzc29yID0gKHA1OiBwNSwgdGV4dFBhdGhzOiBvdGYuUGF0aFtdLCBvcHRpb25zPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4gb3RmLlBhdGhbXTtcclxuXHJcbmV4cG9ydCBlbnVtIEZpbGxTdGF0dXMge1xyXG4gICAgRklMTEVEID0gXCJmaWxsZWRcIixcclxuICAgIE9QRU4gPSBcIm9wZW5cIlxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdGV4dEZvcmVncm91bmRDb2xvdXIgPSAwO1xyXG5leHBvcnQgY29uc3QgdGV4dEJhY2tncm91bmRDb2xvdXIgPSAyNTU7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dFBhdGhzKHA1OiBwNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiBvdGYuRm9udCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVNpemU6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250UHJlcHJvY2Vzc29yOiBGb250UHJlcHJvY2Vzc29yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRQcmVwcm9jZXNzb3JPcHRpb25zPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSk6XHJcbiAgICB7IG9yaWdpbmFsVGV4dFBhdGg6IG90Zi5QYXRoW10sIHByb2Nlc3NlZFRleHRQYXRoOiBvdGYuUGF0aFtdIH0ge1xyXG4gICAgY29uc3QgdGV4dFBhdGg6IG90Zi5QYXRoID0gZm9udC5nZXRQYXRoKHRleHQsIDAsIDAsIHR5cGVTaXplLCB7IGtlcm5pbmc6IHRydWUgfSk7XHJcbiAgICBjb25zdCB0ZXh0Qm91bmRpbmdCb3g6IG90Zi5Cb3VuZGluZ0JveCA9IHRleHRQYXRoLmdldEJvdW5kaW5nQm94KCk7XHJcbiAgICBjb25zdCB0ZXh0SGVpZ2h0OiBudW1iZXIgPSB0ZXh0Qm91bmRpbmdCb3gueTIgLSB0ZXh0Qm91bmRpbmdCb3gueTE7XHJcbiAgICBjb25zdCB0ZXh0V2lkdGg6IG51bWJlciA9IHRleHRCb3VuZGluZ0JveC54MiAtIHRleHRCb3VuZGluZ0JveC54MTtcclxuXHJcbiAgICBsZXQgdGV4dFBhdGhzOiBvdGYuUGF0aFtdID0gZm9udC5nZXRQYXRocyhcclxuICAgICAgICB0ZXh0LFxyXG4gICAgICAgIChwNS53aW5kb3dXaWR0aCAtIHRleHRXaWR0aCkgLyAyLFxyXG4gICAgICAgIChwNS53aW5kb3dIZWlnaHQgLSB0ZXh0SGVpZ2h0ICsgdHlwZVNpemUpIC8gMixcclxuICAgICAgICB0eXBlU2l6ZSxcclxuICAgICAgICB7IGtlcm5pbmc6IHRydWUgfVxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgcHJvY2Vzc2VkVGV4dFBhdGhzOiBvdGYuUGF0aFtdID0gZm9udFByZXByb2Nlc3NvcihwNSwgdGV4dFBhdGhzLCBmb250UHJlcHJvY2Vzc29yT3B0aW9ucyk7XHJcblxyXG4gICAgaWYgKHRleHRQYXRocy5sZW5ndGggIT09IHByb2Nlc3NlZFRleHRQYXRocy5sZW5ndGgpXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcInJlbmRlci1mb250LnRzIHwgc29tZXRoaW5nIGhhcyBnb25lIHdyb25nIGluIG90ZlxccmVuZGVyLWZvbnQudHMjZ2V0VGV4dFBhdGhzXCIgK1xyXG4gICAgICAgICAgICBcIiByZWdhcmRpbmcgdGhlIGxlbmd0aHMgb2YgdGhlIG91dHB1dHRlZCBvdGYuUGF0aFtdXCIpO1xyXG5cclxuICAgIHJldHVybiB7IG9yaWdpbmFsVGV4dFBhdGg6IHRleHRQYXRocywgcHJvY2Vzc2VkVGV4dFBhdGg6IHByb2Nlc3NlZFRleHRQYXRocyB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRm9udChwNTogcDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRQYXRoczogb3RmLlBhdGhbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFJlbmRlcmVyOiBGb250UmVuZGVyU3RyYXRlZ3ksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRSZW5kZXJlck9wdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB1bnByb2Nlc3NlZFRleHRQYXRocz86IG90Zi5QYXRoW10pIDogb3RmLlBhdGhbXSB7XHJcblxyXG4gICAgLy8gc29ydGluZyBvdXQgcmVuZGVyaW5nIGhvbGVzIGluIGZvbnRzXHJcbiAgICAvLyB1bnByb2Nlc3NlZFRleHRQYXRocyBjYW4gYmUgdXNlZCBoZXJlIGlmIHRoZSBwcm9jZXNzaW5nIHlvdSBkbyBvbiB5b3VyIHRleHQgaXMgc28gZXh0cmVtZSB0aGF0IGl0IGRlc3Ryb3lzXHJcbiAgICAvLyBteSB2ZXJ5IGZpY2tsZSBhbGdvcml0aG0gZm9yIGRldGVybWluaW5nIHRoZSBudW1iZXIgYW5kIG9yZGVyIG9mIGhvbGVzIGluIGEgbGV0dGVyZm9ybSA6KVxyXG4gICAgY29uc3QgdGV4dEZpbGxTdGF0dXNlczogRmlsbFN0YXR1c1tdW10gPSB1bnByb2Nlc3NlZFRleHRQYXRocyA9PT0gdW5kZWZpbmVkID9cclxuICAgICAgICBnZXRUZXh0RmlsbFN0YXR1c2VzKHA1LCB0ZXh0UGF0aHMpIDogZ2V0VGV4dEZpbGxTdGF0dXNlcyhwNSwgdW5wcm9jZXNzZWRUZXh0UGF0aHMpO1xyXG5cclxuICAgIC8vIHVucHJvY2Vzc2VkVGV4dFBhdGhzIHRlbmQgdG8gYmUgdXNlZnVsIGluIEZvbnRSZW5kZXJTdHJhdGVneSBhcyB0aGV5IHByZXNlcnZlIHRoZSBvcmlnaW5hbCBnZW9tZXRyeVxyXG4gICAgLy8gYW5kIGN1cnZlcyBvZiB0aGUgZm9udCBiZWZvcmUgdGhleSBhcmUgcHJvY2Vzc2VkIGNyYXppbHlcclxuICAgIGlmIChmb250UmVuZGVyZXJPcHRpb25zICE9PSB1bmRlZmluZWQgJiYgdW5wcm9jZXNzZWRUZXh0UGF0aHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvbnRSZW5kZXJlck9wdGlvbnNbXCJ1bnByb2Nlc3NlZFRleHRQYXRoc1wiXSA9IHVucHJvY2Vzc2VkVGV4dFBhdGhzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGFjdHVhbGx5IHJlbmRlcmluZyBmb250XHJcbiAgICBmb250UmVuZGVyZXIocDUsIHRleHRQYXRocywgdGV4dEZpbGxTdGF0dXNlcywgZm9udFJlbmRlcmVyT3B0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIHRleHRQYXRocztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVTYW1wbGVPZmZzZXRHcmlkKHNpZGVMZW5ndGg6IG51bWJlciwgc2FtcGxlVW5pdDogbnVtYmVyKTogW3g6IG51bWJlciwgeTogbnVtYmVyXVtdIHtcclxuICAgIGlmIChzaWRlTGVuZ3RoICUgMiA9PT0gMCApIHtcclxuICAgICAgICBzaWRlTGVuZ3RoICs9IDE7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgXCJyZW5kZXItZm9udC1vdGYudHMgfCBnZW5lcmF0ZVNhbXBsZU9mZnNldEdyaWQgcmVjZWl2ZWQgYW4gZXZlbiBzaWRlIGxlbmd0aCBvZiBcIiArIChzaWRlTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgKyBcIi4gVGhlIGFjdHVhbCBzaWRlIGxlbmd0aCBvZiB0aGUgZ3JpZCBnZW5lcmF0ZWQgd2lsbCBiZSBvZGQ6IFwiICsgc2lkZUxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNhbXBsZU9mZnNldEdyaWQ6IFt4OiBudW1iZXIsIHk6IG51bWJlcl1bXSA9IFtdO1xyXG4gICAgbGV0IG1heFNhbXBsZVVuaXRTY2FsZTogbnVtYmVyID0gTWF0aC5mbG9vcihzaWRlTGVuZ3RoIC8gMik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IG1heFNhbXBsZVVuaXRTY2FsZTsgaSA+PSAtbWF4U2FtcGxlVW5pdFNjYWxlOyBpLS0pIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gLW1heFNhbXBsZVVuaXRTY2FsZTsgaiA8PSBtYXhTYW1wbGVVbml0U2NhbGU7IGorKykge1xyXG4gICAgICAgICAgICBzYW1wbGVPZmZzZXRHcmlkLnB1c2goW2ogKiBzYW1wbGVVbml0LCAtaSAqIHNhbXBsZVVuaXRdKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2FtcGxlT2Zmc2V0R3JpZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGV4dEZpbGxTdGF0dXNlcyhwNTogcDUsIHRleHRQYXRoczogb3RmLlBhdGhbXSk6IEZpbGxTdGF0dXNbXVtdIHtcclxuICAgIGNvbnN0IHRvUGF0aERhdGFSZXNvbHV0aW9uOiBudW1iZXIgPSAzO1xyXG4gICAgY29uc3Qgc2FtcGxlVW5pdDogbnVtYmVyID0gMjtcclxuICAgIGNvbnN0IHNhbXBsZU9mZnNldEtlcm5lbDogW3g6IG51bWJlciwgeTogbnVtYmVyXVtdID0gZ2VuZXJhdGVTYW1wbGVPZmZzZXRHcmlkKDUsIHNhbXBsZVVuaXQpO1xyXG4gICAgY29uc3QgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSBwNS5kcmF3aW5nQ29udGV4dDtcclxuXHJcbiAgICBsZXQgdGV4dEZpbGxTdGF0dXNlczogRmlsbFN0YXR1c1tdW10gPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBjaGFyYWN0ZXJJbmRleCA9IDA7IGNoYXJhY3RlckluZGV4IDwgdGV4dFBhdGhzLmxlbmd0aDsgY2hhcmFjdGVySW5kZXgrKyl7XHJcbiAgICAgICAgY29uc3QgZW50aXJlTGV0dGVyZm9ybVBhdGggPSB0ZXh0UGF0aHNbY2hhcmFjdGVySW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IGNvdW50ZXJDb3VudDogbnVtYmVyID0gcGF0aENvdW50ZXJDb3VudGVyKGVudGlyZUxldHRlcmZvcm1QYXRoKTtcclxuXHJcbiAgICAgICAgdGV4dEZpbGxTdGF0dXNlcy5wdXNoKFtdKTtcclxuXHJcbiAgICAgICAgaWYgKGNvdW50ZXJDb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRleHRGaWxsU3RhdHVzZXNbY2hhcmFjdGVySW5kZXhdLnB1c2goRmlsbFN0YXR1cy5GSUxMRUQpO1xyXG4gICAgICAgICAgICBjb250aW51ZTsgLy8gd2lsbCBpbmNyZW1lbnQgY2hhcmFjdGVySW5kZXhcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsZXR0ZXJmb3JtQ29tcG9uZW50U2hhcGVzOiBvdGYuUGF0aENvbW1hbmRbXVtdID0gZXh0cmFjdFNoYXBlc0Zyb21QYXRoKGVudGlyZUxldHRlcmZvcm1QYXRoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbGV0dGVyZm9ybUNvbXBvbmVudFNoYXBlIG9mIGxldHRlcmZvcm1Db21wb25lbnRTaGFwZXMpIHtcclxuICAgICAgICAgICAgbGV0IHNhbXBsZVBvaW50OiBQb2ludCB8IG51bGwgPSBnZXRGaXJzdFN0YXJ0UG9pbnRJblBhdGgobGV0dGVyZm9ybUNvbXBvbmVudFNoYXBlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzYW1wbGVQb2ludCA9PT0gbnVsbCB8fCBzYW1wbGVQb2ludCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwicmVuZGVyLWZvbnQtb3RmLnRzIHwgc2FtcGxlUG9pbnQueCBhbmQgc2FtcGxlUG9pbnQueSB3YXMgbnVsbFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBub3cgd2UgbmVlZCB0byBzYW1wbGUgYXJvdW5kIHRoZSAoc2FtcGxlWCwgc2FtcGxlWSkgY29vcmRpbmF0ZSB3ZSBoYXZlIGFuZCB0ZXN0IGFnYWluc3RcclxuICAgICAgICAgICAgLy8gY3R4LmlzUG9pbnRJblBhdGggd2l0aCB0aGUgcmVsZXZhbnQgZW50aXJlTGV0dGVyZm9ybVBhdGggYXMgdGhlIHBhdGhcclxuICAgICAgICAgICAgbGV0IHNhbXBsZVBvaW50T2Zmc2V0OiBQb2ludCA9IHt4OiBzYW1wbGVQb2ludC54LCB5OiBzYW1wbGVQb2ludC55fTtcclxuICAgICAgICAgICAgbGV0IHdhc0ZpbGxTdGF0dXNBc3NpZ25lZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgc2FtcGxlT2Zmc2V0IG9mIHNhbXBsZU9mZnNldEtlcm5lbCkge1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlUG9pbnRPZmZzZXQueCA9IHNhbXBsZVBvaW50LnggKyBzYW1wbGVPZmZzZXRbMF07XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVQb2ludE9mZnNldC55ID0gc2FtcGxlUG9pbnQueSArIHNhbXBsZU9mZnNldFsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZWFyY2hpbmcgdG8gc2VlIGlmIHdlJ3JlIGluc2lkZSB0aGUgY3VycmVudCBzaGFwZVxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIHA1LnBpeGVsRGVuc2l0eSgpIHBhcnQgaXMgQ1JVQ0lBTCFcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlclBhdGgyRDogUGF0aDJEID1cclxuICAgICAgICAgICAgICAgICAgICBuZXcgUGF0aDJEKHBhdGhDb21tYW5kc1RvUGF0aERhdGEobGV0dGVyZm9ybUNvbXBvbmVudFNoYXBlLCB0b1BhdGhEYXRhUmVzb2x1dGlvbikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNJblBhdGg6IGJvb2xlYW4gPSBjdHguaXNQb2ludEluUGF0aChcclxuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJQYXRoMkQsXHJcbiAgICAgICAgICAgICAgICAgICAgcDUucGl4ZWxEZW5zaXR5KCkgKiBzYW1wbGVQb2ludE9mZnNldC54LFxyXG4gICAgICAgICAgICAgICAgICAgIHA1LnBpeGVsRGVuc2l0eSgpICogc2FtcGxlUG9pbnRPZmZzZXQueSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNJblN0cm9rZTogYm9vbGVhbiA9IGN0eC5pc1BvaW50SW5TdHJva2UoXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyUGF0aDJELFxyXG4gICAgICAgICAgICAgICAgICAgIHA1LnBpeGVsRGVuc2l0eSgpICogc2FtcGxlUG9pbnRPZmZzZXQueCxcclxuICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHN0b3Agc2VhcmNoaW5nIGlmIHdlJ3ZlIGZvdW5kIGEgcG9pbnQgd2l0aGluIHRoZSBwYXRoIGFuZCBub3Qgb24gdGhlIHN0cm9rZSBhcyB0aGlzIHdvbid0XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93IHVwIGluIGZ1dHVyZSBpc1BvaW50SW5QYXRoIGNhbGN1bGF0aW9ucyB3aXRoIHRoZSBlbnRpcmUgbGV0dGVyZm9ybVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzSW5QYXRoICYmICFpc0luU3Ryb2tlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FzRmlsbFN0YXR1c0Fzc2lnbmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJhY3RlclNoYXBlUGF0aDJEOiBQYXRoMkQgPSBuZXcgUGF0aDJEKGVudGlyZUxldHRlcmZvcm1QYXRoLnRvUGF0aERhdGEodG9QYXRoRGF0YVJlc29sdXRpb24pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlbiBzYW1wbGUgdGhpcyBwb2ludCBpbiB0aGUgdGV4dFBhdGggdXNpbmcgY3R4LmlzUG9pbnRJblBhdGhcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0luUGF0aDogYm9vbGVhbiA9IGN0eC5pc1BvaW50SW5QYXRoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJTaGFwZVBhdGgyRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcDUucGl4ZWxEZW5zaXR5KCkgKiBzYW1wbGVQb2ludE9mZnNldC54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJblN0cm9rZTogYm9vbGVhbiA9IGN0eC5pc1BvaW50SW5TdHJva2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclNoYXBlUGF0aDJELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwNS5waXhlbERlbnNpdHkoKSAqIHNhbXBsZVBvaW50T2Zmc2V0LngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHA1LnBpeGVsRGVuc2l0eSgpICogc2FtcGxlUG9pbnRPZmZzZXQueSxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvbmx5IE5PVCBpbiBhIGNvdW50ZXIvc29tZXRoaW5nIHRoYXQgc2hvdWxkbid0IGJlIGZpbGxlZCB3aGVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXNJblBhdGggPT09IEZBTFNFICYmIGlzSW5TdHJva2UgPT09IEZBTFNFO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUGF0aCB8fCBpc0luU3Ryb2tlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRGaWxsU3RhdHVzZXNbY2hhcmFjdGVySW5kZXhdLnB1c2goRmlsbFN0YXR1cy5GSUxMRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRGaWxsU3RhdHVzZXNbY2hhcmFjdGVySW5kZXhdLnB1c2goRmlsbFN0YXR1cy5PUEVOKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPIG5lZWQgdG8gZG8gZXJyb3IgaGFuZGxpbmcgZm9yIHdoYXQgaGFwcGVucyB3aGVuIHdlIGZhbGwgdGhyb3VnaCBoZXJlIHdpdGhvdXQgYSBzdGF0dXNcclxuICAgICAgICAgICAgaWYgKCF3YXNGaWxsU3RhdHVzQXNzaWduZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRleHRGaWxsU3RhdHVzZXNbY2hhcmFjdGVySW5kZXhdLnB1c2goRmlsbFN0YXR1cy5GSUxMRUQpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInJlbmRlci1mb250LW90Zi50cyB8IGdldFRleHRGaWxsU3RhdHVzZXMgY291bGQgbm90IGZpbmQgYSBzdWl0YWJsZSBzYW1wbGUgcG9pbnQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiKGF0IGNoYXJhY3RlciBpbmRleCBcIiArIGNoYXJhY3RlckluZGV4ICsgXCIpIGZvciBjYWxjdWxhdGluZyB0ZXh0IGZpbGwgc3RhdHVzXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRleHRGaWxsU3RhdHVzZXM7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJyZW5kZXJTdHJhdGVneUJlb3d1bGYiLCJwNSIsInBvaW50cyIsImNvbnNvbGUiLCJsb2ciLCJ4IiwicmFuZG9tIiwieSIsInB1c2giLCJzdHJva2VXZWlnaHQiLCJmaWxsIiwiYmVnaW5TaGFwZSIsImkiLCJsZW5ndGgiLCJwb2ludDEiLCJwb2ludDIiLCJkeCIsImR5IiwiTWF0aCIsInNxcnQiLCJlbmRTaGFwZSIsIkNMT1NFIiwidmVydGV4IiwicG9wIiwibGlicmVCYXNrZXJ2aWxsZVJlZ1A1IiwibGlicmVCYXNrZXJ2aWxsZVJlZ09URiIsImxpYnJlQmFza2VydmlsbGVJdGFsaWNQNSIsImxpYnJlQmFza2VydmlsbGVCb2xkUDUiLCJ0ZXh0UGF0aHMiLCJ1bnByb2Nlc3NlZFRleHRQYXRocyIsImVyb3Npb25TdHJlbmd0aFNsaWRlciIsImVyb3Npb25TdHJlbmd0aFZhbHVlVGV4dCIsImZyZWFrVG9DcmF6aW5lc3NTdHJlbmd0aFNsaWRlciIsImZyZWFrVG9DcmF6aW5lc3NWYWx1ZVRleHQiLCJzYW1wbGVUZXh0cyIsInRleHQiLCJyb3VuZCIsInJlZHJhd0ZvbnQiLCJpbW1lZGlhdGVseVJlZHJhdyIsImJhY2tncm91bmQiLCJwYXRocyIsImNyYXppbmVzcyIsInZhbHVlIiwicHJvY2Vzc2VkVGV4dFBhdGgiLCJvcmlnaW5hbFRleHRQYXRoIiwiZm9udCIsImZvbnRTaXplIiwiZm9udFNhbXBsZUZhY3RvciIsImZvbnRSZW5kZXJlciIsIm51bWJlck9mTGluZXMiLCJzcGxpdCIsInRleHRGb250IiwidGV4dFNpemUiLCJ0ZXh0VG9Qb2ludHMiLCJ3aW5kb3dXaWR0aCIsInRleHRXaWR0aCIsIndpbmRvd0hlaWdodCIsInRleHRBc2NlbnQiLCJ0ZXh0RGVzY2VudCIsInNhbXBsZUZhY3RvciIsInByZWxvYWQiLCJsb2FkRm9udCIsInNldHVwIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlRmxvYXQiLCJTdHJpbmciLCJodG1sIiwiY3JlYXRlQ2FudmFzIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJjcmVhdGVTbGlkZXIiLCJwb3NpdGlvbiIsInNpemUiLCJmcmVha1RvQ3JhemluZXNzTGFiZWwiLCJjcmVhdGVQIiwic3R5bGUiLCJjaGFuZ2VkIiwiZXJvc2lvblN0cmVuZ3RoTGFiZWwiLCJ3aW5kb3dSZXNpemVkIiwicmVzaXplQ2FudmFzIiwia2V5UHJlc3NlZCIsIm5lZWRzVXBkYXRlIiwia2V5Iiwic2xpY2UiLCJmcmVha1RvIiwib3B0aW9ucyIsInJhbmRvbVVuaXQiLCJwcm9jZXNzZWRUZXh0UGF0aHMiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJjaGFyYWN0ZXJJbmRleCIsImNoYXJhY3RlclBhdGgiLCJuZXdDaGFyYWN0ZXJQYXRoQ29tbWFuZHMiLCJwcmV2aW91c1BvaW50IiwiY2hhclBhdGhDb21tYW5kSW5kZXgiLCJjb21tYW5kcyIsImNvbW1hbmQiLCJ0eXBlIiwibGVycEludGVydmFscyIsInNvcnQiLCJhIiwiYiIsImxlcnBJbnRlcnZhbCIsImxlcnBlZFgiLCJsZXJwIiwibGVycGVkWSIsInNwbGljZSIsIngxIiwieTEiLCJ4MiIsInkyIiwicGF0aENvdW50ZXJDb3VudGVyIiwiY291bnRlckNvdW50ZXIiLCJleHRyYWN0U2hhcGVzRnJvbVBhdGgiLCJwYXRoIiwiY3VyclNoYXBlQ291bnRlciIsImN1cnJTaGFwZXMiLCJnZXRGaXJzdFN0YXJ0UG9pbnRJblBhdGgiLCJwYXRoQ29tbWFuZHMiLCJwYXRoQ29tbWFuZHNUb1BhdGhEYXRhIiwiZGVjaW1hbFBsYWNlcyIsInBhdGhEYXRhIiwidG9GaXhlZCIsIkZpbGxTdGF0dXMiLCJ0ZXh0Rm9yZWdyb3VuZENvbG91ciIsInRleHRCYWNrZ3JvdW5kQ29sb3VyIiwiZ2V0VGV4dFBhdGhzIiwidHlwZVNpemUiLCJmb250UHJlcHJvY2Vzc29yIiwiZm9udFByZXByb2Nlc3Nvck9wdGlvbnMiLCJ0ZXh0Qm91bmRpbmdCb3giLCJnZXRQYXRoIiwia2VybmluZyIsImdldEJvdW5kaW5nQm94IiwidGV4dEhlaWdodCIsImdldFBhdGhzIiwicmVuZGVyRm9udCIsImZvbnRSZW5kZXJlck9wdGlvbnMiLCJ0ZXh0RmlsbFN0YXR1c2VzIiwic2FtcGxlT2Zmc2V0S2VybmVsIiwic2lkZUxlbmd0aCIsInNhbXBsZVVuaXQiLCJzYW1wbGVPZmZzZXRHcmlkIiwibWF4U2FtcGxlVW5pdFNjYWxlIiwiZmxvb3IiLCJqIiwiZ2VuZXJhdGVTYW1wbGVPZmZzZXRHcmlkIiwiY3R4IiwiZHJhd2luZ0NvbnRleHQiLCJlbnRpcmVMZXR0ZXJmb3JtUGF0aCIsImNvdW50ZXJDb3VudCIsIkZJTExFRCIsImxldHRlcmZvcm1Db21wb25lbnRTaGFwZXMiLCJsZXR0ZXJmb3JtQ29tcG9uZW50U2hhcGUiLCJzYW1wbGVQb2ludCIsInNhbXBsZVBvaW50T2Zmc2V0Iiwid2FzRmlsbFN0YXR1c0Fzc2lnbmVkIiwic2FtcGxlT2Zmc2V0IiwiY2hhcmFjdGVyUGF0aDJEIiwiUGF0aDJEIiwiaXNJblBhdGgiLCJpc1BvaW50SW5QYXRoIiwicGl4ZWxEZW5zaXR5IiwiaXNJblN0cm9rZSIsImlzUG9pbnRJblN0cm9rZSIsImNoYXJhY3RlclNoYXBlUGF0aDJEIiwidG9QYXRoRGF0YSIsIk9QRU4iLCJnZXRUZXh0RmlsbFN0YXR1c2VzIl0sInNvdXJjZVJvb3QiOiIifQ==