"use strict";
(self["webpackChunkrandomfont"] = self["webpackChunkrandomfont"] || []).push([[882],{

/***/ 293:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {


// EXTERNAL MODULE: ./node_modules/.pnpm/p5@1.11.10/node_modules/p5/lib/p5.min.js
var p5_min = __webpack_require__(996);
var p5_min_default = /*#__PURE__*/__webpack_require__.n(p5_min);
// EXTERNAL MODULE: ./node_modules/.pnpm/opentype.js@1.3.4/node_modules/opentype.js/dist/opentype.module.js
var opentype_module = __webpack_require__(652);
// EXTERNAL MODULE: ./src/assets/fonts/Libre_Baskerville/LibreBaskerville-Regular.ttf
var LibreBaskerville_Regular = __webpack_require__(496);
// EXTERNAL MODULE: ./src/renderers/otf/render-font.ts + 2 modules
var render_font = __webpack_require__(840);
// EXTERNAL MODULE: ./src/renderers/otf/render-strategy.ts
var render_strategy = __webpack_require__(922);
// EXTERNAL MODULE: ./src/renderers/otf/path-preprocessor.ts
var path_preprocessor = __webpack_require__(386);
;// ./src/experiments/medium/medium-word-erosion-values.ts
const mediumWordErosionValues = [
    0, 0, 0, 0, 0,
    0,
    0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4,
    0,
    0, 0, 0, 0, 0,
    0,
    0,
    0,
    0.2, 0.2, 0.2, 0.2, 0.2, 0.2,
    0,
    0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2,
    0,
    0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0, 0, 0, 0,
    0,
    0, 0, 0, 0, 0,
    0,
    0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6,
    0, 0, 0,
    0,
    0, 0.05, 0.10, 0.15, 0.20, 0.25, 0.30, 0.35,
    0,
    0.40, 0.45, 0.50, 0.55,
    0,
    0.60, 0.65,
    0,
    0.70, 0.75, 0.80,
    0,
    0.85, 0.90, 0.95, 1, 1.5
];

;// ./src/experiments/medium/sketch.ts








function sketch(p5) {
    let libreBaskervilleRegOTF;
    let text = "We’re destroying words — scores of them, \n" +
        "hundreds of them, every day. We’re cutting\n" +
        "the language down to the bone.";
    const typeSize = 64;
    let textPaths;
    let unprocessedTextPaths;
    const lines = text.split(/\r?\n/);
    const freakToCrazinessValue = 1.36;
    const erosionStrengthValue = -3;
    function redrawFont(immediatelyRedraw = true) {
        p5.background(255);
        const maxLineWidth = Math.max(...lines.map(line => {
            const bb = libreBaskervilleRegOTF
                .getPath(line, 0, 0, typeSize, { kerning: true })
                .getBoundingBox();
            return bb.x2 - bb.x1;
        }));
        if (immediatelyRedraw) {
            let paths = render_font/* getTextPaths */.is(p5, libreBaskervilleRegOTF, text, typeSize, path_preprocessor/* freakTo */.H, { craziness: freakToCrazinessValue }, { align: "left", lineHeight: 1, marginX: (p5.windowWidth - maxLineWidth) / 2, marginY: 0 });
            textPaths = paths.processedTextPath;
            unprocessedTextPaths = paths.originalTextPath;
        }
        const textFillStatuses = unprocessedTextPaths === undefined ?
            render_font/* getTextFillStatuses */.DI(p5, textPaths) : render_font/* getTextFillStatuses */.DI(p5, unprocessedTextPaths);
        render_font/* renderFont */.Q1(p5, textPaths, textFillStatuses, render_strategy/* erode */.s, { erosionStrength: mediumWordErosionValues.map(x => x * erosionStrengthValue) }, unprocessedTextPaths);
    }
    p5.setup = () => {
        p5.createCanvas(p5.windowWidth, p5.windowHeight);
        opentype_module/* default.load */.Ay.load(LibreBaskerville_Regular, (error, font) => {
            if (error) {
                console.log("opentype.js | " + LibreBaskerville_Regular + " could not be loaded: " + error);
            }
            else {
                if (font !== undefined) {
                    libreBaskervilleRegOTF = font;
                    redrawFont();
                    console.log("opentype.js | " + LibreBaskerville_Regular + " loaded.");
                }
                else {
                    console.log("opentype.js | " + LibreBaskerville_Regular + " could not be loaded: it was undefined");
                }
            }
        });
    };
    p5.windowResized = () => {
        p5.resizeCanvas(p5.windowWidth, p5.windowHeight);
        redrawFont();
    };
    p5.keyPressed = () => {
        let needsUpdate = false;
        if (p5.key === "ArrowUp") {
            needsUpdate = true;
        }
        if (needsUpdate)
            redrawFont();
    };
}
new (p5_min_default())(sketch);


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [652,191], () => (__webpack_exec__(293)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7QUFFRCxJQUFJLGtCQUFFLENBQUMsTUFBTSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL2V4cGVyaW1lbnRzL21lZGl1bS9tZWRpdW0td29yZC1lcm9zaW9uLXZhbHVlcy50cyIsIndlYnBhY2s6Ly9yYW5kb21mb250Ly4vc3JjL2V4cGVyaW1lbnRzL21lZGl1bS9za2V0Y2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogbWFrZSBhIGJldHRlciB3YXkgb2YgZG9pbmcgdGhpc1xyXG5leHBvcnQgY29uc3QgbWVkaXVtV29yZEVyb3Npb25WYWx1ZXM6IG51bWJlcltdID0gW1xyXG4gICAgLy8gXCJXZeKAmXJlXCJcclxuICAgIDAsMCwwLDAsMCxcclxuICAgIDAsXHJcbiAgICAvLyBcImRlc3Ryb3lpbmdcIlxyXG4gICAgMC40LDAuNCwwLjQsMC40LDAuNCwwLjQsMC40LDAuNCwwLjQsMC40LFxyXG4gICAgMCxcclxuICAgIC8vIFwid29yZHNcIlxyXG4gICAgMCwwLDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwi4oCUXCJcclxuICAgIDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJzY29yZXNcIlxyXG4gICAgMC4yLDAuMiwwLjIsMC4yLDAuMiwwLjIsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJvZlwiXHJcbiAgICAwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJ0aGVtLFwiXHJcbiAgICAwLDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJodW5kcmVkc1wiXHJcbiAgICAwLjIsMC4yLDAuMiwwLjIsMC4yLDAuMiwwLjIsMC4yLFxyXG4gICAgMCxcclxuICAgIC8vIFwib2ZcIlxyXG4gICAgMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwidGhlbSxcIlxyXG4gICAgMCwwLDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwiZXZlcnlcIlxyXG4gICAgMCwwLDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwiZGF5LlwiXHJcbiAgICAwLDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwiV2XigJlyZVwiXHJcbiAgICAwLDAsMCwwLDAsXHJcbiAgICAwLFxyXG4gICAgLy8gXCJjdXR0aW5nXCJcclxuICAgIDAuNiwwLjYsMC42LDAuNiwwLjYsMC42LDAuNixcclxuICAgIC8vIFwidGhlXCJcclxuICAgIDAsMCwwLFxyXG4gICAgMCxcclxuICAgIC8vIFwibGFuZ3VhZ2VcIlxyXG4gICAgMCwwLjA1LDAuMTAsMC4xNSwwLjIwLDAuMjUsMC4zMCwwLjM1LFxyXG4gICAgMCxcclxuICAgIC8vIFwiZG93blwiXHJcbiAgICAwLjQwLDAuNDUsMC41MCwwLjU1LFxyXG4gICAgMCxcclxuICAgIC8vIFwidG9cIlxyXG4gICAgMC42MCwwLjY1LFxyXG4gICAgMCxcclxuICAgIC8vIFwidGhlXCJcclxuICAgIDAuNzAsMC43NSwwLjgwLFxyXG4gICAgMCxcclxuICAgIC8vIFwiYm9uZS5cIlxyXG4gICAgMC44NSwwLjkwLDAuOTUsMSwxLjVcclxuXTsiLCJpbXBvcnQgcDUgZnJvbSAncDUnO1xyXG5pbXBvcnQgb3RmIGZyb20gJ29wZW50eXBlLmpzJztcclxuXHJcbmltcG9ydCAnQHNyYy9zdHlsZXMvc2tldGNoLmNzcyc7XHJcblxyXG5pbXBvcnQgbGlicmVCYXNrZXJ2aWxsZVJlZ1BhdGggZnJvbSAnQHNyYy9hc3NldHMvZm9udHMvTGlicmVfQmFza2VydmlsbGUvTGlicmVCYXNrZXJ2aWxsZS1SZWd1bGFyLnR0Zic7XHJcblxyXG5pbXBvcnQgKiBhcyBPVEZGb250UmVuZGVyZXIgZnJvbSAnQHNyYy9yZW5kZXJlcnMvb3RmL3JlbmRlci1mb250JztcclxuaW1wb3J0ICogYXMgT1RGRm9udFJlbmRlclN0cmF0ZWd5IGZyb20gJ0BzcmMvcmVuZGVyZXJzL290Zi9yZW5kZXItc3RyYXRlZ3knO1xyXG5pbXBvcnQgKiBhcyBPVEZQYXRoUHJlcHJvY2Vzc29yIGZyb20gJ0BzcmMvcmVuZGVyZXJzL290Zi9wYXRoLXByZXByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IG1lZGl1bVdvcmRFcm9zaW9uVmFsdWVzIH0gZnJvbSBcIkBzcmMvZXhwZXJpbWVudHMvbWVkaXVtL21lZGl1bS13b3JkLWVyb3Npb24tdmFsdWVzXCI7XHJcbmltcG9ydCB7RmlsbFN0YXR1c30gZnJvbSBcIkBzcmMvcmVuZGVyZXJzL290Zi9yZW5kZXItZm9udFwiO1xyXG5cclxuZnVuY3Rpb24gc2tldGNoKHA1OiBwNSk6IHZvaWQge1xyXG5cclxuICAgIGxldCBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGIDogb3RmLkZvbnQ7XHJcblxyXG4gICAgbGV0IHRleHQ6IHN0cmluZyA9IFwiV2XigJlyZSBkZXN0cm95aW5nIHdvcmRzIOKAlCBzY29yZXMgb2YgdGhlbSwgXFxuXCIgK1xyXG4gICAgICAgIFwiaHVuZHJlZHMgb2YgdGhlbSwgZXZlcnkgZGF5LiBXZeKAmXJlIGN1dHRpbmdcXG5cIiArXHJcbiAgICAgICAgXCJ0aGUgbGFuZ3VhZ2UgZG93biB0byB0aGUgYm9uZS5cIjtcclxuICAgIGNvbnN0IHR5cGVTaXplOiBudW1iZXIgPSA2NDtcclxuICAgIGxldCB0ZXh0UGF0aHM6IG90Zi5QYXRoW107XHJcbiAgICBsZXQgdW5wcm9jZXNzZWRUZXh0UGF0aHM6IG90Zi5QYXRoW107XHJcbiAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoL1xccj9cXG4vKTtcclxuXHJcbiAgICBjb25zdCBmcmVha1RvQ3JhemluZXNzVmFsdWU6IG51bWJlciA9IDEuMzY7XHJcbiAgICBjb25zdCBlcm9zaW9uU3RyZW5ndGhWYWx1ZTogbnVtYmVyID0gLTM7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVkcmF3Rm9udChpbW1lZGlhdGVseVJlZHJhdzogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgICBwNS5iYWNrZ3JvdW5kKDI1NSk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGNsZWFuIHRoaXMgdXBcclxuICAgICAgICAvLyBNZWFzdXJlIHRoZSB3aWRlc3QgbGluZSAoYXQgKDAsMCkpIGZvciB0aGUgZ2l2ZW4gdHlwZVNpemVcclxuICAgICAgICBjb25zdCBtYXhMaW5lV2lkdGggPSBNYXRoLm1heChcclxuICAgICAgICAgICAgLi4ubGluZXMubWFwKGxpbmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmIgPSBsaWJyZUJhc2tlcnZpbGxlUmVnT1RGXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldFBhdGgobGluZSwgMCwgMCwgdHlwZVNpemUsIHsga2VybmluZzogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXRCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJiLngyIC0gYmIueDE7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKGltbWVkaWF0ZWx5UmVkcmF3KSB7IC8vIHRoaXMgY29uZGl0aW9uIGlzIGZvciB3aGVuIHRoZSB0ZXh0IGlzIHVwZGF0ZWQgKGZvciBkZWJ1Z2dpbmcpXHJcbiAgICAgICAgICAgIGxldCBwYXRoczoge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0UGF0aDogb3RmLlBhdGhbXVxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dFBhdGg6IG90Zi5QYXRoW11cclxuICAgICAgICAgICAgfSA9IE9URkZvbnRSZW5kZXJlci5nZXRUZXh0UGF0aHMoXHJcbiAgICAgICAgICAgICAgICBwNSxcclxuICAgICAgICAgICAgICAgIGxpYnJlQmFza2VydmlsbGVSZWdPVEYsXHJcbiAgICAgICAgICAgICAgICB0ZXh0LFxyXG4gICAgICAgICAgICAgICAgdHlwZVNpemUsXHJcbiAgICAgICAgICAgICAgICBPVEZQYXRoUHJlcHJvY2Vzc29yLmZyZWFrVG8sXHJcbiAgICAgICAgICAgICAgICB7IGNyYXppbmVzczogZnJlYWtUb0NyYXppbmVzc1ZhbHVlIH0sXHJcbiAgICAgICAgICAgICAgICB7IGFsaWduOiBcImxlZnRcIiwgbGluZUhlaWdodDogMSwgbWFyZ2luWDogKHA1LndpbmRvd1dpZHRoIC0gbWF4TGluZVdpZHRoKSAvIDIsIG1hcmdpblk6IDAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0ZXh0UGF0aHMgPSBwYXRocy5wcm9jZXNzZWRUZXh0UGF0aDtcclxuICAgICAgICAgICAgdW5wcm9jZXNzZWRUZXh0UGF0aHMgPSBwYXRocy5vcmlnaW5hbFRleHRQYXRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc29ydGluZyBvdXQgcmVuZGVyaW5nIGhvbGVzIGluIGZvbnRzXHJcbiAgICAgICAgLy8gdW5wcm9jZXNzZWRUZXh0UGF0aHMgY2FuIGJlIHVzZWQgaGVyZSBpZiB0aGUgcHJvY2Vzc2luZyB5b3UgZG8gb24geW91ciB0ZXh0IGlzIHNvIGV4dHJlbWUgdGhhdCBpdCBkZXN0cm95c1xyXG4gICAgICAgIC8vIG15IHZlcnkgZmlja2xlIGFsZ29yaXRobSBmb3IgZGV0ZXJtaW5pbmcgdGhlIG51bWJlciBhbmQgb3JkZXIgb2YgaG9sZXMgaW4gYSBsZXR0ZXJmb3JtIDopXHJcbiAgICAgICAgY29uc3QgdGV4dEZpbGxTdGF0dXNlczogRmlsbFN0YXR1c1tdW10gPSB1bnByb2Nlc3NlZFRleHRQYXRocyA9PT0gdW5kZWZpbmVkID9cclxuICAgICAgICAgICAgT1RGRm9udFJlbmRlcmVyLmdldFRleHRGaWxsU3RhdHVzZXMocDUsIHRleHRQYXRocykgOiBPVEZGb250UmVuZGVyZXIuZ2V0VGV4dEZpbGxTdGF0dXNlcyhwNSwgdW5wcm9jZXNzZWRUZXh0UGF0aHMpO1xyXG5cclxuXHJcbiAgICAgICAgT1RGRm9udFJlbmRlcmVyLnJlbmRlckZvbnQoXHJcbiAgICAgICAgICAgIHA1LFxyXG4gICAgICAgICAgICB0ZXh0UGF0aHMsXHJcbiAgICAgICAgICAgIHRleHRGaWxsU3RhdHVzZXMsXHJcbiAgICAgICAgICAgIE9URkZvbnRSZW5kZXJTdHJhdGVneS5lcm9kZSxcclxuICAgICAgICAgICAgeyBlcm9zaW9uU3RyZW5ndGg6IG1lZGl1bVdvcmRFcm9zaW9uVmFsdWVzLm1hcCh4ID0+IHggKiBlcm9zaW9uU3RyZW5ndGhWYWx1ZSkgfSxcclxuICAgICAgICAgICAgdW5wcm9jZXNzZWRUZXh0UGF0aHNcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHA1LnNldHVwID0gKCkgOiB2b2lkID0+IHtcclxuICAgICAgICBwNS5jcmVhdGVDYW52YXMocDUud2luZG93V2lkdGgsIHA1LndpbmRvd0hlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIG9wZW50eXBlLmpzIGZvbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICBvdGYubG9hZChsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCwgKGVycm9yLCBmb250KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3BlbnR5cGUuanMgfCBcIiArIGxpYnJlQmFza2VydmlsbGVSZWdQYXRoICsgXCIgY291bGQgbm90IGJlIGxvYWRlZDogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgaWYgKGZvbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgbGlicmVCYXNrZXJ2aWxsZVJlZ09URiA9IGZvbnQ7XHJcbiAgICAgICAgICAgICAgICAgICByZWRyYXdGb250KCk7XHJcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9wZW50eXBlLmpzIHwgXCIgKyBsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCArIFwiIGxvYWRlZC5cIik7XHJcbiAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm9wZW50eXBlLmpzIHwgXCIgKyBsaWJyZUJhc2tlcnZpbGxlUmVnUGF0aCArIFwiIGNvdWxkIG5vdCBiZSBsb2FkZWQ6IGl0IHdhcyB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHA1LndpbmRvd1Jlc2l6ZWQgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIHA1LnJlc2l6ZUNhbnZhcyhwNS53aW5kb3dXaWR0aCwgcDUud2luZG93SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmVkcmF3Rm9udCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHA1LmtleVByZXNzZWQgPSAoKSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIGxldCBuZWVkc1VwZGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAocDUua2V5ID09PSBcIkFycm93VXBcIikge1xyXG4gICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmVlZHNVcGRhdGUpIHJlZHJhd0ZvbnQoKTtcclxuICAgIH1cclxufVxyXG5cclxubmV3IHA1KHNrZXRjaCk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==